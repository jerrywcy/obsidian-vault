/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={249:function(e,t,n){var i;e.exports=(i=i||function(e,t){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&"undefined"!=typeof global&&global.crypto&&(i=global.crypto),!i)try{i=n(113)}catch(e){}var r=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},l=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},c=a.WordArray=l.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||h).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(var a=0;a<r;a+=4)t[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=l.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new c.init(t,e)}}),u=s.enc={},h=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new c.init(n,t/2)}},p=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new c.init(n,t)}},f=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},d=a.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,r=i.words,o=i.sigBytes,s=this.blockSize,a=o/(4*s),l=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,u=e.min(4*l,o);if(l){for(var h=0;h<l;h+=s)this._doProcessBlock(r,h);n=r.splice(0,l),i.sigBytes-=u}return new c.init(n,u)},clone:function(){var e=l.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),m=(a.Hasher=d.extend({cfg:l.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new m.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),i)},214:function(e,t,n){var i;e.exports=(i=n(249),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,s=t.algo,a=[];!function(){for(var t=0;t<64;t++)a[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=s.MD5=o.extend({_doReset:function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var n=0;n<16;n++){var i=t+n,r=e[i];e[i]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8)}var o=this._hash.words,s=e[t+0],l=e[t+1],f=e[t+2],d=e[t+3],m=e[t+4],v=e[t+5],g=e[t+6],y=e[t+7],b=e[t+8],_=e[t+9],w=e[t+10],x=e[t+11],k=e[t+12],S=e[t+13],E=e[t+14],O=e[t+15],L=o[0],T=o[1],A=o[2],C=o[3];L=c(L,T,A,C,s,7,a[0]),C=c(C,L,T,A,l,12,a[1]),A=c(A,C,L,T,f,17,a[2]),T=c(T,A,C,L,d,22,a[3]),L=c(L,T,A,C,m,7,a[4]),C=c(C,L,T,A,v,12,a[5]),A=c(A,C,L,T,g,17,a[6]),T=c(T,A,C,L,y,22,a[7]),L=c(L,T,A,C,b,7,a[8]),C=c(C,L,T,A,_,12,a[9]),A=c(A,C,L,T,w,17,a[10]),T=c(T,A,C,L,x,22,a[11]),L=c(L,T,A,C,k,7,a[12]),C=c(C,L,T,A,S,12,a[13]),A=c(A,C,L,T,E,17,a[14]),L=u(L,T=c(T,A,C,L,O,22,a[15]),A,C,l,5,a[16]),C=u(C,L,T,A,g,9,a[17]),A=u(A,C,L,T,x,14,a[18]),T=u(T,A,C,L,s,20,a[19]),L=u(L,T,A,C,v,5,a[20]),C=u(C,L,T,A,w,9,a[21]),A=u(A,C,L,T,O,14,a[22]),T=u(T,A,C,L,m,20,a[23]),L=u(L,T,A,C,_,5,a[24]),C=u(C,L,T,A,E,9,a[25]),A=u(A,C,L,T,d,14,a[26]),T=u(T,A,C,L,b,20,a[27]),L=u(L,T,A,C,S,5,a[28]),C=u(C,L,T,A,f,9,a[29]),A=u(A,C,L,T,y,14,a[30]),L=h(L,T=u(T,A,C,L,k,20,a[31]),A,C,v,4,a[32]),C=h(C,L,T,A,b,11,a[33]),A=h(A,C,L,T,x,16,a[34]),T=h(T,A,C,L,E,23,a[35]),L=h(L,T,A,C,l,4,a[36]),C=h(C,L,T,A,m,11,a[37]),A=h(A,C,L,T,y,16,a[38]),T=h(T,A,C,L,w,23,a[39]),L=h(L,T,A,C,S,4,a[40]),C=h(C,L,T,A,s,11,a[41]),A=h(A,C,L,T,d,16,a[42]),T=h(T,A,C,L,g,23,a[43]),L=h(L,T,A,C,_,4,a[44]),C=h(C,L,T,A,k,11,a[45]),A=h(A,C,L,T,O,16,a[46]),L=p(L,T=h(T,A,C,L,f,23,a[47]),A,C,s,6,a[48]),C=p(C,L,T,A,y,10,a[49]),A=p(A,C,L,T,E,15,a[50]),T=p(T,A,C,L,v,21,a[51]),L=p(L,T,A,C,k,6,a[52]),C=p(C,L,T,A,d,10,a[53]),A=p(A,C,L,T,w,15,a[54]),T=p(T,A,C,L,l,21,a[55]),L=p(L,T,A,C,b,6,a[56]),C=p(C,L,T,A,O,10,a[57]),A=p(A,C,L,T,g,15,a[58]),T=p(T,A,C,L,S,21,a[59]),L=p(L,T,A,C,m,6,a[60]),C=p(C,L,T,A,x,10,a[61]),A=p(A,C,L,T,f,15,a[62]),T=p(T,A,C,L,_,21,a[63]),o[0]=o[0]+L|0,o[1]=o[1]+T|0,o[2]=o[2]+A|0,o[3]=o[3]+C|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;n[r>>>5]|=128<<24-r%32;var o=e.floor(i/4294967296),s=i;n[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(r+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(n.length+1),this._process();for(var a=this._hash,l=a.words,c=0;c<4;c++){var u=l[c];l[c]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return a},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});function c(e,t,n,i,r,o,s){var a=e+(t&n|~t&i)+r+s;return(a<<o|a>>>32-o)+t}function u(e,t,n,i,r,o,s){var a=e+(t&i|n&~i)+r+s;return(a<<o|a>>>32-o)+t}function h(e,t,n,i,r,o,s){var a=e+(t^n^i)+r+s;return(a<<o|a>>>32-o)+t}function p(e,t,n,i,r,o,s){var a=e+(n^(t|~i))+r+s;return(a<<o|a>>>32-o)+t}t.MD5=o._createHelper(l),t.HmacMD5=o._createHmacHelper(l)}(Math),i.MD5)},40:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,o="[object Arguments]",s="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",u="[object Function]",h="[object Map]",p="[object Number]",f="[object Object]",d="[object Promise]",m="[object RegExp]",v="[object Set]",g="[object String]",y="[object Symbol]",b="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",x=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k=/^\w*$/,S=/^\./,E=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,O=/\\(\\)?/g,L=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,A={};A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A[o]=A[s]=A[_]=A[a]=A[w]=A[l]=A[c]=A[u]=A[h]=A[p]=A[f]=A[m]=A[v]=A[g]=A[b]=!1;var C="object"==typeof global&&global&&global.Object===Object&&global,$="object"==typeof self&&self&&self.Object===Object&&self,I=C||$||Function("return this")(),N=t&&!t.nodeType&&t,F=N&&e&&!e.nodeType&&e,B=F&&F.exports===N&&C.process,j=function(){try{return B&&B.binding("util")}catch(e){}}(),P=j&&j.isTypedArray;function M(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function R(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function H(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function D(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function K(e,t){return function(n){return e(t(n))}}function V(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var U,G=Array.prototype,W=Function.prototype,z=Object.prototype,q=I["__core-js_shared__"],Y=(U=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+U:"",J=W.toString,X=z.hasOwnProperty,Z=z.toString,Q=RegExp("^"+J.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ee=I.Symbol,te=I.Uint8Array,ne=K(Object.getPrototypeOf,Object),ie=z.propertyIsEnumerable,re=G.splice,oe=Object.getOwnPropertySymbols,se=K(Object.keys,Object),ae=Fe(I,"DataView"),le=Fe(I,"Map"),ce=Fe(I,"Promise"),ue=Fe(I,"Set"),he=Fe(I,"WeakMap"),pe=Fe(Object,"create"),fe=Ge(ae),de=Ge(le),me=Ge(ce),ve=Ge(ue),ge=Ge(he),ye=ee?ee.prototype:void 0,be=ye?ye.valueOf:void 0,_e=ye?ye.toString:void 0;function we(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function xe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function ke(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Se(e){var t=-1,n=e?e.length:0;for(this.__data__=new ke;++t<n;)this.add(e[t])}function Ee(e){this.__data__=new xe(e)}function Oe(e,t){var n=Ye(e)||qe(e)?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],i=n.length,r=!!i;for(var o in e)!t&&!X.call(e,o)||r&&("length"==o||Me(o,i))||n.push(o);return n}function Le(e,t){for(var n=e.length;n--;)if(ze(e[n][0],t))return n;return-1}function Te(e,t){for(var n=0,i=(t=Re(t,e)?[t]:$e(t)).length;null!=e&&n<i;)e=e[Ue(t[n++])];return n&&n==i?e:void 0}function Ae(e,t){return null!=e&&t in Object(e)}function Ce(e,t,n,i,r){return e===t||(null==e||null==t||!Qe(e)&&!et(t)?e!=e&&t!=t:function(e,t,n,i,r,u){var d=Ye(e),b=Ye(t),x=s,k=s;d||(x=(x=Pe(e))==o?f:x),b||(k=(k=Pe(t))==o?f:k);var S=x==f&&!H(e),E=k==f&&!H(t),O=x==k;if(O&&!S)return u||(u=new Ee),d||it(e)?Ie(e,t,n,i,r,u):function(e,t,n,i,r,o,s){switch(n){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case _:return!(e.byteLength!=t.byteLength||!i(new te(e),new te(t)));case a:case l:case p:return ze(+e,+t);case c:return e.name==t.name&&e.message==t.message;case m:case g:return e==t+"";case h:var u=D;case v:var f=2&o;if(u||(u=V),e.size!=t.size&&!f)return!1;var d=s.get(e);if(d)return d==t;o|=1,s.set(e,t);var b=Ie(u(e),u(t),i,r,o,s);return s.delete(e),b;case y:if(be)return be.call(e)==be.call(t)}return!1}(e,t,x,n,i,r,u);if(!(2&r)){var L=S&&X.call(e,"__wrapped__"),T=E&&X.call(t,"__wrapped__");if(L||T){var A=L?e.value():e,C=T?t.value():t;return u||(u=new Ee),n(A,C,i,r,u)}}return!!O&&(u||(u=new Ee),function(e,t,n,i,r,o){var s=2&r,a=rt(e),l=a.length;if(l!=rt(t).length&&!s)return!1;for(var c=l;c--;){var u=a[c];if(!(s?u in t:X.call(t,u)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);for(var f=s;++c<l;){var d=e[u=a[c]],m=t[u];if(i)var v=s?i(m,d,u,t,e,o):i(d,m,u,e,t,o);if(!(void 0===v?d===m||n(d,m,i,r,o):v)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var g=e.constructor,y=t.constructor;g==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,i,r,u))}(e,t,Ce,n,i,r))}function $e(e){return Ye(e)?e:Ve(e)}function Ie(e,t,n,i,r,o){var s=2&r,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,h=!0,p=1&r?new Se:void 0;for(o.set(e,t),o.set(t,e);++u<a;){var f=e[u],d=t[u];if(i)var m=s?i(d,f,u,t,e,o):i(f,d,u,e,t,o);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!R(t,(function(e,t){if(!p.has(t)&&(f===e||n(f,e,i,r,o)))return p.add(t)}))){h=!1;break}}else if(f!==d&&!n(f,d,i,r,o)){h=!1;break}}return o.delete(e),o.delete(t),h}function Ne(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function Fe(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Qe(e)||(t=e,Y&&Y in t))&&(Xe(e)||H(e)?Q:L).test(Ge(e));var t}(n)?n:void 0}we.prototype.clear=function(){this.__data__=pe?pe(null):{}},we.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},we.prototype.get=function(e){var t=this.__data__;if(pe){var n=t[e];return n===i?void 0:n}return X.call(t,e)?t[e]:void 0},we.prototype.has=function(e){var t=this.__data__;return pe?void 0!==t[e]:X.call(t,e)},we.prototype.set=function(e,t){return this.__data__[e]=pe&&void 0===t?i:t,this},xe.prototype.clear=function(){this.__data__=[]},xe.prototype.delete=function(e){var t=this.__data__,n=Le(t,e);return!(n<0||(n==t.length-1?t.pop():re.call(t,n,1),0))},xe.prototype.get=function(e){var t=this.__data__,n=Le(t,e);return n<0?void 0:t[n][1]},xe.prototype.has=function(e){return Le(this.__data__,e)>-1},xe.prototype.set=function(e,t){var n=this.__data__,i=Le(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},ke.prototype.clear=function(){this.__data__={hash:new we,map:new(le||xe),string:new we}},ke.prototype.delete=function(e){return Ne(this,e).delete(e)},ke.prototype.get=function(e){return Ne(this,e).get(e)},ke.prototype.has=function(e){return Ne(this,e).has(e)},ke.prototype.set=function(e,t){return Ne(this,e).set(e,t),this},Se.prototype.add=Se.prototype.push=function(e){return this.__data__.set(e,i),this},Se.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new xe},Ee.prototype.delete=function(e){return this.__data__.delete(e)},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof xe){var i=n.__data__;if(!le||i.length<199)return i.push([e,t]),this;n=this.__data__=new ke(i)}return n.set(e,t),this};var Be=oe?K(oe,Object):at,je=oe?function(e){for(var t=[];e;)M(t,Be(e)),e=ne(e);return t}:at,Pe=function(e){return Z.call(e)};function Me(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function Re(e,t){if(Ye(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!tt(e))||k.test(e)||!x.test(e)||null!=t&&e in Object(t)}function He(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||z)}function De(e){return e==e&&!Qe(e)}function Ke(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}(ae&&Pe(new ae(new ArrayBuffer(1)))!=w||le&&Pe(new le)!=h||ce&&Pe(ce.resolve())!=d||ue&&Pe(new ue)!=v||he&&Pe(new he)!=b)&&(Pe=function(e){var t=Z.call(e),n=t==f?e.constructor:void 0,i=n?Ge(n):void 0;if(i)switch(i){case fe:return w;case de:return h;case me:return d;case ve:return v;case ge:return b}return t});var Ve=We((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(tt(e))return _e?_e.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return S.test(e)&&n.push(""),e.replace(E,(function(e,t,i,r){n.push(i?r.replace(O,"$1"):t||e)})),n}));function Ue(e){if("string"==typeof e||tt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Ge(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function We(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s),s};return n.cache=new(We.Cache||ke),n}function ze(e,t){return e===t||e!=e&&t!=t}function qe(e){return function(e){return et(e)&&Je(e)}(e)&&X.call(e,"callee")&&(!ie.call(e,"callee")||Z.call(e)==o)}We.Cache=ke;var Ye=Array.isArray;function Je(e){return null!=e&&Ze(e.length)&&!Xe(e)}function Xe(e){var t=Qe(e)?Z.call(e):"";return t==u||"[object GeneratorFunction]"==t}function Ze(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function Qe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function et(e){return!!e&&"object"==typeof e}function tt(e){return"symbol"==typeof e||et(e)&&Z.call(e)==y}var nt,it=P?(nt=P,function(e){return nt(e)}):function(e){return et(e)&&Ze(e.length)&&!!A[Z.call(e)]};function rt(e){return Je(e)?Oe(e):function(e){if(!He(e))return se(e);var t=[];for(var n in Object(e))X.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}function ot(e){return Je(e)?Oe(e,!0):function(e){if(!Qe(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=He(e),n=[];for(var i in e)("constructor"!=i||!t&&X.call(e,i))&&n.push(i);return n}(e)}function st(e){return e}function at(){return[]}e.exports=function(e,t){return null==e?{}:function(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=e[s];n(a,s)&&(o[s]=a)}return o}(e,function(e){return function(e,t,n){var i=t(e);return Ye(e)?i:M(i,n(e))}(e,ot,je)}(e),"function"==typeof(n=t)?n:null==n?st:"object"==typeof n?Ye(n)?function(e,t){return Re(e)&&De(t)?Ke(Ue(e),t):function(n){var i=function(e,t,n){var i=null==e?void 0:Te(e,t);return void 0===i?void 0:i}(n,e);return void 0===i&&i===t?function(e,t){return null!=e&&function(e,t,n){for(var i,r=-1,o=(t=Re(t,e)?[t]:$e(t)).length;++r<o;){var s=Ue(t[r]);if(!(i=null!=e&&n(e,s)))break;e=e[s]}return i||!!(o=e?e.length:0)&&Ze(o)&&Me(s,o)&&(Ye(e)||qe(e))}(e,t,Ae)}(n,e):Ce(t,i,void 0,3)}}(n[0],n[1]):(r=function(e){for(var t=rt(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,De(r)]}return t}(i=n),1==r.length&&r[0][2]?Ke(r[0][0],r[0][1]):function(e){return e===i||function(e,t,n,i){var r=n.length,o=r;if(null==e)return!o;for(e=Object(e);r--;){var s=n[r];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<o;){var a=(s=n[r])[0],l=e[a],c=s[1];if(s[2]){if(void 0===l&&!(a in e))return!1}else{var u,h=new Ee;if(!(void 0===u?Ce(c,l,i,3,h):u))return!1}}return!0}(e,0,r)}):Re(o=n)?(s=Ue(o),function(e){return null==e?void 0:e[s]}):function(e){return function(t){return Te(t,e)}}(o));var n,i,r,o,s}},985:function(e){var t;"undefined"!=typeof self&&self,t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,n){"use strict";var i=Array.prototype,r=Object.prototype,o={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},s=/[&"'<>]/g;function a(e,t){return r.hasOwnProperty.call(e,t)}function l(e){return o[e]}function c(e,t,n){var i,r,o;if(e instanceof Error&&(e=(r=e).name+": "+r.message),Object.setPrototypeOf?(i=new Error(e),Object.setPrototypeOf(i,c.prototype)):(i=this,Object.defineProperty(i,"message",{enumerable:!1,writable:!0,value:e})),Object.defineProperty(i,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(i,this.constructor),r){var s=Object.getOwnPropertyDescriptor(r,"stack");(o=s&&(s.get||function(){return s.value}))||(o=function(){return r.stack})}else{var a=new Error(e).stack;o=function(){return a}}return Object.defineProperty(i,"stack",{get:function(){return o.call(i)}}),Object.defineProperty(i,"cause",{value:r}),i.lineno=t,i.colno=n,i.firstUpdate=!0,i.Update=function(e){var t="("+(e||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?t+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(t+=" [Line "+this.lineno+"]")),t+="\n ",this.firstUpdate&&(t+=" "),this.message=t+(this.message||""),this.firstUpdate=!1,this},i}function u(e){return"[object Function]"===r.toString.call(e)}function h(e){return"[object Array]"===r.toString.call(e)}function p(e){return"[object String]"===r.toString.call(e)}function f(e){return"[object Object]"===r.toString.call(e)}function d(e){var t,n=(t=e)?"string"==typeof t?t.split("."):[t]:[];return function(e){for(var t=e,i=0;i<n.length;i++){var r=n[i];if(!a(t,r))return;t=t[r]}return t}}function m(e){return Array.prototype.slice.call(e)}function v(e,t,n){return Array.prototype.indexOf.call(e||[],t,n)}function g(e){var t=[];for(var n in e)a(e,n)&&t.push(n);return t}(t=e.exports={}).hasOwnProp=a,t._prettifyError=function(e,n,i){if(i.Update||(i=new t.TemplateError(i)),i.Update(e),!n){var r=i;(i=new Error(r.message)).name=r.name}return i},Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,Error.prototype):c.prototype=Object.create(Error.prototype,{constructor:{value:c}}),t.TemplateError=c,t.escape=function(e){return e.replace(s,l)},t.isFunction=u,t.isArray=h,t.isString=p,t.isObject=f,t.getAttrGetter=d,t.groupBy=function(e,t,n){for(var i={},r=u(t)?t:d(t),o=0;o<e.length;o++){var s=e[o],a=r(s,o);if(void 0===a&&!0===n)throw new TypeError('groupby: attribute "'+t+'" resolved to undefined');(i[a]||(i[a]=[])).push(s)}return i},t.toArray=m,t.without=function(e){var t=[];if(!e)return t;for(var n=e.length,i=m(arguments).slice(1),r=-1;++r<n;)-1===v(i,e[r])&&t.push(e[r]);return t},t.repeat=function(e,t){for(var n="",i=0;i<t;i++)n+=e;return n},t.each=function(e,t,n){if(null!=e)if(i.forEach&&e.forEach===i.forEach)e.forEach(t,n);else if(e.length===+e.length)for(var r=0,o=e.length;r<o;r++)t.call(n,e[r],r,e)},t.map=function(e,t){var n=[];if(null==e)return n;if(i.map&&e.map===i.map)return e.map(t);for(var r=0;r<e.length;r++)n[n.length]=t(e[r],r);return e.length===+e.length&&(n.length=e.length),n},t.asyncIter=function(e,t,n){var i=-1;!function r(){++i<e.length?t(e[i],i,r,n):n()}()},t.asyncFor=function(e,t,n){var i=g(e||{}),r=i.length,o=-1;!function s(){o++;var a=i[o];o<r?t(a,e[a],o,r,s):n()}()},t.indexOf=v,t.keys=g,t._entries=function(e){return g(e).map((function(t){return[t,e[t]]}))},t._values=function(e){return g(e).map((function(t){return e[t]}))},t._assign=t.extend=function(e,t){return e=e||{},g(t).forEach((function(n){e[n]=t[n]})),e},t.inOperator=function(e,t){if(h(t)||p(t))return-1!==t.indexOf(e);if(f(t))return e in t;throw new Error('Cannot use "in" operator to search for "'+e+'" in unexpected types.')}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}var a=n(16),l=n(0);function c(e,t,n){n=n||{},l.keys(n).forEach((function(t){var i,r;n[t]=(i=e.prototype[t],r=n[t],"function"!=typeof i||"function"!=typeof r?r:function(){var e=this.parent;this.parent=i;var t=r.apply(this,arguments);return this.parent=e,t})}));var i=function(e){function n(){return e.apply(this,arguments)||this}return o(n,e),r(n,[{key:"typename",get:function(){return t}}]),n}(e);return l._assign(i.prototype,n),i}var u=function(){function e(){this.init.apply(this,arguments)}return e.prototype.init=function(){},e.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),c(this,e,t)},r(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(),h=function(e){function t(){var t,n;return(t=n=e.call(this)||this).init.apply(t,arguments),n}return o(t,e),t.prototype.init=function(){},t.extend=function(e,t){return"object"==typeof e&&(t=e,e="anonymous"),c(this,e,t)},r(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(a);e.exports={Obj:u,EmitterObj:h}},function(e,t,n){"use strict";var i=n(0),r=Array.from,o="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof r,s=function(){function e(e,t){this.variables=Object.create(null),this.parent=e,this.topLevel=!1,this.isolateWrites=t}var t=e.prototype;return t.set=function(e,t,n){var i=e.split("."),r=this.variables,o=this;if(n&&(o=this.resolve(i[0],!0)))o.set(e,t);else{for(var s=0;s<i.length-1;s++){var a=i[s];r[a]||(r[a]={}),r=r[a]}r[i[i.length-1]]=t}},t.get=function(e){var t=this.variables[e];return void 0!==t?t:null},t.lookup=function(e){var t=this.parent,n=this.variables[e];return void 0!==n?n:t&&t.lookup(e)},t.resolve=function(e,t){var n=t&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[e]?this:n&&n.resolve(e)},t.push=function(t){return new e(this,t)},t.pop=function(){return this.parent},e}();function a(e){return e&&Object.prototype.hasOwnProperty.call(e,"__keywords")}function l(e){var t=e.length;if(t){var n=e[t-1];if(a(n))return n}return{}}function c(e){var t=e.length;return 0===t?0:a(e[t-1])?t-1:t}function u(e){if("string"!=typeof e)return e;this.val=e,this.length=e.length}u.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),u.prototype.valueOf=function(){return this.val},u.prototype.toString=function(){return this.val},e.exports={Frame:s,makeMacro:function(e,t,n){return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var s,a=c(r),u=l(r);if(a>e.length)s=r.slice(0,e.length),r.slice(s.length,a).forEach((function(e,n){n<t.length&&(u[t[n]]=e)})),s.push(u);else if(a<e.length){s=r.slice(0,a);for(var h=a;h<e.length;h++){var p=e[h];s.push(u[p]),delete u[p]}s.push(u)}else s=r;return n.apply(this,s)}},makeKeywordArgs:function(e){return e.__keywords=!0,e},numArgs:c,suppressValue:function(e,t){return e=null!=e?e:"",!t||e instanceof u||(e=i.escape(e.toString())),e},ensureDefined:function(e,t,n){if(null==e)throw new i.TemplateError("attempted to output null or undefined value",t+1,n+1);return e},memberLookup:function(e,t){if(null!=e)return"function"==typeof e[t]?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return e[t].apply(e,i)}:e[t]},contextOrFrameLookup:function(e,t,n){var i=t.lookup(n);return void 0!==i?i:e.lookup(n)},callWrap:function(e,t,n,i){if(!e)throw new Error("Unable to call `"+t+"`, which is undefined or falsey");if("function"!=typeof e)throw new Error("Unable to call `"+t+"`, which is not a function");return e.apply(n,i)},handleError:function(e,t,n){return e.lineno?e:new i.TemplateError(e,t,n)},isArray:i.isArray,keys:i.keys,SafeString:u,copySafeness:function(e,t){return e instanceof u?new u(t):t.toString()},markSafe:function(e){var t=typeof e;return"string"===t?new u(e):"function"!==t?e:function(t){var n=e.apply(this,arguments);return"string"==typeof n?new u(n):n}},asyncEach:function(e,t,n,r){if(i.isArray(e)){var o=e.length;i.asyncIter(e,(function(e,i,r){switch(t){case 1:n(e,i,o,r);break;case 2:n(e[0],e[1],i,o,r);break;case 3:n(e[0],e[1],e[2],i,o,r);break;default:e.push(i,o,r),n.apply(this,e)}}),r)}else i.asyncFor(e,(function(e,t,i,r,o){n(e,t,i,r,o)}),r)},asyncAll:function(e,t,n,r){var o,s,a=0;function l(e,t){a++,s[e]=t,a===o&&r(null,s.join(""))}if(i.isArray(e))if(o=e.length,s=new Array(o),0===o)r(null,"");else for(var c=0;c<e.length;c++){var u=e[c];switch(t){case 1:n(u,c,o,l);break;case 2:n(u[0],u[1],c,o,l);break;case 3:n(u[0],u[1],u[2],c,o,l);break;default:u.push(c,o,l),n.apply(this,u)}}else{var h=i.keys(e||{});if(o=h.length,s=new Array(o),0===o)r(null,"");else for(var p=0;p<h.length;p++){var f=h[p];n(f,e[f],p,o,l)}}},inOperator:i.inOperator,fromIterator:function(e){return"object"!=typeof e||null===e||i.isArray(e)?e:o&&Symbol.iterator in e?r(e):e}}},function(e,t,n){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}function o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,s(e,t)}function s(e,t){return s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},s(e,t)}function a(e,t,n){e instanceof t&&n.push(e),e instanceof l&&e.findAll(t,n)}var l=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.init=function(e,t){for(var n=arguments,i=this,r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];this.lineno=e,this.colno=t,this.fields.forEach((function(e,t){var r=n[t+2];void 0===r&&(r=null),i[e]=r}))},n.findAll=function(e,t){var n=this;return t=t||[],this instanceof u?this.children.forEach((function(n){return a(n,e,t)})):this.fields.forEach((function(i){return a(n[i],e,t)})),t},n.iterFields=function(e){var t=this;this.fields.forEach((function(n){e(t[n],n)}))},t}(n(1).Obj),c=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),r(t,[{key:"typename",get:function(){return"Value"}},{key:"fields",get:function(){return["value"]}}]),t}(l),u=function(e){function t(){return e.apply(this,arguments)||this}o(t,e);var n=t.prototype;return n.init=function(t,n,i){e.prototype.init.call(this,t,n,i||[])},n.addChild=function(e){this.children.push(e)},r(t,[{key:"typename",get:function(){return"NodeList"}},{key:"fields",get:function(){return["children"]}}]),t}(l),h=u.extend("Root"),p=c.extend("Literal"),f=c.extend("Symbol"),d=u.extend("Group"),m=u.extend("Array"),v=l.extend("Pair",{fields:["key","value"]}),g=u.extend("Dict"),y=l.extend("LookupVal",{fields:["target","val"]}),b=l.extend("If",{fields:["cond","body","else_"]}),_=b.extend("IfAsync"),w=l.extend("InlineIf",{fields:["cond","body","else_"]}),x=l.extend("For",{fields:["arr","name","body","else_"]}),k=x.extend("AsyncEach"),S=x.extend("AsyncAll"),E=l.extend("Macro",{fields:["name","args","body"]}),O=E.extend("Caller"),L=l.extend("Import",{fields:["template","target","withContext"]}),T=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.init=function(t,n,i,r,o){e.prototype.init.call(this,t,n,i,r||new u,o)},r(t,[{key:"typename",get:function(){return"FromImport"}},{key:"fields",get:function(){return["template","names","withContext"]}}]),t}(l),A=l.extend("FunCall",{fields:["name","args"]}),C=A.extend("Filter"),$=C.extend("FilterAsync",{fields:["name","args","symbol"]}),I=g.extend("KeywordArgs"),N=l.extend("Block",{fields:["name","body"]}),F=l.extend("Super",{fields:["blockName","symbol"]}),B=l.extend("TemplateRef",{fields:["template"]}).extend("Extends"),j=l.extend("Include",{fields:["template","ignoreMissing"]}),P=l.extend("Set",{fields:["targets","value"]}),M=l.extend("Switch",{fields:["expr","cases","default"]}),R=l.extend("Case",{fields:["cond","body"]}),H=u.extend("Output"),D=l.extend("Capture",{fields:["body"]}),K=p.extend("TemplateData"),V=l.extend("UnaryOp",{fields:["target"]}),U=l.extend("BinOp",{fields:["left","right"]}),G=U.extend("In"),W=U.extend("Is"),z=U.extend("Or"),q=U.extend("And"),Y=V.extend("Not"),J=U.extend("Add"),X=U.extend("Concat"),Z=U.extend("Sub"),Q=U.extend("Mul"),ee=U.extend("Div"),te=U.extend("FloorDiv"),ne=U.extend("Mod"),ie=U.extend("Pow"),re=V.extend("Neg"),oe=V.extend("Pos"),se=l.extend("Compare",{fields:["expr","ops"]}),ae=l.extend("CompareOperand",{fields:["expr","type"]}),le=l.extend("CallExtension",{init:function(e,t,n,i){this.parent(),this.extName=e.__name||e,this.prop=t,this.args=n||new u,this.contentArgs=i||[],this.autoescape=e.autoescape},fields:["extName","prop","args","contentArgs"]}),ce=le.extend("CallExtensionAsync");function ue(e,t,n){var i=e.split("\n");i.forEach((function(e,r){e&&(n&&r>0||!n)&&process.stdout.write(" ".repeat(t));var o=r===i.length-1?"":"\n";process.stdout.write(""+e+o)}))}e.exports={Node:l,Root:h,NodeList:u,Value:c,Literal:p,Symbol:f,Group:d,Array:m,Pair:v,Dict:g,Output:H,Capture:D,TemplateData:K,If:b,IfAsync:_,InlineIf:w,For:x,AsyncEach:k,AsyncAll:S,Macro:E,Caller:O,Import:L,FromImport:T,FunCall:A,Filter:C,FilterAsync:$,KeywordArgs:I,Block:N,Super:F,Extends:B,Include:j,Set:P,Switch:M,Case:R,LookupVal:y,BinOp:U,In:G,Is:W,Or:z,And:q,Not:Y,Add:J,Concat:X,Sub:Z,Mul:Q,Div:ee,FloorDiv:te,Mod:ne,Pow:ie,Neg:re,Pos:oe,Compare:se,CompareOperand:ae,CallExtension:le,CallExtensionAsync:ce,printNodes:function e(t,n){if(n=n||0,ue(t.typename+": ",n),t instanceof u)ue("\n"),t.children.forEach((function(t){e(t,n+2)}));else if(t instanceof le)ue(t.extName+"."+t.prop+"\n"),t.args&&e(t.args,n+2),t.contentArgs&&t.contentArgs.forEach((function(t){e(t,n+2)}));else{var i=[],r=null;t.iterFields((function(e,t){e instanceof l?i.push([t,e]):(r=r||{})[t]=e})),r?ue(JSON.stringify(r,null,2)+"\n",null,!0):ue("\n"),i.forEach((function(t){var i=t[0],r=t[1];ue("["+i+"] =>",n+2),e(r,n+4)}))}}}},function(e,t){},function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}var r=n(8),o=n(17),s=n(3),a=n(0).TemplateError,l=n(2).Frame,c=n(1).Obj,u={"==":"==","===":"===","!=":"!=","!==":"!==","<":"<",">":">","<=":"<=",">=":">="},h=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var o=r.prototype;return o.init=function(e,t){this.templateName=e,this.codebuf=[],this.lastId=0,this.buffer=null,this.bufferStack=[],this._scopeClosers="",this.inBlock=!1,this.throwOnUndefined=t},o.fail=function(e,t,n){throw void 0!==t&&(t+=1),void 0!==n&&(n+=1),new a(e,t,n)},o._pushBuffer=function(){var e=this._tmpid();return this.bufferStack.push(this.buffer),this.buffer=e,this._emit("var "+this.buffer+' = "";'),e},o._popBuffer=function(){this.buffer=this.bufferStack.pop()},o._emit=function(e){this.codebuf.push(e)},o._emitLine=function(e){this._emit(e+"\n")},o._emitLines=function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];n.forEach((function(t){return e._emitLine(t)}))},o._emitFuncBegin=function(e,t){this.buffer="output",this._scopeClosers="",this._emitLine("function "+t+"(env, context, frame, runtime, cb) {"),this._emitLine("var lineno = "+e.lineno+";"),this._emitLine("var colno = "+e.colno+";"),this._emitLine("var "+this.buffer+' = "";'),this._emitLine("try {")},o._emitFuncEnd=function(e){e||this._emitLine("cb(null, "+this.buffer+");"),this._closeScopeLevels(),this._emitLine("} catch (e) {"),this._emitLine("  cb(runtime.handleError(e, lineno, colno));"),this._emitLine("}"),this._emitLine("}"),this.buffer=null},o._addScopeLevel=function(){this._scopeClosers+="})"},o._closeScopeLevels=function(){this._emitLine(this._scopeClosers+";"),this._scopeClosers=""},o._withScopedSyntax=function(e){var t=this._scopeClosers;this._scopeClosers="",e.call(this),this._closeScopeLevels(),this._scopeClosers=t},o._makeCallback=function(e){var t=this._tmpid();return"function("+t+(e?","+e:"")+") {\nif("+t+") { cb("+t+"); return; }"},o._tmpid=function(){return this.lastId++,"t_"+this.lastId},o._templateName=function(){return null==this.templateName?"undefined":JSON.stringify(this.templateName)},o._compileChildren=function(e,t){var n=this;e.children.forEach((function(e){n.compile(e,t)}))},o._compileAggregate=function(e,t,n,i){var r=this;n&&this._emit(n),e.children.forEach((function(e,n){n>0&&r._emit(","),r.compile(e,t)})),i&&this._emit(i)},o._compileExpression=function(e,t){this.assertType(e,s.Literal,s.Symbol,s.Group,s.Array,s.Dict,s.FunCall,s.Caller,s.Filter,s.LookupVal,s.Compare,s.InlineIf,s.In,s.Is,s.And,s.Or,s.Not,s.Add,s.Concat,s.Sub,s.Mul,s.Div,s.FloorDiv,s.Mod,s.Pow,s.Neg,s.Pos,s.Compare,s.NodeList),this.compile(e,t)},o.assertType=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.some((function(t){return e instanceof t}))||this.fail("assertType: invalid type: "+e.typename,e.lineno,e.colno)},o.compileCallExtension=function(e,t,n){var i=this,r=e.args,o=e.contentArgs,a="boolean"!=typeof e.autoescape||e.autoescape;if(n||this._emit(this.buffer+" += runtime.suppressValue("),this._emit('env.getExtension("'+e.extName+'")["'+e.prop+'"]('),this._emit("context"),(r||o)&&this._emit(","),r&&(r instanceof s.NodeList||this.fail("compileCallExtension: arguments must be a NodeList, use `parser.parseSignature`"),r.children.forEach((function(e,n){i._compileExpression(e,t),(n!==r.children.length-1||o.length)&&i._emit(",")}))),o.length&&o.forEach((function(e,n){if(n>0&&i._emit(","),e){i._emitLine("function(cb) {"),i._emitLine("if(!cb) { cb = function(err) { if(err) { throw err; }}}");var r=i._pushBuffer();i._withScopedSyntax((function(){i.compile(e,t),i._emitLine("cb(null, "+r+");")})),i._popBuffer(),i._emitLine("return "+r+";"),i._emitLine("}")}else i._emit("null")})),n){var l=this._tmpid();this._emitLine(", "+this._makeCallback(l)),this._emitLine(this.buffer+" += runtime.suppressValue("+l+", "+a+" && env.opts.autoescape);"),this._addScopeLevel()}else this._emit(")"),this._emit(", "+a+" && env.opts.autoescape);\n")},o.compileCallExtensionAsync=function(e,t){this.compileCallExtension(e,t,!0)},o.compileNodeList=function(e,t){this._compileChildren(e,t)},o.compileLiteral=function(e){if("string"==typeof e.value){var t=e.value.replace(/\\/g,"\\\\");t=(t=(t=(t=(t=t.replace(/"/g,'\\"')).replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace(/\t/g,"\\t")).replace(/\u2028/g,"\\u2028"),this._emit('"'+t+'"')}else null===e.value?this._emit("null"):this._emit(e.value.toString())},o.compileSymbol=function(e,t){var n=e.value,i=t.lookup(n);i?this._emit(i):this._emit('runtime.contextOrFrameLookup(context, frame, "'+n+'")')},o.compileGroup=function(e,t){this._compileAggregate(e,t,"(",")")},o.compileArray=function(e,t){this._compileAggregate(e,t,"[","]")},o.compileDict=function(e,t){this._compileAggregate(e,t,"{","}")},o.compilePair=function(e,t){var n=e.key,i=e.value;n instanceof s.Symbol?n=new s.Literal(n.lineno,n.colno,n.value):n instanceof s.Literal&&"string"==typeof n.value||this.fail("compilePair: Dict keys must be strings or names",n.lineno,n.colno),this.compile(n,t),this._emit(": "),this._compileExpression(i,t)},o.compileInlineIf=function(e,t){this._emit("("),this.compile(e.cond,t),this._emit("?"),this.compile(e.body,t),this._emit(":"),null!==e.else_?this.compile(e.else_,t):this._emit('""'),this._emit(")")},o.compileIn=function(e,t){this._emit("runtime.inOperator("),this.compile(e.left,t),this._emit(","),this.compile(e.right,t),this._emit(")")},o.compileIs=function(e,t){var n=e.right.name?e.right.name.value:e.right.value;this._emit('env.getTest("'+n+'").call(context, '),this.compile(e.left,t),e.right.args&&(this._emit(","),this.compile(e.right.args,t)),this._emit(") === true")},o._binOpEmitter=function(e,t,n){this.compile(e.left,t),this._emit(n),this.compile(e.right,t)},o.compileOr=function(e,t){return this._binOpEmitter(e,t," || ")},o.compileAnd=function(e,t){return this._binOpEmitter(e,t," && ")},o.compileAdd=function(e,t){return this._binOpEmitter(e,t," + ")},o.compileConcat=function(e,t){return this._binOpEmitter(e,t,' + "" + ')},o.compileSub=function(e,t){return this._binOpEmitter(e,t," - ")},o.compileMul=function(e,t){return this._binOpEmitter(e,t," * ")},o.compileDiv=function(e,t){return this._binOpEmitter(e,t," / ")},o.compileMod=function(e,t){return this._binOpEmitter(e,t," % ")},o.compileNot=function(e,t){this._emit("!"),this.compile(e.target,t)},o.compileFloorDiv=function(e,t){this._emit("Math.floor("),this.compile(e.left,t),this._emit(" / "),this.compile(e.right,t),this._emit(")")},o.compilePow=function(e,t){this._emit("Math.pow("),this.compile(e.left,t),this._emit(", "),this.compile(e.right,t),this._emit(")")},o.compileNeg=function(e,t){this._emit("-"),this.compile(e.target,t)},o.compilePos=function(e,t){this._emit("+"),this.compile(e.target,t)},o.compileCompare=function(e,t){var n=this;this.compile(e.expr,t),e.ops.forEach((function(e){n._emit(" "+u[e.type]+" "),n.compile(e.expr,t)}))},o.compileLookupVal=function(e,t){this._emit("runtime.memberLookup(("),this._compileExpression(e.target,t),this._emit("),"),this._compileExpression(e.val,t),this._emit(")")},o._getNodeName=function(e){switch(e.typename){case"Symbol":return e.value;case"FunCall":return"the return value of ("+this._getNodeName(e.name)+")";case"LookupVal":return this._getNodeName(e.target)+'["'+this._getNodeName(e.val)+'"]';case"Literal":return e.value.toString();default:return"--expression--"}},o.compileFunCall=function(e,t){this._emit("(lineno = "+e.lineno+", colno = "+e.colno+", "),this._emit("runtime.callWrap("),this._compileExpression(e.name,t),this._emit(', "'+this._getNodeName(e.name).replace(/"/g,'\\"')+'", context, '),this._compileAggregate(e.args,t,"[","])"),this._emit(")")},o.compileFilter=function(e,t){var n=e.name;this.assertType(n,s.Symbol),this._emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this._emit(")")},o.compileFilterAsync=function(e,t){var n=e.name,i=e.symbol.value;this.assertType(n,s.Symbol),t.set(i,i),this._emit('env.getFilter("'+n.value+'").call(context, '),this._compileAggregate(e.args,t),this._emitLine(", "+this._makeCallback(i)),this._addScopeLevel()},o.compileKeywordArgs=function(e,t){this._emit("runtime.makeKeywordArgs("),this.compileDict(e,t),this._emit(")")},o.compileSet=function(e,t){var n=this,i=[];e.targets.forEach((function(e){var r=e.value,o=t.lookup(r);null==o&&(o=n._tmpid(),n._emitLine("var "+o+";")),i.push(o)})),e.value?(this._emit(i.join(" = ")+" = "),this._compileExpression(e.value,t),this._emitLine(";")):(this._emit(i.join(" = ")+" = "),this.compile(e.body,t),this._emitLine(";")),e.targets.forEach((function(e,t){var r=i[t],o=e.value;n._emitLine('frame.set("'+o+'", '+r+", true);"),n._emitLine("if(frame.topLevel) {"),n._emitLine('context.setVariable("'+o+'", '+r+");"),n._emitLine("}"),"_"!==o.charAt(0)&&(n._emitLine("if(frame.topLevel) {"),n._emitLine('context.addExport("'+o+'", '+r+");"),n._emitLine("}"))}))},o.compileSwitch=function(e,t){var n=this;this._emit("switch ("),this.compile(e.expr,t),this._emit(") {"),e.cases.forEach((function(e,i){n._emit("case "),n.compile(e.cond,t),n._emit(": "),n.compile(e.body,t),e.body.children.length&&n._emitLine("break;")})),e.default&&(this._emit("default:"),this.compile(e.default,t)),this._emit("}")},o.compileIf=function(e,t,n){var i=this;this._emit("if("),this._compileExpression(e.cond,t),this._emitLine(") {"),this._withScopedSyntax((function(){i.compile(e.body,t),n&&i._emit("cb()")})),e.else_?(this._emitLine("}\nelse {"),this._withScopedSyntax((function(){i.compile(e.else_,t),n&&i._emit("cb()")}))):n&&(this._emitLine("}\nelse {"),this._emit("cb()")),this._emitLine("}")},o.compileIfAsync=function(e,t){this._emit("(function(cb) {"),this.compileIf(e,t,!0),this._emit("})("+this._makeCallback()),this._addScopeLevel()},o._emitLoopBindings=function(e,t,n,i){var r=this;[{name:"index",val:n+" + 1"},{name:"index0",val:n},{name:"revindex",val:i+" - "+n},{name:"revindex0",val:i+" - "+n+" - 1"},{name:"first",val:n+" === 0"},{name:"last",val:n+" === "+i+" - 1"},{name:"length",val:i}].forEach((function(e){r._emitLine('frame.set("loop.'+e.name+'", '+e.val+");")}))},o.compileFor=function(e,t){var n=this,i=this._tmpid(),r=this._tmpid(),o=this._tmpid();if(t=t.push(),this._emitLine("frame = frame.push();"),this._emit("var "+o+" = "),this._compileExpression(e.arr,t),this._emitLine(";"),this._emit("if("+o+") {"),this._emitLine(o+" = runtime.fromIterator("+o+");"),e.name instanceof s.Array){this._emitLine("var "+i+";"),this._emitLine("if(runtime.isArray("+o+")) {"),this._emitLine("var "+r+" = "+o+".length;"),this._emitLine("for("+i+"=0; "+i+" < "+o+".length; "+i+"++) {"),e.name.children.forEach((function(r,s){var a=n._tmpid();n._emitLine("var "+a+" = "+o+"["+i+"]["+s+"];"),n._emitLine('frame.set("'+r+'", '+o+"["+i+"]["+s+"]);"),t.set(e.name.children[s].value,a)})),this._emitLoopBindings(e,o,i,r),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("}"),this._emitLine("} else {");var a=e.name.children,l=a[0],c=a[1],u=this._tmpid(),h=this._tmpid();t.set(l.value,u),t.set(c.value,h),this._emitLine(i+" = -1;"),this._emitLine("var "+r+" = runtime.keys("+o+").length;"),this._emitLine("for(var "+u+" in "+o+") {"),this._emitLine(i+"++;"),this._emitLine("var "+h+" = "+o+"["+u+"];"),this._emitLine('frame.set("'+l.value+'", '+u+");"),this._emitLine('frame.set("'+c.value+'", '+h+");"),this._emitLoopBindings(e,o,i,r),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("}"),this._emitLine("}")}else{var p=this._tmpid();t.set(e.name.value,p),this._emitLine("var "+r+" = "+o+".length;"),this._emitLine("for(var "+i+"=0; "+i+" < "+o+".length; "+i+"++) {"),this._emitLine("var "+p+" = "+o+"["+i+"];"),this._emitLine('frame.set("'+e.name.value+'", '+p+");"),this._emitLoopBindings(e,o,i,r),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("}")}this._emitLine("}"),e.else_&&(this._emitLine("if (!"+r+") {"),this.compile(e.else_,t),this._emitLine("}")),this._emitLine("frame = frame.pop();")},o._compileAsyncLoop=function(e,t,n){var i=this,r=this._tmpid(),o=this._tmpid(),a=this._tmpid(),l=n?"asyncAll":"asyncEach";if(t=t.push(),this._emitLine("frame = frame.push();"),this._emit("var "+a+" = runtime.fromIterator("),this._compileExpression(e.arr,t),this._emitLine(");"),e.name instanceof s.Array){var c=e.name.children.length;this._emit("runtime."+l+"("+a+", "+c+", function("),e.name.children.forEach((function(e){i._emit(e.value+",")})),this._emit(r+","+o+",next) {"),e.name.children.forEach((function(e){var n=e.value;t.set(n,n),i._emitLine('frame.set("'+n+'", '+n+");")}))}else{var u=e.name.value;this._emitLine("runtime."+l+"("+a+", 1, function("+u+", "+r+", "+o+",next) {"),this._emitLine('frame.set("'+u+'", '+u+");"),t.set(u,u)}this._emitLoopBindings(e,a,r,o),this._withScopedSyntax((function(){var o;n&&(o=i._pushBuffer()),i.compile(e.body,t),i._emitLine("next("+r+(o?","+o:"")+");"),n&&i._popBuffer()}));var h=this._tmpid();this._emitLine("}, "+this._makeCallback(h)),this._addScopeLevel(),n&&this._emitLine(this.buffer+" += "+h+";"),e.else_&&(this._emitLine("if (!"+a+".length) {"),this.compile(e.else_,t),this._emitLine("}")),this._emitLine("frame = frame.pop();")},o.compileAsyncEach=function(e,t){this._compileAsyncLoop(e,t)},o.compileAsyncAll=function(e,t){this._compileAsyncLoop(e,t,!0)},o._compileMacro=function(e,t){var n=this,i=[],r=null,o="macro_"+this._tmpid(),a=void 0!==t;e.args.children.forEach((function(t,o){o===e.args.children.length-1&&t instanceof s.Dict?r=t:(n.assertType(t,s.Symbol),i.push(t))}));var c,u=[].concat(i.map((function(e){return"l_"+e.value})),["kwargs"]),h=i.map((function(e){return'"'+e.value+'"'})),p=(r&&r.children||[]).map((function(e){return'"'+e.key.value+'"'}));c=a?t.push(!0):new l,this._emitLines("var "+o+" = runtime.makeMacro(","["+h.join(", ")+"], ","["+p.join(", ")+"], ","function ("+u.join(", ")+") {","var callerFrame = frame;","frame = "+(a?"frame.push(true);":"new runtime.Frame();"),"kwargs = kwargs || {};",'if (Object.prototype.hasOwnProperty.call(kwargs, "caller")) {','frame.set("caller", kwargs.caller); }'),i.forEach((function(e){n._emitLine('frame.set("'+e.value+'", l_'+e.value+");"),c.set(e.value,"l_"+e.value)})),r&&r.children.forEach((function(e){var t=e.key.value;n._emit('frame.set("'+t+'", '),n._emit('Object.prototype.hasOwnProperty.call(kwargs, "'+t+'")'),n._emit(' ? kwargs["'+t+'"] : '),n._compileExpression(e.value,c),n._emit(");")}));var f=this._pushBuffer();return this._withScopedSyntax((function(){n.compile(e.body,c)})),this._emitLine("frame = "+(a?"frame.pop();":"callerFrame;")),this._emitLine("return new runtime.SafeString("+f+");"),this._emitLine("});"),this._popBuffer(),o},o.compileMacro=function(e,t){var n=this._compileMacro(e),i=e.name.value;t.set(i,n),t.parent?this._emitLine('frame.set("'+i+'", '+n+");"):("_"!==e.name.value.charAt(0)&&this._emitLine('context.addExport("'+i+'");'),this._emitLine('context.setVariable("'+i+'", '+n+");"))},o.compileCaller=function(e,t){this._emit("(function (){");var n=this._compileMacro(e,t);this._emit("return "+n+";})()")},o._compileGetTemplate=function(e,t,n,i){var r=this._tmpid(),o=this._templateName(),s=this._makeCallback(r),a=n?"true":"false",l=i?"true":"false";return this._emit("env.getTemplate("),this._compileExpression(e.template,t),this._emitLine(", "+a+", "+o+", "+l+", "+s),r},o.compileImport=function(e,t){var n=e.target.value,i=this._compileGetTemplate(e,t,!1,!1);this._addScopeLevel(),this._emitLine(i+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(i)),this._addScopeLevel(),t.set(n,i),t.parent?this._emitLine('frame.set("'+n+'", '+i+");"):this._emitLine('context.setVariable("'+n+'", '+i+");")},o.compileFromImport=function(e,t){var n=this,i=this._compileGetTemplate(e,t,!1,!1);this._addScopeLevel(),this._emitLine(i+".getExported("+(e.withContext?"context.getVariables(), frame, ":"")+this._makeCallback(i)),this._addScopeLevel(),e.names.children.forEach((function(e){var r,o,a=n._tmpid();e instanceof s.Pair?(r=e.key.value,o=e.value.value):o=r=e.value,n._emitLine("if(Object.prototype.hasOwnProperty.call("+i+', "'+r+'")) {'),n._emitLine("var "+a+" = "+i+"."+r+";"),n._emitLine("} else {"),n._emitLine("cb(new Error(\"cannot import '"+r+"'\")); return;"),n._emitLine("}"),t.set(o,a),t.parent?n._emitLine('frame.set("'+o+'", '+a+");"):n._emitLine('context.setVariable("'+o+'", '+a+");")}))},o.compileBlock=function(e){var t=this._tmpid();this.inBlock||this._emit('(parentTemplate ? function(e, c, f, r, cb) { cb(""); } : '),this._emit('context.getBlock("'+e.name.value+'")'),this.inBlock||this._emit(")"),this._emitLine("(env, context, frame, runtime, "+this._makeCallback(t)),this._emitLine(this.buffer+" += "+t+";"),this._addScopeLevel()},o.compileSuper=function(e,t){var n=e.blockName.value,i=e.symbol.value,r=this._makeCallback(i);this._emitLine('context.getSuper(env, "'+n+'", b_'+n+", frame, runtime, "+r),this._emitLine(i+" = runtime.markSafe("+i+");"),this._addScopeLevel(),t.set(i,i)},o.compileExtends=function(e,t){var n=this._tmpid(),i=this._compileGetTemplate(e,t,!0,!1);this._emitLine("parentTemplate = "+i),this._emitLine("for(var "+n+" in parentTemplate.blocks) {"),this._emitLine("context.addBlock("+n+", parentTemplate.blocks["+n+"]);"),this._emitLine("}"),this._addScopeLevel()},o.compileInclude=function(e,t){this._emitLine("var tasks = [];"),this._emitLine("tasks.push("),this._emitLine("function(callback) {");var n=this._compileGetTemplate(e,t,!1,e.ignoreMissing);this._emitLine("callback(null,"+n+");});"),this._emitLine("});");var i=this._tmpid();this._emitLine("tasks.push("),this._emitLine("function(template, callback){"),this._emitLine("template.render(context.getVariables(), frame, "+this._makeCallback(i)),this._emitLine("callback(null,"+i+");});"),this._emitLine("});"),this._emitLine("tasks.push("),this._emitLine("function(result, callback){"),this._emitLine(this.buffer+" += result;"),this._emitLine("callback(null);"),this._emitLine("});"),this._emitLine("env.waterfall(tasks, function(){"),this._addScopeLevel()},o.compileTemplateData=function(e,t){this.compileLiteral(e,t)},o.compileCapture=function(e,t){var n=this,i=this.buffer;this.buffer="output",this._emitLine("(function() {"),this._emitLine('var output = "";'),this._withScopedSyntax((function(){n.compile(e.body,t)})),this._emitLine("return output;"),this._emitLine("})()"),this.buffer=i},o.compileOutput=function(e,t){var n=this;e.children.forEach((function(i){i instanceof s.TemplateData?i.value&&(n._emit(n.buffer+" += "),n.compileLiteral(i,t),n._emitLine(";")):(n._emit(n.buffer+" += runtime.suppressValue("),n.throwOnUndefined&&n._emit("runtime.ensureDefined("),n.compile(i,t),n.throwOnUndefined&&n._emit(","+e.lineno+","+e.colno+")"),n._emit(", env.opts.autoescape);\n"))}))},o.compileRoot=function(e,t){var n=this;t&&this.fail("compileRoot: root node can't have frame"),t=new l,this._emitFuncBegin(e,"root"),this._emitLine("var parentTemplate = null;"),this._compileChildren(e,t),this._emitLine("if(parentTemplate) {"),this._emitLine("parentTemplate.rootRenderFunc(env, context, frame, runtime, cb);"),this._emitLine("} else {"),this._emitLine("cb(null, "+this.buffer+");"),this._emitLine("}"),this._emitFuncEnd(!0),this.inBlock=!0;var i=[],r=e.findAll(s.Block);r.forEach((function(e,t){var r=e.name.value;if(-1!==i.indexOf(r))throw new Error('Block "'+r+'" defined more than once.');i.push(r),n._emitFuncBegin(e,"b_"+r);var o=new l;n._emitLine("var frame = frame.push(true);"),n.compile(e.body,o),n._emitFuncEnd()})),this._emitLine("return {"),r.forEach((function(e,t){var i="b_"+e.name.value;n._emitLine(i+": "+i+",")})),this._emitLine("root: root\n};")},o.compile=function(e,t){var n=this["compile"+e.typename];n?n.call(this,e,t):this.fail("compile: Cannot compile node: "+e.typename,e.lineno,e.colno)},o.getCode=function(){return this.codebuf.join("")},r}(c);e.exports={compile:function(e,t,n,i,s){void 0===s&&(s={});var a=new h(i,s.throwOnUndefined),l=(n||[]).map((function(e){return e.preprocess})).filter((function(e){return!!e})).reduce((function(e,t){return t(e)}),e);return a.compile(o.transform(r.parse(l,n,s),t,i)),a.getCode()},Compiler:h}},function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}var r=n(4),o=n(1).EmitterObj;e.exports=function(e){var t,n;function o(){return e.apply(this,arguments)||this}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var s=o.prototype;return s.resolve=function(e,t){return r.resolve(r.dirname(e),t)},s.isRelative=function(e){return 0===e.indexOf("./")||0===e.indexOf("../")},o}(o)},function(e,t,n){"use strict";function i(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)}function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}var o=n(12),s=n(15),a=n(0),l=n(5),c=n(18),u=n(10),h=u.FileSystemLoader,p=u.WebLoader,f=u.PrecompiledLoader,d=n(20),m=n(21),v=n(1),g=v.Obj,y=v.EmitterObj,b=n(2),_=b.handleError,w=b.Frame,x=n(22);function k(e,t,n){o((function(){e(t,n)}))}var S={type:"code",obj:{root:function(e,t,n,i,r){try{r(null,"")}catch(e){r(_(e,null,null))}}}},E=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.init=function(e,t){var n=this;t=this.opts=t||{},this.opts.dev=!!t.dev,this.opts.autoescape=null==t.autoescape||t.autoescape,this.opts.throwOnUndefined=!!t.throwOnUndefined,this.opts.trimBlocks=!!t.trimBlocks,this.opts.lstripBlocks=!!t.lstripBlocks,this.loaders=[],e?this.loaders=a.isArray(e)?e:[e]:h?this.loaders=[new h("views")]:p&&(this.loaders=[new p("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new f(window.nunjucksPrecompiled)),this._initLoaders(),this.globals=m(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],a._entries(c).forEach((function(e){var t=e[0],i=e[1];return n.addFilter(t,i)})),a._entries(d).forEach((function(e){var t=e[0],i=e[1];return n.addTest(t,i)}))},n._initLoaders=function(){var e=this;this.loaders.forEach((function(t){t.cache={},"function"==typeof t.on&&(t.on("update",(function(n,i){t.cache[n]=null,e.emit("update",n,i,t)})),t.on("load",(function(n,i){e.emit("load",n,i,t)})))}))},n.invalidateCache=function(){this.loaders.forEach((function(e){e.cache={}}))},n.addExtension=function(e,t){return t.__name=e,this.extensions[e]=t,this.extensionsList.push(t),this},n.removeExtension=function(e){var t=this.getExtension(e);t&&(this.extensionsList=a.without(this.extensionsList,t),delete this.extensions[e])},n.getExtension=function(e){return this.extensions[e]},n.hasExtension=function(e){return!!this.extensions[e]},n.addGlobal=function(e,t){return this.globals[e]=t,this},n.getGlobal=function(e){if(void 0===this.globals[e])throw new Error("global not found: "+e);return this.globals[e]},n.addFilter=function(e,t,n){var i=t;return n&&this.asyncFilters.push(e),this.filters[e]=i,this},n.getFilter=function(e){if(!this.filters[e])throw new Error("filter not found: "+e);return this.filters[e]},n.addTest=function(e,t){return this.tests[e]=t,this},n.getTest=function(e){if(!this.tests[e])throw new Error("test not found: "+e);return this.tests[e]},n.resolveTemplate=function(e,t,n){return e.isRelative&&t&&e.isRelative(n)&&e.resolve?e.resolve(t,n):n},n.getTemplate=function(e,t,n,i,r){var o,s=this,l=this,c=null;if(e&&e.raw&&(e=e.raw),a.isFunction(n)&&(r=n,n=null,t=t||!1),a.isFunction(t)&&(r=t,t=!1),e instanceof L)c=e;else{if("string"!=typeof e)throw new Error("template names must be a string: "+e);for(var u=0;u<this.loaders.length;u++){var h=this.loaders[u];if(c=h.cache[this.resolveTemplate(h,n,e)])break}}return c?(t&&c.compile(),r?void r(null,c):c):(a.asyncIter(this.loaders,(function(t,i,r,o){function s(e,n){e?o(e):n?(n.loader=t,o(null,n)):r()}e=l.resolveTemplate(t,n,e),t.async?t.getSource(e,s):s(null,t.getSource(e))}),(function(n,a){if(a||n||i||(n=new Error("template not found: "+e)),n){if(r)return void r(n);throw n}var l;a?(l=new L(a.src,s,a.path,t),a.noCache||(a.loader.cache[e]=l)):l=new L(S,s,"",t),r?r(null,l):o=l})),o)},n.express=function(e){return x(this,e)},n.render=function(e,t,n){a.isFunction(t)&&(n=t,t=null);var i=null;return this.getTemplate(e,(function(e,r){if(e&&n)k(n,e);else{if(e)throw e;i=r.render(t,n)}})),i},n.renderString=function(e,t,n,i){return a.isFunction(n)&&(i=n,n={}),new L(e,this,(n=n||{}).path).render(t,i)},n.waterfall=function(e,t,n){return s(e,t,n)},t}(y),O=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.init=function(e,t,n){var i=this;this.env=n||new E,this.ctx=a.extend({},e),this.blocks={},this.exported=[],a.keys(t).forEach((function(e){i.addBlock(e,t[e])}))},n.lookup=function(e){return e in this.env.globals&&!(e in this.ctx)?this.env.globals[e]:this.ctx[e]},n.setVariable=function(e,t){this.ctx[e]=t},n.getVariables=function(){return this.ctx},n.addBlock=function(e,t){return this.blocks[e]=this.blocks[e]||[],this.blocks[e].push(t),this},n.getBlock=function(e){if(!this.blocks[e])throw new Error('unknown block "'+e+'"');return this.blocks[e][0]},n.getSuper=function(e,t,n,i,r,o){var s=a.indexOf(this.blocks[t]||[],n),l=this.blocks[t][s+1];if(-1===s||!l)throw new Error('no super block available for "'+t+'"');l(e,this,i,r,o)},n.addExport=function(e){this.exported.push(e)},n.getExported=function(){var e=this,t={};return this.exported.forEach((function(n){t[n]=e.ctx[n]})),t},t}(g),L=function(e){function t(){return e.apply(this,arguments)||this}i(t,e);var n=t.prototype;return n.init=function(e,t,n,i){if(this.env=t||new E,a.isObject(e))switch(e.type){case"code":this.tmplProps=e.obj;break;case"string":this.tmplStr=e.obj;break;default:throw new Error("Unexpected template object type "+e.type+"; expected 'code', or 'string'")}else{if(!a.isString(e))throw new Error("src must be a string or an object describing the source");this.tmplStr=e}if(this.path=n,i)try{this._compile()}catch(e){throw a._prettifyError(this.path,this.env.opts.dev,e)}else this.compiled=!1},n.render=function(e,t,n){var i=this;"function"==typeof e?(n=e,e={}):"function"==typeof t&&(n=t,t=null);var r=!t;try{this.compile()}catch(e){var o=a._prettifyError(this.path,this.env.opts.dev,e);if(n)return k(n,o);throw o}var s=new O(e||{},this.blocks,this.env),l=t?t.push(!0):new w;l.topLevel=!0;var c=null,u=!1;return this.rootRenderFunc(this.env,s,l,b,(function(e,t){if(!u||!n||void 0===t)if(e&&(e=a._prettifyError(i.path,i.env.opts.dev,e),u=!0),n)r?k(n,e,t):n(e,t);else{if(e)throw e;c=t}})),c},n.getExported=function(e,t,n){"function"==typeof e&&(n=e,e={}),"function"==typeof t&&(n=t,t=null);try{this.compile()}catch(e){if(n)return n(e);throw e}var i=t?t.push():new w;i.topLevel=!0;var r=new O(e||{},this.blocks,this.env);this.rootRenderFunc(this.env,r,i,b,(function(e){e?n(e,null):n(null,r.getExported())}))},n.compile=function(){this.compiled||this._compile()},n._compile=function(){var e;if(this.tmplProps)e=this.tmplProps;else{var t=l.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);e=new Function(t)()}this.blocks=this._getBlocks(e),this.rootRenderFunc=e.root,this.compiled=!0},n._getBlocks=function(e){var t={};return a.keys(e).forEach((function(n){"b_"===n.slice(0,2)&&(t[n.slice(2)]=e[n])})),t},t}(g);e.exports={Environment:E,Template:L}},function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}var r=n(9),o=n(3),s=n(1).Obj,a=n(0),l=function(e){var t,n;function s(){return e.apply(this,arguments)||this}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var l=s.prototype;return l.init=function(e){this.tokens=e,this.peeked=null,this.breakOnBlocks=null,this.dropLeadingWhitespace=!1,this.extensions=[]},l.nextToken=function(e){var t;if(this.peeked){if(e||this.peeked.type!==r.TOKEN_WHITESPACE)return t=this.peeked,this.peeked=null,t;this.peeked=null}if(t=this.tokens.nextToken(),!e)for(;t&&t.type===r.TOKEN_WHITESPACE;)t=this.tokens.nextToken();return t},l.peekToken=function(){return this.peeked=this.peeked||this.nextToken(),this.peeked},l.pushToken=function(e){if(this.peeked)throw new Error("pushToken: can only push one token on between reads");this.peeked=e},l.error=function(e,t,n){if(void 0===t||void 0===n){var i=this.peekToken()||{};t=i.lineno,n=i.colno}return void 0!==t&&(t+=1),void 0!==n&&(n+=1),new a.TemplateError(e,t,n)},l.fail=function(e,t,n){throw this.error(e,t,n)},l.skip=function(e){var t=this.nextToken();return!(!t||t.type!==e)||(this.pushToken(t),!1)},l.expect=function(e){var t=this.nextToken();return t.type!==e&&this.fail("expected "+e+", got "+t.type,t.lineno,t.colno),t},l.skipValue=function(e,t){var n=this.nextToken();return!(!n||n.type!==e||n.value!==t)||(this.pushToken(n),!1)},l.skipSymbol=function(e){return this.skipValue(r.TOKEN_SYMBOL,e)},l.advanceAfterBlockEnd=function(e){var t;return e||((t=this.peekToken())||this.fail("unexpected end of file"),t.type!==r.TOKEN_SYMBOL&&this.fail("advanceAfterBlockEnd: expected symbol token or explicit name to be passed"),e=this.nextToken().value),(t=this.nextToken())&&t.type===r.TOKEN_BLOCK_END?"-"===t.value.charAt(0)&&(this.dropLeadingWhitespace=!0):this.fail("expected block end in "+e+" statement"),t},l.advanceAfterVariableEnd=function(){var e=this.nextToken();e&&e.type===r.TOKEN_VARIABLE_END?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.VARIABLE_END.length-1):(this.pushToken(e),this.fail("expected variable end"))},l.parseFor=function(){var e,t,n=this.peekToken();if(this.skipSymbol("for")?(e=new o.For(n.lineno,n.colno),t="endfor"):this.skipSymbol("asyncEach")?(e=new o.AsyncEach(n.lineno,n.colno),t="endeach"):this.skipSymbol("asyncAll")?(e=new o.AsyncAll(n.lineno,n.colno),t="endall"):this.fail("parseFor: expected for{Async}",n.lineno,n.colno),e.name=this.parsePrimary(),e.name instanceof o.Symbol||this.fail("parseFor: variable name expected for loop"),this.peekToken().type===r.TOKEN_COMMA){var i=e.name;for(e.name=new o.Array(i.lineno,i.colno),e.name.addChild(i);this.skip(r.TOKEN_COMMA);){var s=this.parsePrimary();e.name.addChild(s)}}return this.skipSymbol("in")||this.fail('parseFor: expected "in" keyword for loop',n.lineno,n.colno),e.arr=this.parseExpression(),this.advanceAfterBlockEnd(n.value),e.body=this.parseUntilBlocks(t,"else"),this.skipSymbol("else")&&(this.advanceAfterBlockEnd("else"),e.else_=this.parseUntilBlocks(t)),this.advanceAfterBlockEnd(),e},l.parseMacro=function(){var e=this.peekToken();this.skipSymbol("macro")||this.fail("expected macro");var t=this.parsePrimary(!0),n=this.parseSignature(),i=new o.Macro(e.lineno,e.colno,t,n);return this.advanceAfterBlockEnd(e.value),i.body=this.parseUntilBlocks("endmacro"),this.advanceAfterBlockEnd(),i},l.parseCall=function(){var e=this.peekToken();this.skipSymbol("call")||this.fail("expected call");var t=this.parseSignature(!0)||new o.NodeList,n=this.parsePrimary();this.advanceAfterBlockEnd(e.value);var i=this.parseUntilBlocks("endcall");this.advanceAfterBlockEnd();var r=new o.Symbol(e.lineno,e.colno,"caller"),s=new o.Caller(e.lineno,e.colno,r,t,i),a=n.args.children;return a[a.length-1]instanceof o.KeywordArgs||a.push(new o.KeywordArgs),a[a.length-1].addChild(new o.Pair(e.lineno,e.colno,r,s)),new o.Output(e.lineno,e.colno,[n])},l.parseWithContext=function(){var e=this.peekToken(),t=null;return this.skipSymbol("with")?t=!0:this.skipSymbol("without")&&(t=!1),null!==t&&(this.skipSymbol("context")||this.fail("parseFrom: expected context after with/without",e.lineno,e.colno)),t},l.parseImport=function(){var e=this.peekToken();this.skipSymbol("import")||this.fail("parseImport: expected import",e.lineno,e.colno);var t=this.parseExpression();this.skipSymbol("as")||this.fail('parseImport: expected "as" keyword',e.lineno,e.colno);var n=this.parseExpression(),i=this.parseWithContext(),r=new o.Import(e.lineno,e.colno,t,n,i);return this.advanceAfterBlockEnd(e.value),r},l.parseFrom=function(){var e=this.peekToken();this.skipSymbol("from")||this.fail("parseFrom: expected from");var t=this.parseExpression();this.skipSymbol("import")||this.fail("parseFrom: expected import",e.lineno,e.colno);for(var n,i=new o.NodeList;;){var s=this.peekToken();if(s.type===r.TOKEN_BLOCK_END){i.children.length||this.fail("parseFrom: Expected at least one import name",e.lineno,e.colno),"-"===s.value.charAt(0)&&(this.dropLeadingWhitespace=!0),this.nextToken();break}i.children.length>0&&!this.skip(r.TOKEN_COMMA)&&this.fail("parseFrom: expected comma",e.lineno,e.colno);var a=this.parsePrimary();if("_"===a.value.charAt(0)&&this.fail("parseFrom: names starting with an underscore cannot be imported",a.lineno,a.colno),this.skipSymbol("as")){var l=this.parsePrimary();i.addChild(new o.Pair(a.lineno,a.colno,a,l))}else i.addChild(a);n=this.parseWithContext()}return new o.FromImport(e.lineno,e.colno,t,i,n)},l.parseBlock=function(){var e=this.peekToken();this.skipSymbol("block")||this.fail("parseBlock: expected block",e.lineno,e.colno);var t=new o.Block(e.lineno,e.colno);t.name=this.parsePrimary(),t.name instanceof o.Symbol||this.fail("parseBlock: variable name expected",e.lineno,e.colno),this.advanceAfterBlockEnd(e.value),t.body=this.parseUntilBlocks("endblock"),this.skipSymbol("endblock"),this.skipSymbol(t.name.value);var n=this.peekToken();return n||this.fail("parseBlock: expected endblock, got end of file"),this.advanceAfterBlockEnd(n.value),t},l.parseExtends=function(){var e=this.peekToken();this.skipSymbol("extends")||this.fail("parseTemplateRef: expected extends");var t=new o.Extends(e.lineno,e.colno);return t.template=this.parseExpression(),this.advanceAfterBlockEnd(e.value),t},l.parseInclude=function(){var e=this.peekToken();this.skipSymbol("include")||this.fail("parseInclude: expected include");var t=new o.Include(e.lineno,e.colno);return t.template=this.parseExpression(),this.skipSymbol("ignore")&&this.skipSymbol("missing")&&(t.ignoreMissing=!0),this.advanceAfterBlockEnd(e.value),t},l.parseIf=function(){var e,t=this.peekToken();this.skipSymbol("if")||this.skipSymbol("elif")||this.skipSymbol("elseif")?e=new o.If(t.lineno,t.colno):this.skipSymbol("ifAsync")?e=new o.IfAsync(t.lineno,t.colno):this.fail("parseIf: expected if, elif, or elseif",t.lineno,t.colno),e.cond=this.parseExpression(),this.advanceAfterBlockEnd(t.value),e.body=this.parseUntilBlocks("elif","elseif","else","endif");var n=this.peekToken();switch(n&&n.value){case"elseif":case"elif":e.else_=this.parseIf();break;case"else":this.advanceAfterBlockEnd(),e.else_=this.parseUntilBlocks("endif"),this.advanceAfterBlockEnd();break;case"endif":e.else_=null,this.advanceAfterBlockEnd();break;default:this.fail("parseIf: expected elif, else, or endif, got end of file")}return e},l.parseSet=function(){var e=this.peekToken();this.skipSymbol("set")||this.fail("parseSet: expected set",e.lineno,e.colno);for(var t,n=new o.Set(e.lineno,e.colno,[]);(t=this.parsePrimary())&&(n.targets.push(t),this.skip(r.TOKEN_COMMA)););return this.skipValue(r.TOKEN_OPERATOR,"=")?(n.value=this.parseExpression(),this.advanceAfterBlockEnd(e.value)):this.skip(r.TOKEN_BLOCK_END)?(n.body=new o.Capture(e.lineno,e.colno,this.parseUntilBlocks("endset")),n.value=null,this.advanceAfterBlockEnd()):this.fail("parseSet: expected = or block end in set tag",e.lineno,e.colno),n},l.parseSwitch=function(){var e="switch",t="endswitch",n="case",i="default",r=this.peekToken();this.skipSymbol(e)||this.skipSymbol(n)||this.skipSymbol(i)||this.fail('parseSwitch: expected "switch," "case" or "default"',r.lineno,r.colno);var s=this.parseExpression();this.advanceAfterBlockEnd(e),this.parseUntilBlocks(n,i,t);var a,l=this.peekToken(),c=[];do{this.skipSymbol(n);var u=this.parseExpression();this.advanceAfterBlockEnd(e);var h=this.parseUntilBlocks(n,i,t);c.push(new o.Case(l.line,l.col,u,h)),l=this.peekToken()}while(l&&l.value===n);switch(l.value){case i:this.advanceAfterBlockEnd(),a=this.parseUntilBlocks(t),this.advanceAfterBlockEnd();break;case t:this.advanceAfterBlockEnd();break;default:this.fail('parseSwitch: expected "case," "default" or "endswitch," got EOF.')}return new o.Switch(r.lineno,r.colno,s,c,a)},l.parseStatement=function(){var e=this.peekToken();if(e.type!==r.TOKEN_SYMBOL&&this.fail("tag name expected",e.lineno,e.colno),this.breakOnBlocks&&-1!==a.indexOf(this.breakOnBlocks,e.value))return null;switch(e.value){case"raw":return this.parseRaw();case"verbatim":return this.parseRaw("verbatim");case"if":case"ifAsync":return this.parseIf();case"for":case"asyncEach":case"asyncAll":return this.parseFor();case"block":return this.parseBlock();case"extends":return this.parseExtends();case"include":return this.parseInclude();case"set":return this.parseSet();case"macro":return this.parseMacro();case"call":return this.parseCall();case"import":return this.parseImport();case"from":return this.parseFrom();case"filter":return this.parseFilterStatement();case"switch":return this.parseSwitch();default:if(this.extensions.length)for(var t=0;t<this.extensions.length;t++){var n=this.extensions[t];if(-1!==a.indexOf(n.tags||[],e.value))return n.parse(this,o,r)}this.fail("unknown block tag: "+e.value,e.lineno,e.colno)}},l.parseRaw=function(e){for(var t="end"+(e=e||"raw"),n=new RegExp("([\\s\\S]*?){%\\s*("+e+"|"+t+")\\s*(?=%})%}"),i=1,r="",s=null,a=this.advanceAfterBlockEnd();(s=this.tokens._extractRegex(n))&&i>0;){var l=s[0],c=s[1],u=s[2];u===e?i+=1:u===t&&(i-=1),0===i?(r+=c,this.tokens.backN(l.length-c.length)):r+=l}return new o.Output(a.lineno,a.colno,[new o.TemplateData(a.lineno,a.colno,r)])},l.parsePostfix=function(e){for(var t,n=this.peekToken();n;){if(n.type===r.TOKEN_LEFT_PAREN)e=new o.FunCall(n.lineno,n.colno,e,this.parseSignature());else if(n.type===r.TOKEN_LEFT_BRACKET)(t=this.parseAggregate()).children.length>1&&this.fail("invalid index"),e=new o.LookupVal(n.lineno,n.colno,e,t.children[0]);else{if(n.type!==r.TOKEN_OPERATOR||"."!==n.value)break;this.nextToken();var i=this.nextToken();i.type!==r.TOKEN_SYMBOL&&this.fail("expected name as lookup value, got "+i.value,i.lineno,i.colno),t=new o.Literal(i.lineno,i.colno,i.value),e=new o.LookupVal(n.lineno,n.colno,e,t)}n=this.peekToken()}return e},l.parseExpression=function(){return this.parseInlineIf()},l.parseInlineIf=function(){var e=this.parseOr();if(this.skipSymbol("if")){var t=this.parseOr(),n=e;(e=new o.InlineIf(e.lineno,e.colno)).body=n,e.cond=t,this.skipSymbol("else")?e.else_=this.parseOr():e.else_=null}return e},l.parseOr=function(){for(var e=this.parseAnd();this.skipSymbol("or");){var t=this.parseAnd();e=new o.Or(e.lineno,e.colno,e,t)}return e},l.parseAnd=function(){for(var e=this.parseNot();this.skipSymbol("and");){var t=this.parseNot();e=new o.And(e.lineno,e.colno,e,t)}return e},l.parseNot=function(){var e=this.peekToken();return this.skipSymbol("not")?new o.Not(e.lineno,e.colno,this.parseNot()):this.parseIn()},l.parseIn=function(){for(var e=this.parseIs();;){var t=this.nextToken();if(!t)break;var n=t.type===r.TOKEN_SYMBOL&&"not"===t.value;if(n||this.pushToken(t),!this.skipSymbol("in")){n&&this.pushToken(t);break}var i=this.parseIs();e=new o.In(e.lineno,e.colno,e,i),n&&(e=new o.Not(e.lineno,e.colno,e))}return e},l.parseIs=function(){var e=this.parseCompare();if(this.skipSymbol("is")){var t=this.skipSymbol("not"),n=this.parseCompare();e=new o.Is(e.lineno,e.colno,e,n),t&&(e=new o.Not(e.lineno,e.colno,e))}return e},l.parseCompare=function(){for(var e=["==","===","!=","!==","<",">","<=",">="],t=this.parseConcat(),n=[];;){var i=this.nextToken();if(!i)break;if(-1===e.indexOf(i.value)){this.pushToken(i);break}n.push(new o.CompareOperand(i.lineno,i.colno,this.parseConcat(),i.value))}return n.length?new o.Compare(n[0].lineno,n[0].colno,t,n):t},l.parseConcat=function(){for(var e=this.parseAdd();this.skipValue(r.TOKEN_TILDE,"~");){var t=this.parseAdd();e=new o.Concat(e.lineno,e.colno,e,t)}return e},l.parseAdd=function(){for(var e=this.parseSub();this.skipValue(r.TOKEN_OPERATOR,"+");){var t=this.parseSub();e=new o.Add(e.lineno,e.colno,e,t)}return e},l.parseSub=function(){for(var e=this.parseMul();this.skipValue(r.TOKEN_OPERATOR,"-");){var t=this.parseMul();e=new o.Sub(e.lineno,e.colno,e,t)}return e},l.parseMul=function(){for(var e=this.parseDiv();this.skipValue(r.TOKEN_OPERATOR,"*");){var t=this.parseDiv();e=new o.Mul(e.lineno,e.colno,e,t)}return e},l.parseDiv=function(){for(var e=this.parseFloorDiv();this.skipValue(r.TOKEN_OPERATOR,"/");){var t=this.parseFloorDiv();e=new o.Div(e.lineno,e.colno,e,t)}return e},l.parseFloorDiv=function(){for(var e=this.parseMod();this.skipValue(r.TOKEN_OPERATOR,"//");){var t=this.parseMod();e=new o.FloorDiv(e.lineno,e.colno,e,t)}return e},l.parseMod=function(){for(var e=this.parsePow();this.skipValue(r.TOKEN_OPERATOR,"%");){var t=this.parsePow();e=new o.Mod(e.lineno,e.colno,e,t)}return e},l.parsePow=function(){for(var e=this.parseUnary();this.skipValue(r.TOKEN_OPERATOR,"**");){var t=this.parseUnary();e=new o.Pow(e.lineno,e.colno,e,t)}return e},l.parseUnary=function(e){var t,n=this.peekToken();return t=this.skipValue(r.TOKEN_OPERATOR,"-")?new o.Neg(n.lineno,n.colno,this.parseUnary(!0)):this.skipValue(r.TOKEN_OPERATOR,"+")?new o.Pos(n.lineno,n.colno,this.parseUnary(!0)):this.parsePrimary(),e||(t=this.parseFilter(t)),t},l.parsePrimary=function(e){var t,n=this.nextToken(),i=null;if(n?n.type===r.TOKEN_STRING?t=n.value:n.type===r.TOKEN_INT?t=parseInt(n.value,10):n.type===r.TOKEN_FLOAT?t=parseFloat(n.value):n.type===r.TOKEN_BOOLEAN?"true"===n.value?t=!0:"false"===n.value?t=!1:this.fail("invalid boolean: "+n.value,n.lineno,n.colno):n.type===r.TOKEN_NONE?t=null:n.type===r.TOKEN_REGEX&&(t=new RegExp(n.value.body,n.value.flags)):this.fail("expected expression, got end of file"),void 0!==t?i=new o.Literal(n.lineno,n.colno,t):n.type===r.TOKEN_SYMBOL?i=new o.Symbol(n.lineno,n.colno,n.value):(this.pushToken(n),i=this.parseAggregate()),e||(i=this.parsePostfix(i)),i)return i;throw this.error("unexpected token: "+n.value,n.lineno,n.colno)},l.parseFilterName=function(){for(var e=this.expect(r.TOKEN_SYMBOL),t=e.value;this.skipValue(r.TOKEN_OPERATOR,".");)t+="."+this.expect(r.TOKEN_SYMBOL).value;return new o.Symbol(e.lineno,e.colno,t)},l.parseFilterArgs=function(e){return this.peekToken().type===r.TOKEN_LEFT_PAREN?this.parsePostfix(e).args.children:[]},l.parseFilter=function(e){for(;this.skip(r.TOKEN_PIPE);){var t=this.parseFilterName();e=new o.Filter(t.lineno,t.colno,t,new o.NodeList(t.lineno,t.colno,[e].concat(this.parseFilterArgs(e))))}return e},l.parseFilterStatement=function(){var e=this.peekToken();this.skipSymbol("filter")||this.fail("parseFilterStatement: expected filter");var t=this.parseFilterName(),n=this.parseFilterArgs(t);this.advanceAfterBlockEnd(e.value);var i=new o.Capture(t.lineno,t.colno,this.parseUntilBlocks("endfilter"));this.advanceAfterBlockEnd();var r=new o.Filter(t.lineno,t.colno,t,new o.NodeList(t.lineno,t.colno,[i].concat(n)));return new o.Output(t.lineno,t.colno,[r])},l.parseAggregate=function(){var e,t=this.nextToken();switch(t.type){case r.TOKEN_LEFT_PAREN:e=new o.Group(t.lineno,t.colno);break;case r.TOKEN_LEFT_BRACKET:e=new o.Array(t.lineno,t.colno);break;case r.TOKEN_LEFT_CURLY:e=new o.Dict(t.lineno,t.colno);break;default:return null}for(;;){var n=this.peekToken().type;if(n===r.TOKEN_RIGHT_PAREN||n===r.TOKEN_RIGHT_BRACKET||n===r.TOKEN_RIGHT_CURLY){this.nextToken();break}if(e.children.length>0&&(this.skip(r.TOKEN_COMMA)||this.fail("parseAggregate: expected comma after expression",t.lineno,t.colno)),e instanceof o.Dict){var i=this.parsePrimary();this.skip(r.TOKEN_COLON)||this.fail("parseAggregate: expected colon after dict key",t.lineno,t.colno);var s=this.parseExpression();e.addChild(new o.Pair(i.lineno,i.colno,i,s))}else{var a=this.parseExpression();e.addChild(a)}}return e},l.parseSignature=function(e,t){var n=this.peekToken();if(!t&&n.type!==r.TOKEN_LEFT_PAREN){if(e)return null;this.fail("expected arguments",n.lineno,n.colno)}n.type===r.TOKEN_LEFT_PAREN&&(n=this.nextToken());for(var i=new o.NodeList(n.lineno,n.colno),s=new o.KeywordArgs(n.lineno,n.colno),a=!1;;){if(n=this.peekToken(),!t&&n.type===r.TOKEN_RIGHT_PAREN){this.nextToken();break}if(t&&n.type===r.TOKEN_BLOCK_END)break;if(a&&!this.skip(r.TOKEN_COMMA))this.fail("parseSignature: expected comma after expression",n.lineno,n.colno);else{var l=this.parseExpression();this.skipValue(r.TOKEN_OPERATOR,"=")?s.addChild(new o.Pair(l.lineno,l.colno,l,this.parseExpression())):i.addChild(l)}a=!0}return s.children.length&&i.addChild(s),i},l.parseUntilBlocks=function(){for(var e=this.breakOnBlocks,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];this.breakOnBlocks=n;var r=this.parse();return this.breakOnBlocks=e,r},l.parseNodes=function(){for(var e,t=[];e=this.nextToken();)if(e.type===r.TOKEN_DATA){var n=e.value,i=this.peekToken(),s=i&&i.value;this.dropLeadingWhitespace&&(n=n.replace(/^\s*/,""),this.dropLeadingWhitespace=!1),i&&(i.type===r.TOKEN_BLOCK_START&&"-"===s.charAt(s.length-1)||i.type===r.TOKEN_VARIABLE_START&&"-"===s.charAt(this.tokens.tags.VARIABLE_START.length)||i.type===r.TOKEN_COMMENT&&"-"===s.charAt(this.tokens.tags.COMMENT_START.length))&&(n=n.replace(/\s*$/,"")),t.push(new o.Output(e.lineno,e.colno,[new o.TemplateData(e.lineno,e.colno,n)]))}else if(e.type===r.TOKEN_BLOCK_START){this.dropLeadingWhitespace=!1;var a=this.parseStatement();if(!a)break;t.push(a)}else if(e.type===r.TOKEN_VARIABLE_START){var l=this.parseExpression();this.dropLeadingWhitespace=!1,this.advanceAfterVariableEnd(),t.push(new o.Output(e.lineno,e.colno,[l]))}else e.type===r.TOKEN_COMMENT?this.dropLeadingWhitespace="-"===e.value.charAt(e.value.length-this.tokens.tags.COMMENT_END.length-1):this.fail("Unexpected token at top-level: "+e.type,e.lineno,e.colno);return t},l.parse=function(){return new o.NodeList(0,0,this.parseNodes())},l.parseAsRoot=function(){return new o.Root(0,0,this.parseNodes())},s}(s);e.exports={parse:function(e,t,n){var i=new l(r.lex(e,n));return void 0!==t&&(i.extensions=t),i.parseAsRoot()},Parser:l}},function(e,t,n){"use strict";var i=n(0),r=" \n\t\r ",o="()[]{}%*-+~/#,:|.<>=!",s="string",a="whitespace",l="data",c="block-start",u="block-end",h="variable-start",p="variable-end",f="comment",d="left-paren",m="right-paren",v="left-bracket",g="right-bracket",y="left-curly",b="right-curly",_="operator",w="comma",x="colon",k="tilde",S="pipe",E="float",O="boolean",L="none",T="symbol",A="regex";function C(e,t,n,i){return{type:e,value:t,lineno:n,colno:i}}var $=function(){function e(e,t){this.str=e,this.index=0,this.len=e.length,this.lineno=0,this.colno=0,this.in_code=!1;var n=(t=t||{}).tags||{};this.tags={BLOCK_START:n.blockStart||"{%",BLOCK_END:n.blockEnd||"%}",VARIABLE_START:n.variableStart||"{{",VARIABLE_END:n.variableEnd||"}}",COMMENT_START:n.commentStart||"{#",COMMENT_END:n.commentEnd||"#}"},this.trimBlocks=!!t.trimBlocks,this.lstripBlocks=!!t.lstripBlocks}var t=e.prototype;return t.nextToken=function(){var e,t=this.lineno,n=this.colno;if(this.in_code){var $=this.current();if(this.isFinished())return null;if('"'===$||"'"===$)return C(s,this._parseString($),t,n);if(e=this._extract(r))return C(a,e,t,n);if((e=this._extractString(this.tags.BLOCK_END))||(e=this._extractString("-"+this.tags.BLOCK_END)))return this.in_code=!1,this.trimBlocks&&("\n"===($=this.current())?this.forward():"\r"===$&&(this.forward(),"\n"===($=this.current())?this.forward():this.back())),C(u,e,t,n);if((e=this._extractString(this.tags.VARIABLE_END))||(e=this._extractString("-"+this.tags.VARIABLE_END)))return this.in_code=!1,C(p,e,t,n);if("r"===$&&"/"===this.str.charAt(this.index+1)){this.forwardN(2);for(var I="";!this.isFinished();){if("/"===this.current()&&"\\"!==this.previous()){this.forward();break}I+=this.current(),this.forward()}for(var N=["g","i","m","y"],F="";!this.isFinished()&&-1!==N.indexOf(this.current());)F+=this.current(),this.forward();return C(A,{body:I,flags:F},t,n)}if(-1!==o.indexOf($)){this.forward();var B,j=["==","===","!=","!==","<=",">=","//","**"],P=$+this.current();switch(-1!==i.indexOf(j,P)&&(this.forward(),$=P,-1!==i.indexOf(j,P+this.current())&&($=P+this.current(),this.forward())),$){case"(":B=d;break;case")":B=m;break;case"[":B=v;break;case"]":B=g;break;case"{":B=y;break;case"}":B=b;break;case",":B=w;break;case":":B=x;break;case"~":B=k;break;case"|":B=S;break;default:B=_}return C(B,$,t,n)}if((e=this._extractUntil(r+o)).match(/^[-+]?[0-9]+$/)){if("."===this.current()){this.forward();var M=this._extract("0123456789");return C(E,e+"."+M,t,n)}return C("int",e,t,n)}if(e.match(/^(true|false)$/))return C(O,e,t,n);if("none"===e)return C(L,e,t,n);if("null"===e)return C(L,e,t,n);if(e)return C(T,e,t,n);throw new Error("Unexpected value while parsing: "+e)}var R,H=this.tags.BLOCK_START.charAt(0)+this.tags.VARIABLE_START.charAt(0)+this.tags.COMMENT_START.charAt(0)+this.tags.COMMENT_END.charAt(0);if(this.isFinished())return null;if((e=this._extractString(this.tags.BLOCK_START+"-"))||(e=this._extractString(this.tags.BLOCK_START)))return this.in_code=!0,C(c,e,t,n);if((e=this._extractString(this.tags.VARIABLE_START+"-"))||(e=this._extractString(this.tags.VARIABLE_START)))return this.in_code=!0,C(h,e,t,n);e="";var D=!1;for(this._matches(this.tags.COMMENT_START)&&(D=!0,e=this._extractString(this.tags.COMMENT_START));null!==(R=this._extractUntil(H));){if(e+=R,(this._matches(this.tags.BLOCK_START)||this._matches(this.tags.VARIABLE_START)||this._matches(this.tags.COMMENT_START))&&!D){if(this.lstripBlocks&&this._matches(this.tags.BLOCK_START)&&this.colno>0&&this.colno<=e.length){var K=e.slice(-this.colno);if(/^\s+$/.test(K)&&!(e=e.slice(0,-this.colno)).length)return this.nextToken()}break}if(this._matches(this.tags.COMMENT_END)){if(!D)throw new Error("unexpected end of comment");e+=this._extractString(this.tags.COMMENT_END);break}e+=this.current(),this.forward()}if(null===R&&D)throw new Error("expected end of comment, got end of file");return C(D?f:l,e,t,n)},t._parseString=function(e){this.forward();for(var t="";!this.isFinished()&&this.current()!==e;){var n=this.current();if("\\"===n){switch(this.forward(),this.current()){case"n":t+="\n";break;case"t":t+="\t";break;case"r":t+="\r";break;default:t+=this.current()}this.forward()}else t+=n,this.forward()}return this.forward(),t},t._matches=function(e){return this.index+e.length>this.len?null:this.str.slice(this.index,this.index+e.length)===e},t._extractString=function(e){return this._matches(e)?(this.forwardN(e.length),e):null},t._extractUntil=function(e){return this._extractMatching(!0,e||"")},t._extract=function(e){return this._extractMatching(!1,e)},t._extractMatching=function(e,t){if(this.isFinished())return null;var n=t.indexOf(this.current());if(e&&-1===n||!e&&-1!==n){var i=this.current();this.forward();for(var r=t.indexOf(this.current());(e&&-1===r||!e&&-1!==r)&&!this.isFinished();)i+=this.current(),this.forward(),r=t.indexOf(this.current());return i}return""},t._extractRegex=function(e){var t=this.currentStr().match(e);return t?(this.forwardN(t[0].length),t):null},t.isFinished=function(){return this.index>=this.len},t.forwardN=function(e){for(var t=0;t<e;t++)this.forward()},t.forward=function(){this.index++,"\n"===this.previous()?(this.lineno++,this.colno=0):this.colno++},t.backN=function(e){for(var t=0;t<e;t++)this.back()},t.back=function(){if(this.index--,"\n"===this.current()){this.lineno--;var e=this.src.lastIndexOf("\n",this.index-1);this.colno=-1===e?this.index:this.index-e}else this.colno--},t.current=function(){return this.isFinished()?"":this.str.charAt(this.index)},t.currentStr=function(){return this.isFinished()?"":this.str.substr(this.index)},t.previous=function(){return this.str.charAt(this.index-1)},e}();e.exports={lex:function(e,t){return new $(e,t)},TOKEN_STRING:s,TOKEN_WHITESPACE:a,TOKEN_DATA:l,TOKEN_BLOCK_START:c,TOKEN_BLOCK_END:u,TOKEN_VARIABLE_START:h,TOKEN_VARIABLE_END:p,TOKEN_COMMENT:f,TOKEN_LEFT_PAREN:d,TOKEN_RIGHT_PAREN:m,TOKEN_LEFT_BRACKET:v,TOKEN_RIGHT_BRACKET:g,TOKEN_LEFT_CURLY:y,TOKEN_RIGHT_CURLY:b,TOKEN_OPERATOR:_,TOKEN_COMMA:w,TOKEN_COLON:x,TOKEN_TILDE:k,TOKEN_PIPE:S,TOKEN_INT:"int",TOKEN_FLOAT:E,TOKEN_BOOLEAN:O,TOKEN_NONE:L,TOKEN_SYMBOL:T,TOKEN_SPECIAL:"special",TOKEN_REGEX:A}},function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}var r=n(6),o=n(19).PrecompiledLoader,s=function(e){var t,n;function r(t,n){var i;return(i=e.call(this)||this).baseURL=t||".",n=n||{},i.useCache=!!n.useCache,i.async=!!n.async,i}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n);var o=r.prototype;return o.resolve=function(e,t){throw new Error("relative templates not support in the browser yet")},o.getSource=function(e,t){var n,i=this,r=this.useCache;return this.fetch(this.baseURL+"/"+e,(function(o,s){if(o)if(t)t(o.content);else{if(404!==o.status)throw o.content;n=null}else n={src:s,path:e,noCache:!r},i.emit("load",e,n),t&&t(null,n)})),n},o.fetch=function(e,t){if("undefined"==typeof window)throw new Error("WebLoader can only by used in a browser");var n=new XMLHttpRequest,i=!0;n.onreadystatechange=function(){4===n.readyState&&i&&(i=!1,0===n.status||200===n.status?t(null,n.responseText):t({status:n.status,content:n.responseText}))},e+=(-1===e.indexOf("?")?"?":"&")+"s="+(new Date).getTime(),n.open("GET",e,this.async),n.send()},r}(r);e.exports={WebLoader:s,PrecompiledLoader:o}},function(e,t,n){"use strict";var i,r=n(0),o=n(7),s=o.Environment,a=o.Template,l=n(6),c=n(10),u=n(23),h=n(5),p=n(8),f=n(9),d=n(2),m=n(3),v=n(25);function g(e,t){var n;return t=t||{},r.isObject(e)&&(t=e,e=null),c.FileSystemLoader?n=new c.FileSystemLoader(e,{watch:t.watch,noCache:t.noCache}):c.WebLoader&&(n=new c.WebLoader(e,{useCache:t.web&&t.web.useCache,async:t.web&&t.web.async})),i=new s(n,t),t&&t.express&&i.express(t.express),i}e.exports={Environment:s,Template:a,Loader:l,FileSystemLoader:c.FileSystemLoader,NodeResolveLoader:c.NodeResolveLoader,PrecompiledLoader:c.PrecompiledLoader,WebLoader:c.WebLoader,compiler:h,parser:p,lexer:f,runtime:d,lib:r,nodes:m,installJinjaCompat:v,configure:g,reset:function(){i=void 0},compile:function(e,t,n,r){return i||g(),new a(e,t,n,r)},render:function(e,t,n){return i||g(),i.render(e,t,n)},renderString:function(e,t,n){return i||g(),i.renderString(e,t,n)},precompile:u?u.precompile:void 0,precompileString:u?u.precompileString:void 0}},function(e,t,n){"use strict";var i=n(13),r=[],o=[],s=i.makeRequestCallFromTimer((function(){if(o.length)throw o.shift()}));function a(e){var t;(t=r.length?r.pop():new l).task=e,i(t)}function l(){this.task=null}e.exports=a,l.prototype.call=function(){try{this.task.call()}catch(e){a.onerror?a.onerror(e):(o.push(e),s())}finally{this.task=null,r[r.length]=this}}},function(e,t,n){"use strict";(function(t){function n(e){r.length||i(),r[r.length]=e}e.exports=n;var i,r=[],o=0;function s(){for(;o<r.length;){var e=o;if(o+=1,r[e].call(),o>1024){for(var t=0,n=r.length-o;t<n;t++)r[t]=r[t+o];r.length-=o,o=0}}r.length=0,o=0}var a,l,c,u=void 0!==t?t:self,h=u.MutationObserver||u.WebKitMutationObserver;function p(e){return function(){var t=setTimeout(i,0),n=setInterval(i,50);function i(){clearTimeout(t),clearInterval(n),e()}}}"function"==typeof h?(a=1,l=new h(s),c=document.createTextNode(""),l.observe(c,{characterData:!0}),i=function(){a=-a,c.data=a}):i=p(s),n.requestFlush=i,n.makeRequestCallFromTimer=p}).call(t,n(14))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var i;!function(n){"use strict";var r=function(){var e=Array.prototype.slice.call(arguments);"function"==typeof e[0]&&e[0].apply(null,e.splice(1))},o=function(e){"function"==typeof setImmediate?setImmediate(e):"undefined"!=typeof process&&process.nextTick?process.nextTick(e):setTimeout(e,0)},s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,t,n){var i=n?o:r;if(t=t||function(){},!s(e)){var a=new Error("First argument to waterfall must be an array of functions");return t(a)}if(!e.length)return t();var l=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var r=Array.prototype.slice.call(arguments,1),o=e.next();o?r.push(l(o)):r.push(t),i((function(){e.apply(null,r)}))}}};l(function(e){var t=function(n){var i=function(){return e.length&&e[n].apply(null,arguments),i.next()};return i.next=function(){return n<e.length-1?t(n+1):null},i};return t(0)}(e))()};void 0===(i=function(){return a}.apply(t,[]))||(e.exports=i)}()},function(e,t,n){"use strict";var i,r="object"==typeof Reflect?Reflect:null,o=r&&"function"==typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};i=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,i){function r(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}var o;"error"!==t&&(o=function(n){e.removeListener(t,r),i(n)},e.once("error",o)),e.once(t,r)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,o,s,a;if(c(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),s=o[t]),void 0===s)s=o[t]=n,++e._eventsCount;else if("function"==typeof s?s=o[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),(r=u(e))>0&&s.length>r&&!s.warned){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,a=l,console&&console.warn&&console.warn(a)}return e}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=p.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):v(r,r.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=r[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,u=v(l,c);for(n=0;n<c;++n)o(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){return c(t),this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,r,o,s;if(c(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},a.prototype.listenerCount=m,a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,n){"use strict";var i=n(3),r=n(0),o=0;function s(){return"hole_"+o++}function a(e,t){for(var n=null,i=0;i<e.length;i++){var r=t(e[i]);r!==e[i]&&(n||(n=e.slice()),n[i]=r)}return n||e}function l(e,t,n){if(!(e instanceof i.Node))return e;if(!n){var r=t(e);if(r&&r!==e)return r}if(e instanceof i.NodeList){var o=a(e.children,(function(e){return l(e,t,n)}));o!==e.children&&(e=new i[e.typename](e.lineno,e.colno,o))}else if(e instanceof i.CallExtension){var s=l(e.args,t,n),c=a(e.contentArgs,(function(e){return l(e,t,n)}));s===e.args&&c===e.contentArgs||(e=new i[e.typename](e.extName,e.prop,s,c))}else{var u=e.fields.map((function(t){return e[t]})),h=a(u,(function(e){return l(e,t,n)}));h!==u&&(e=new i[e.typename](e.lineno,e.colno),h.forEach((function(t,n){e[e.fields[n]]=t})))}return n&&t(e)||e}function c(e,t){return l(e,t,!0)}function u(e,t,n){var o=[],a=c(n?e[n]:e,(function(e){var n;return e instanceof i.Block?e:((e instanceof i.Filter&&-1!==r.indexOf(t,e.name.value)||e instanceof i.CallExtensionAsync)&&(n=new i.Symbol(e.lineno,e.colno,s()),o.push(new i.FilterAsync(e.lineno,e.colno,e.name,e.args,n))),n)}));return n?e[n]=a:e=a,o.length?(o.push(e),new i.NodeList(e.lineno,e.colno,o)):e}e.exports={transform:function(e,t){return function(e,t){return function(e){return c(e,(function(e){if(e instanceof i.If||e instanceof i.For){var t=!1;if(l(e,(function(e){if(e instanceof i.FilterAsync||e instanceof i.IfAsync||e instanceof i.AsyncEach||e instanceof i.AsyncAll||e instanceof i.CallExtensionAsync)return t=!0,e})),t){if(e instanceof i.If)return new i.IfAsync(e.lineno,e.colno,e.cond,e.body,e.else_);if(e instanceof i.For&&!(e instanceof i.AsyncAll))return new i.AsyncEach(e.lineno,e.colno,e.arr,e.name,e.body,e.else_)}}}))}(function(e){return l(e,(function(e){if(e instanceof i.Block){var t=!1,n=s();e.body=l(e.body,(function(e){if(e instanceof i.FunCall&&"super"===e.name.value)return t=!0,new i.Symbol(e.lineno,e.colno,n)})),t&&e.body.children.unshift(new i.Super(0,0,e.name,new i.Symbol(0,0,n)))}}))}(function(e,t){return c(e,(function(e){return e instanceof i.Output?u(e,t):e instanceof i.Set?u(e,t,"value"):e instanceof i.For?u(e,t,"arr"):e instanceof i.If?u(e,t,"cond"):e instanceof i.CallExtension?u(e,t,"args"):void 0}))}(e,t)))}(e,t||[])}}},function(e,t,n){"use strict";var i=n(0),r=n(2);function o(e,t){return null==e||!1===e?t:e}function s(e){return e!=e}function a(e){var t=(e=o(e,"")).toLowerCase();return r.copySafeness(e,t.charAt(0).toUpperCase()+t.slice(1))}function l(e){if(i.isString(e))return e.split("");if(i.isObject(e))return i._entries(e||{}).map((function(e){return{key:e[0],value:e[1]}}));if(i.isArray(e))return e;throw new i.TemplateError("list filter: type not iterable")}function c(e){return function(t,n,r){void 0===n&&(n="truthy");var o=this,s=o.env.getTest(n);return i.toArray(t).filter((function(t){return s.call(o,t,r)===e}))}}function u(e){return r.copySafeness(e,e.replace(/^\s*|\s*$/g,""))}(t=e.exports={}).abs=Math.abs,t.batch=function(e,t,n){var i,r=[],o=[];for(i=0;i<e.length;i++)i%t==0&&o.length&&(r.push(o),o=[]),o.push(e[i]);if(o.length){if(n)for(i=o.length;i<t;i++)o.push(n);r.push(o)}return r},t.capitalize=a,t.center=function(e,t){if(t=t||80,(e=o(e,"")).length>=t)return e;var n=t-e.length,s=i.repeat(" ",n/2-n%2),a=i.repeat(" ",n/2);return r.copySafeness(e,s+e+a)},t.default=function(e,t,n){return n?e||t:void 0!==e?e:t},t.dictsort=function(e,t,n){if(!i.isObject(e))throw new i.TemplateError("dictsort filter: val must be an object");var r,o=[];for(var s in e)o.push([s,e[s]]);if(void 0===n||"key"===n)r=0;else{if("value"!==n)throw new i.TemplateError("dictsort filter: You can only sort by either key or value");r=1}return o.sort((function(e,n){var o=e[r],s=n[r];return t||(i.isString(o)&&(o=o.toUpperCase()),i.isString(s)&&(s=s.toUpperCase())),o>s?1:o===s?0:-1})),o},t.dump=function(e,t){return JSON.stringify(e,null,t)},t.escape=function(e){return e instanceof r.SafeString?e:(e=null==e?"":e,r.markSafe(i.escape(e.toString())))},t.safe=function(e){return e instanceof r.SafeString?e:(e=null==e?"":e,r.markSafe(e.toString()))},t.first=function(e){return e[0]},t.forceescape=function(e){return e=null==e?"":e,r.markSafe(i.escape(e.toString()))},t.groupby=function(e,t){return i.groupBy(e,t,this.env.opts.throwOnUndefined)},t.indent=function(e,t,n){if(""===(e=o(e,"")))return"";t=t||4;var s=e.split("\n"),a=i.repeat(" ",t),l=s.map((function(e,t){return 0!==t||n?""+a+e:e})).join("\n");return r.copySafeness(e,l)},t.join=function(e,t,n){return t=t||"",n&&(e=i.map(e,(function(e){return e[n]}))),e.join(t)},t.last=function(e){return e[e.length-1]},t.length=function(e){var t=o(e,"");return void 0!==t?"function"==typeof Map&&t instanceof Map||"function"==typeof Set&&t instanceof Set?t.size:!i.isObject(t)||t instanceof r.SafeString?t.length:i.keys(t).length:0},t.list=l,t.lower=function(e){return(e=o(e,"")).toLowerCase()},t.nl2br=function(e){return null==e?"":r.copySafeness(e,e.replace(/\r\n|\n/g,"<br />\n"))},t.random=function(e){return e[Math.floor(Math.random()*e.length)]},t.reject=c(!1),t.rejectattr=function(e,t){return e.filter((function(e){return!e[t]}))},t.select=c(!0),t.selectattr=function(e,t){return e.filter((function(e){return!!e[t]}))},t.replace=function(e,t,n,i){var o=e;if(t instanceof RegExp)return e.replace(t,n);void 0===i&&(i=-1);var s="";if("number"==typeof t)t=""+t;else if("string"!=typeof t)return e;if("number"==typeof e&&(e=""+e),"string"!=typeof e&&!(e instanceof r.SafeString))return e;if(""===t)return s=n+e.split("").join(n)+n,r.copySafeness(e,s);var a=e.indexOf(t);if(0===i||-1===a)return e;for(var l=0,c=0;a>-1&&(-1===i||c<i);)s+=e.substring(l,a)+n,l=a+t.length,c++,a=e.indexOf(t,l);return l<e.length&&(s+=e.substring(l)),r.copySafeness(o,s)},t.reverse=function(e){var t;return(t=i.isString(e)?l(e):i.map(e,(function(e){return e}))).reverse(),i.isString(e)?r.copySafeness(e,t.join("")):t},t.round=function(e,t,n){t=t||0;var i=Math.pow(10,t);return("ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round)(e*i)/i},t.slice=function(e,t,n){for(var i=Math.floor(e.length/t),r=e.length%t,o=[],s=0,a=0;a<t;a++){var l=s+a*i;a<r&&s++;var c=s+(a+1)*i,u=e.slice(l,c);n&&a>=r&&u.push(n),o.push(u)}return o},t.sum=function(e,t,n){return void 0===n&&(n=0),t&&(e=i.map(e,(function(e){return e[t]}))),n+e.reduce((function(e,t){return e+t}),0)},t.sort=r.makeMacro(["value","reverse","case_sensitive","attribute"],[],(function(e,t,n,r){var o=this,s=i.map(e,(function(e){return e})),a=i.getAttrGetter(r);return s.sort((function(e,s){var l=r?a(e):e,c=r?a(s):s;if(o.env.opts.throwOnUndefined&&r&&(void 0===l||void 0===c))throw new TypeError('sort: attribute "'+r+'" resolved to undefined');return!n&&i.isString(l)&&i.isString(c)&&(l=l.toLowerCase(),c=c.toLowerCase()),l<c?t?1:-1:l>c?t?-1:1:0})),s})),t.string=function(e){return r.copySafeness(e,e)},t.striptags=function(e,t){var n,i=u((e=o(e,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,""));return n=t?i.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):i.replace(/\s+/gi," "),r.copySafeness(e,n)},t.title=function(e){var t=(e=o(e,"")).split(" ").map((function(e){return a(e)}));return r.copySafeness(e,t.join(" "))},t.trim=u,t.truncate=function(e,t,n,i){var s=e;if(t=t||255,(e=o(e,"")).length<=t)return e;if(n)e=e.substring(0,t);else{var a=e.lastIndexOf(" ",t);-1===a&&(a=t),e=e.substring(0,a)}return e+=null!=i?i:"...",r.copySafeness(s,e)},t.upper=function(e){return(e=o(e,"")).toUpperCase()},t.urlencode=function(e){var t=encodeURIComponent;return i.isString(e)?t(e):(i.isArray(e)?e:i._entries(e)).map((function(e){var n=e[0],i=e[1];return t(n)+"="+t(i)})).join("&")};var h=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,p=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,f=/^https?:\/\/.*$/,d=/^www\./,m=/\.(?:org|net|com)(?:\:|\/|$)/;t.urlize=function(e,t,n){s(t)&&(t=1/0);var i=!0===n?' rel="nofollow"':"";return e.split(/(\s+)/).filter((function(e){return e&&e.length})).map((function(e){var n=e.match(h),r=n?n[1]:e,o=r.substr(0,t);return f.test(r)?'<a href="'+r+'"'+i+">"+o+"</a>":d.test(r)?'<a href="http://'+r+'"'+i+">"+o+"</a>":p.test(r)?'<a href="mailto:'+r+'">'+r+"</a>":m.test(r)?'<a href="http://'+r+'"'+i+">"+o+"</a>":e})).join("")},t.wordcount=function(e){var t=(e=o(e,""))?e.match(/\w+/g):null;return t?t.length:null},t.float=function(e,t){var n=parseFloat(e);return s(n)?t:n};var v=r.makeMacro(["value","default","base"],[],(function(e,t,n){void 0===n&&(n=10);var i=parseInt(e,n);return s(i)?t:i}));t.int=v,t.d=t.default,t.e=t.escape},function(e,t,n){"use strict";function i(e,t){return i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},i(e,t)}var r=function(e){var t,n;function r(t){var n;return(n=e.call(this)||this).precompiled=t||{},n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,i(t,n),r.prototype.getSource=function(e){return this.precompiled[e]?{src:{type:"code",obj:this.precompiled[e]},path:e}:null},r}(n(6));e.exports={PrecompiledLoader:r}},function(e,t,n){"use strict";var i=n(2).SafeString;t.callable=function(e){return"function"==typeof e},t.defined=function(e){return void 0!==e},t.divisibleby=function(e,t){return e%t==0},t.escaped=function(e){return e instanceof i},t.equalto=function(e,t){return e===t},t.eq=t.equalto,t.sameas=t.equalto,t.even=function(e){return e%2==0},t.falsy=function(e){return!e},t.ge=function(e,t){return e>=t},t.greaterthan=function(e,t){return e>t},t.gt=t.greaterthan,t.le=function(e,t){return e<=t},t.lessthan=function(e,t){return e<t},t.lt=t.lessthan,t.lower=function(e){return e.toLowerCase()===e},t.ne=function(e,t){return e!==t},t.null=function(e){return null===e},t.number=function(e){return"number"==typeof e},t.odd=function(e){return e%2==1},t.string=function(e){return"string"==typeof e},t.truthy=function(e){return!!e},t.undefined=function(e){return void 0===e},t.upper=function(e){return e.toUpperCase()===e},t.iterable=function(e){return"undefined"!=typeof Symbol?!!e[Symbol.iterator]:Array.isArray(e)||"string"==typeof e},t.mapping=function(e){var t=null!=e&&"object"==typeof e&&!Array.isArray(e);return Set?t&&!(e instanceof Set):t}},function(e,t,n){"use strict";function i(e){var t=-1;return{current:null,reset:function(){t=-1,this.current=null},next:function(){return++t>=e.length&&(t=0),this.current=e[t],this.current}}}e.exports=function(){return{range:function(e,t,n){void 0===t?(t=e,e=0,n=1):n||(n=1);var i=[];if(n>0)for(var r=e;r<t;r+=n)i.push(r);else for(var o=e;o>t;o+=n)i.push(o);return i},cycler:function(){return i(Array.prototype.slice.call(arguments))},joiner:function(e){return function(e){e=e||",";var t=!0;return function(){var n=t?"":e;return t=!1,n}}(e)}}}},function(e,t,n){var i=n(4);e.exports=function(e,t){function n(e,t){if(this.name=e,this.path=e,this.defaultEngine=t.defaultEngine,this.ext=i.extname(e),!this.ext&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return n.prototype.render=function(t,n){e.render(this.name,t,n)},t.set("view",n),t.set("nunjucksEnv",e),e}},function(e,t,n){"use strict";var i=n(4),r=n(4),o=n(0)._prettifyError,s=n(5),a=n(7).Environment,l=n(24);function c(e,t){return!!Array.isArray(t)&&t.some((function(t){return e.match(t)}))}function u(e,t){(t=t||{}).isString=!0;var n=t.env||new a([]),i=t.wrapper||l;if(!t.name)throw new Error('the "name" option is required when compiling a string');return i([h(e,t.name,n)],t)}function h(e,t,n){var i,r=(n=n||new a([])).asyncFilters,l=n.extensionsList;t=t.replace(/\\/g,"/");try{i=s.compile(e,r,l,t,n.opts)}catch(e){throw o(t,!1,e)}return{name:t,template:i}}e.exports={precompile:function(e,t){var n=(t=t||{}).env||new a([]),o=t.wrapper||l;if(t.isString)return u(e,t);var s=i.existsSync(e)&&i.statSync(e),p=[],f=[];if(s.isFile())p.push(h(i.readFileSync(e,"utf-8"),t.name||e,n));else if(s.isDirectory()){!function n(o){i.readdirSync(o).forEach((function(s){var a=r.join(o,s),l=a.substr(r.join(e,"/").length),u=i.statSync(a);u&&u.isDirectory()?c(l+="/",t.exclude)||n(a):c(l,t.include)&&f.push(a)}))}(e);for(var d=0;d<f.length;d++){var m=f[d].replace(r.join(e,"/"),"");try{p.push(h(i.readFileSync(f[d],"utf-8"),m,n))}catch(e){if(!t.force)throw e;console.error(e)}}}return o(p,t)},precompileString:u}},function(e,t,n){"use strict";e.exports=function(e,t){var n="";t=t||{};for(var i=0;i<e.length;i++){var r=JSON.stringify(e[i].name);n+="(function() {(window.nunjucksPrecompiled = window.nunjucksPrecompiled || {})["+r+"] = (function() {\n"+e[i].template+"\n})();\n",t.asFunction&&(n+="return function(ctx, cb) { return nunjucks.render("+r+", ctx, cb); }\n"),n+="})();\n"}return n}},function(e,t,n){e.exports=function(){"use strict";var e,t,n=this.runtime,i=this.lib,r=this.compiler.Compiler,o=this.parser.Parser,s=this.nodes,a=this.lexer,l=n.contextOrFrameLookup,c=n.memberLookup;function u(e){return{index:e.index,lineno:e.lineno,colno:e.colno}}if(r&&(e=r.prototype.assertType),o&&(t=o.prototype.parseAggregate),n.contextOrFrameLookup=function(e,t,n){var i=l.apply(this,arguments);if(void 0!==i)return i;switch(n){case"True":return!0;case"False":return!1;case"None":return null;default:return}},s&&r&&o){var h=s.Node.extend("Slice",{fields:["start","stop","step"],init:function(e,t,n,i,r){n=n||new s.Literal(e,t,null),i=i||new s.Literal(e,t,null),r=r||new s.Literal(e,t,1),this.parent(e,t,n,i,r)}});r.prototype.assertType=function(t){t instanceof h||e.apply(this,arguments)},r.prototype.compileSlice=function(e,t){this._emit("("),this._compileExpression(e.start,t),this._emit("),("),this._compileExpression(e.stop,t),this._emit("),("),this._compileExpression(e.step,t),this._emit(")")},o.prototype.parseAggregate=function(){var e=this,n=u(this.tokens);n.colno--,n.index--;try{return t.apply(this)}catch(t){var r=u(this.tokens),o=function(){return i._assign(e.tokens,r),t};i._assign(this.tokens,n),this.peeked=!1;var l=this.peekToken();if(l.type!==a.TOKEN_LEFT_BRACKET)throw o();this.nextToken();for(var c=new h(l.lineno,l.colno),p=!1,f=0;f<=c.fields.length&&!this.skip(a.TOKEN_RIGHT_BRACKET);f++){if(f===c.fields.length){if(!p)break;this.fail("parseSlice: too many slice components",l.lineno,l.colno)}this.skip(a.TOKEN_COLON)?p=!0:(c[c.fields[f]]=this.parseExpression(),p=this.skip(a.TOKEN_COLON)||p)}if(!p)throw o();return new s.Array(l.lineno,l.colno,[c])}}}function p(e,t,i,r){e=e||[],null===t&&(t=r<0?e.length-1:0),null===i?i=r<0?-1:e.length:i<0&&(i+=e.length),t<0&&(t+=e.length);for(var o=[],s=t;!(s<0||s>e.length||r>0&&s>=i||r<0&&s<=i);s+=r)o.push(n.memberLookup(e,s));return o}function f(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var d={pop:function(e){if(void 0===e)return this.pop();if(e>=this.length||e<0)throw new Error("KeyError");return this.splice(e,1)},append:function(e){return this.push(e)},remove:function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1);throw new Error("ValueError")},count:function(e){for(var t=0,n=0;n<this.length;n++)this[n]===e&&t++;return t},index:function(e){var t;if(-1===(t=this.indexOf(e)))throw new Error("ValueError");return t},find:function(e){return this.indexOf(e)},insert:function(e,t){return this.splice(e,0,t)}},m={items:function(){return i._entries(this)},values:function(){return i._values(this)},keys:function(){return i.keys(this)},get:function(e,t){var n=this[e];return void 0===n&&(n=t),n},has_key:function(e){return f(this,e)},pop:function(e,t){var n=this[e];if(void 0===n&&void 0!==t)n=t;else{if(void 0===n)throw new Error("KeyError");delete this[e]}return n},popitem:function(){var e=i.keys(this);if(!e.length)throw new Error("KeyError");var t=e[0],n=this[t];return delete this[t],[t,n]},setdefault:function(e,t){return void 0===t&&(t=null),e in this||(this[e]=t),this[e]},update:function(e){return i._assign(this,e),null}};return m.iteritems=m.items,m.itervalues=m.values,m.iterkeys=m.keys,n.memberLookup=function(e,t,n){return 4===arguments.length?p.apply(this,arguments):(e=e||{},i.isArray(e)&&f(d,t)?d[t].bind(e):i.isObject(e)&&f(m,t)?m[t].bind(e):c.apply(this,arguments))},function(){n.contextOrFrameLookup=l,n.memberLookup=c,r&&(r.prototype.assertType=e),o&&(o.prototype.parseAggregate=t)}}}])},e.exports=t()},202:(e,t,n)=>{"use strict";var i=n(700),r=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,s=/^\.+$/,a=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,l=/[\. ]+$/;function c(e,t){if("string"!=typeof e)throw new Error("Input must be string");var n=e.replace(r,t).replace(o,t).replace(s,t).replace(a,t).replace(l,t);return i(n,255)}e.exports=function(e,t){var n=t&&t.replacement||"",i=c(e,n);return""===n?i:c(i,"")}},700:(e,t,n)=>{"use strict";var i=n(156),r=n(793);e.exports=i.bind(null,r)},156:e=>{"use strict";function t(e){return e>=55296&&e<=56319}function n(e){return e>=56320&&e<=57343}e.exports=function(e,i,r){if("string"!=typeof i)throw new Error("Input must be string");for(var o,s,a=i.length,l=0,c=0;c<a;c+=1){if(o=i.charCodeAt(c),s=i[c],t(o)&&n(i.charCodeAt(c+1))&&(s+=i[c+=1]),(l+=e(s))===r)return i.slice(0,c+1);if(l>r)return i.slice(0,c-s.length+1)}return i}},793:e=>{"use strict";function t(e){return e>=55296&&e<=56319}function n(e){return e>=56320&&e<=57343}e.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var i=e.length,r=0,o=null,s=null,a=0;a<i;a++)n(o=e.charCodeAt(a))?null!=s&&t(s)?r+=1:r+=3:o<=127?r+=1:o>=128&&o<=2047?r+=2:o>=2048&&o<=65535&&(r+=3),s=o;return r}},995:e=>{"use strict";e.exports='{% if is_new_article %}# {{title}}\n\n## Metadata\n{% if author %}- Author: [{{author}}]({{authorUrl}}){% endif %}\n- Title: {{title}}\n{% if url %}- Reference: {{url}}{% endif %}\n- Category: #article{% endif %}\n\n{% if is_new_article -%}## Highlights{%- endif %}\n{% for highlight in highlights -%}- {{highlight.text}} — [Updated on {{highlight.updated}}]({{highlight.incontext}}) {% if \'Private\' != highlight.group %} — Group: #{{highlight.group| replace(" ", "-")}}{%- endif %}\n{% if highlight.tags | length %}   - Tags: {% for tag in highlight.tags -%} #{{tag | replace(" ", "-")+" "}}{%- endfor %}{%- endif %}\n{% if highlight.annotation %}   - Annotation: {{highlight.annotation}}{%- endif -%}{%- endfor -%}'},506:e=>{"use strict";e.exports='<svg width="100" height="100" viewBox="0 0 32 37">\n    <path fill="currentColor" d="M1 16v15h5.4c4.6 0 5.8.4 7.4 2.5l2 2.5 2-2.4c1.5-2 3-2.5 7.3-2.8l5.4-.3v-29l-14.7-.3L1 .9V16zm8-6.4c0 3.4.2 3.6 2.5 3 4.8-1.2 6.5.8 6.5 7.4 0 4.7-.3 6-1.5 6-1 0-1.5-1-1.5-3.4 0-4.4-.9-6.6-2.6-6.6-1.6 0-3.4 3.9-3.4 7.6 0 1.5-.6 2.4-1.5 2.4C6.3 26 6 24.2 6 16S6.3 6 7.5 6C8.6 6 9 7.1 9 9.6zm17.8 14.2c.3 1.6-.2 2.2-1.7 2.2-2.4 0-3.5-1.5-2.7-3.6.9-2.3 4-1.3 4.4 1.4z" />\n</svg>'},626:e=>{"use strict";e.exports='Configure how {{created}} and {{updated}} timestamps in the Nunjucks template will be formatted.\n<br>\nFor more syntax, refer to the (<a href="https://momentjs.com/docs/#/displaying/format/">format reference</a>).'},317:e=>{"use strict";e.exports='Template (<a href="https://mozilla.github.io/nunjucks/">Nunjucks</a>) for\nrendering every synced Hypothesis highlights & annotations.\n\n<p>\n  <b>Available variables to use</b>\n</p>\n\nArticle Metadata\n<ul>\n  <li><span class="u-pop">{{is_new_article}}</span> - New file indicator</li>\n  <li><span class="u-pop">{{title}}</span> - Title</li>\n  <li><span class="u-pop">{{author}}</span> - Author</li>\n  <li><span class="u-pop">{{url}}</span> - Link to source</li>\n  <li><span class="u-pop">{{highlights}}</span> - List of your Highlights</li>\n</ul>\n\nHighlight\n<ul>\n  <li><span class="u-pop">{{id}}</span> - Unique Id</li>\n  <li><span class="u-pop">{{text}}</span> - Text</li>\n  <li><span class="u-pop">{{color}}</span> - Highlight color</li>\n  <li><span class="u-pop">{{incontext}}</span> - Link to Highlight in context</li>\n  <li><span class="u-pop">{{created}}</span> - Created on </li>\n  <li><span class="u-pop">{{updated}}</span> - Updated on</li>\n  <li><span class="u-pop">{{user}}</span> - Username</li>\n  <li><span class="u-pop">{{group}}</span> - Group name</li>\n</ul>\n\nAnnotation\n<ul>\n  <li><span class="u-pop">{{annotation}}</span> - Annotation</li>\n  <li><span class="u-pop">{{tags}}</span> - List of tags</li>\n</ul>'},113:e=>{"use strict";e.exports=require("crypto")}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,loaded:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};(()=>{"use strict";n.r(i),n.d(i,{default:()=>dn});const e=require("obsidian");var t=n(317),r=n(626),o=n(40),s=n.n(o);function a(){}function l(e,t){for(const n in t)e[n]=t[n];return e}function c(e){return e()}function u(){return Object.create(null)}function h(e){e.forEach(c)}function p(e){return"function"==typeof e}function f(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function d(e){return 0===Object.keys(e).length}function m(e){let t;return function(e,...t){if(null==e)return a;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}(e,(e=>t=e))(),t}function v(e,t,n,i){return e[1]&&i?l(n.ctx.slice(),e[1](i(t))):n.ctx}new Set;let g,y,b=!1;function _(e,t){e.appendChild(t)}function w(e,t,n){const i=function(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}(e);if(!i.getElementById(t)){const e=E("style");e.id=t,e.textContent=n,function(e,t){_(e.head||e,t)}(i,e)}}function x(e,t,n){e.insertBefore(t,n||null)}function k(e){e.parentNode.removeChild(e)}function S(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function E(e){return document.createElement(e)}function O(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function L(e){return document.createTextNode(e)}function T(){return L(" ")}function A(){return L("")}function C(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function $(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function I(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const i in t)null==t[i]?e.removeAttribute(i):"style"===i?e.style.cssText=t[i]:"__value"===i?e.value=e[i]=t[i]:n[i]&&n[i].set?e[i]=t[i]:$(e,i,t[i])}function N(e,t,n){t in e?e[t]="boolean"==typeof e[t]&&""===n||n:$(e,t,n)}function F(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function B(e,t){e.value=null==t?"":t}function j(e,t,n,i){e.style.setProperty(t,n,i?"important":"")}function P(){if(void 0===g){g=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){g=!0}}return g}function M(e,t,n){e.classList[n?"add":"remove"](t)}class R{constructor(){this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.e=E(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)x(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(k)}}function H(e){y=e}function D(){if(!y)throw new Error("Function called outside component initialization");return y}function K(e){D().$$.before_update.push(e)}function V(e){D().$$.on_mount.push(e)}function U(){const e=D();return(t,n)=>{const i=e.$$.callbacks[t];if(i){const r=function(e,t,n=!1){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,!1,t),i}(t,n);i.slice().forEach((t=>{t.call(e,r)}))}}}new Set;const G=[],W=[],z=[],q=[],Y=Promise.resolve();let J=!1;function X(){J||(J=!0,Y.then(ie))}function Z(){return X(),Y}function Q(e){z.push(e)}function ee(e){q.push(e)}let te=!1;const ne=new Set;function ie(){if(!te){te=!0;do{for(let e=0;e<G.length;e+=1){const t=G[e];H(t),re(t.$$)}for(H(null),G.length=0;W.length;)W.pop()();for(let e=0;e<z.length;e+=1){const t=z[e];ne.has(t)||(ne.add(t),t())}z.length=0}while(G.length);for(;q.length;)q.pop()();J=!1,te=!1,ne.clear()}}function re(e){if(null!==e.fragment){e.update(),h(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Q)}}const oe=new Set;let se,ae;function le(){se={r:0,c:[],p:se}}function ce(){se.r||h(se.c),se=se.p}function ue(e,t){e&&e.i&&(oe.delete(e),e.i(t))}function he(e,t,n,i){if(e&&e.o){if(oe.has(e))return;oe.add(e),se.c.push((()=>{oe.delete(e),i&&(n&&e.d(1),i())})),e.o(t)}}function pe(e,t){he(e,1,1,(()=>{t.delete(e.key)}))}function fe(e,t){const n={},i={},r={$$scope:1};let o=e.length;for(;o--;){const s=e[o],a=t[o];if(a){for(const e in s)e in a||(i[e]=1);for(const e in a)r[e]||(n[e]=a[e],r[e]=1);e[o]=a}else for(const e in s)r[e]=1}for(const e in i)e in n||(n[e]=void 0);return n}function de(e){return"object"==typeof e&&null!==e?e:{}}function me(e,t,n){const i=e.$$.props[t];void 0!==i&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function ve(e){e&&e.c()}function ge(e,t,n,i){const{fragment:r,on_mount:o,on_destroy:s,after_update:a}=e.$$;r&&r.m(t,n),i||Q((()=>{const t=o.map(c).filter(p);s?s.push(...t):h(t),e.$$.on_mount=[]})),a.forEach(Q)}function ye(e,t){const n=e.$$;null!==n.fragment&&(h(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function be(e,t,n,i,r,o,s,l=[-1]){const c=y;H(e);const p=e.$$={fragment:null,ctx:null,props:o,update:a,not_equal:r,bound:u(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:u(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};s&&s(p.root);let f=!1;if(p.ctx=n?n(e,t.props||{},((t,n,...i)=>{const o=i.length?i[0]:n;return p.ctx&&r(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),f&&function(e,t){-1===e.$$.dirty[0]&&(G.push(e),X(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(e,t)),n})):[],p.update(),f=!0,h(p.before_update),p.fragment=!!i&&i(p.ctx),t.target){if(t.hydrate){b=!0;const e=(d=t.target,Array.from(d.childNodes));p.fragment&&p.fragment.l(e),e.forEach(k)}else p.fragment&&p.fragment.c();t.intro&&ue(e.$$.fragment),ge(e,t.target,t.anchor,t.customElement),b=!1,ie()}var d;H(c)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(ae=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:e}=this.$$;this.$$.on_disconnect=e.map(c).filter(p);for(const e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(e,t,n){this[e]=n}disconnectedCallback(){h(this.$$.on_disconnect)}$destroy(){ye(this,1),this.$destroy=a}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!d(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}});class _e{$destroy(){ye(this,1),this.$destroy=a}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){this.$$set&&!d(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const we=[];function xe(e,t=a){let n;const i=new Set;function r(t){if(f(e,t)&&(e=t,n)){const t=!we.length;for(const t of i)t[1](),we.push(t,e);if(t){for(let e=0;e<we.length;e+=2)we[e][0](we[e+1]);we.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(o,s=a){const l=[o,s];return i.add(l),1===i.size&&(n=t(r)||a),o(e),()=>{i.delete(l),0===i.size&&(n(),n=null)}}}}var ke=n(985),Se=n.n(ke);class Ee{constructor(e,t){this.baseUrl="https://hypothes.is/api",this.token=e,this.userid=t}getHeaders(){return{AUTHORIZATION:`Bearer ${this.token}`,Accept:"application/json"}}async getProfile(){let t,n;try{t=await fetch(`${this.baseUrl}/profile`,{headers:Object.assign({},this.getHeaders())})}catch(t){return new e.Notice("Authorization failed. Please check your API token and try again."),void console.error("Failed to fetch profile : ",t)}return t&&t.ok?(n=await t.json(),n.userid?n.userid:void new e.Notice("User not found. Please check your API token and try again.")):(new e.Notice("Authorization failed. Please check your API token and try again."),void console.error("Failed to fetch profile : ",t))}async getHighlights(t){let n,i=1e3,r=!0,o=[];const s=t?`&search_after=${e.moment.utc(t).format()}`:"";for(let a=0;a<i;){try{n=await fetch(`${this.baseUrl}/search?user=${this.userid}&offset=${a}&limit=200&sort=updated&order=asc`+s,{headers:Object.assign({},this.getHeaders())})}catch(t){return new e.Notice("Error occurs. Please check your API token and try again."),void console.log("Failed to fetch highlights : ",t)}if(!n||!n.ok)return new e.Notice("Sync failed. Please check your API token and try again."),void console.log("Failed to fetch highlights : ",n);{const e=await n.json();if(!e.rows.length)break;if(r&&e.total<=i&&(i=e.total,r=!r),a+=e.rows.length,o=[...o,...e.rows],t)break}}return o}async getHighlightWithUri(t){let n,i=[];try{n=await fetch(`${this.baseUrl}/search?user=${this.userid}&limit=200&uri=${t}`,{headers:Object.assign({},this.getHeaders())})}catch(t){return new e.Notice("Error occurs. Please check your API token and try again."),void console.log("Failed to fetch highlights : ",t)}return n&&n.ok?(i=(await n.json()).rows,i):(new e.Notice("Sync failed. Please check your API token and try again."),void console.log("Failed to fetch highlights : ",n))}async getGroups(){let t,n=[];try{t=await fetch(`${this.baseUrl}/groups`,{headers:Object.assign({},this.getHeaders())})}catch(t){return new e.Notice("Error occurs. Please check your API token and try again."),void console.log("Failed to fetch groups : ",t)}return t&&t.ok?(n=await t.json(),n):(new e.Notice("Sync failed. Please check your API token and try again."),void console.log("Failed to fetch groups : ",t))}}class Oe{async setToken(t){if(null===t||0==t.length)await Te.actions.disconnect,new e.Notice("Please enter API token to connect");else{const e=new Ee(t),n=await e.getProfile();n&&void 0!==n&&await Te.actions.connect(t,n)}}}const Le={token:"",user:"",highlightsFolder:"/",isConnected:!1,template:n(995),syncOnBoot:!1,autoSyncInterval:0,dateTimeFormat:"YYYY-MM-DD HH:mm:ss",history:{totalArticles:0,totalHighlights:0},syncedFiles:[],groups:[]},Te=(()=>{const e=xe(Le);let t;return e.subscribe((async e=>{if(t){const n=Object.assign(Object.assign({},e),{lastSyncDate:e.lastSyncDate?e.lastSyncDate.toJSON():void 0});await t.saveData(n)}})),{subscribe:e.subscribe,initialise:async n=>{const i=Object.assign({},Le,await n.loadData()),r=Object.assign(Object.assign({},i),{lastSyncDate:i.lastSyncDate?new Date(i.lastSyncDate):void 0});e.set(r),t=n},actions:{setHighlightsFolder:t=>{e.update((e=>(e.highlightsFolder=t,e)))},resetSyncHistory:()=>{e.update((e=>(e.history.totalArticles=0,e.history.totalHighlights=0,e.lastSyncDate=void 0,e.syncedFiles=[],e)))},setSyncDateToNow:()=>{e.update((e=>(e.lastSyncDate=new Date,e)))},connect:async(t,n)=>{e.update((e=>(e.isConnected=!0,e.token=t,e.user=n,e)))},disconnect:()=>{e.update((e=>(e.isConnected=!1,e.user=void 0,e.token=void 0,e.groups=[],e)))},setAutoSyncInterval:t=>{e.update((e=>(e.autoSyncInterval=t,e)))},setTemplate:t=>{e.update((e=>(e.template=t,e)))},setSyncOnBoot:t=>{e.update((e=>(e.syncOnBoot=t,e)))},incrementHistory:t=>{e.update((e=>(e.history.totalArticles+=t.totalArticles,e.history.totalHighlights+=t.totalHighlights,e)))},setDateTimeFormat:t=>{e.update((e=>(e.dateTimeFormat=t,e)))},addSyncedFile:t=>{e.update((e=>{const n=new Set,i=[...e.syncedFiles,t];return e.syncedFiles=i.filter((e=>{const t=n.has(e.filename);return n.add(e.filename),!t})),e}))},setGroups:async t=>{e.update((e=>(e.groups=t,e)))},resetGroups:async()=>{e.update((e=>(e.groups=[],e)))}}}})(),Ae=(()=>{const e=xe({status:"idle",jobs:[]}),t=()=>{e.update((e=>(e.status="idle",e.errorMessage=void 0,e.jobs=[],e)))},n=(t,n)=>{e.update((e=>(e.jobs.filter((e=>e.articleId===t.id))[0].status=n,"done"===n&&Te.actions.setSyncDateToNow(),e)))};return{subscribe:e.subscribe,actions:{startSync:()=>{e.update((e=>(e.status="loading",e.errorMessage=void 0,e.jobs=[],e)))},errorSync:t=>{e.update((e=>(e.status="error",e.errorMessage=t,e)))},completeSync:n=>{e.update((e=>(Te.actions.setSyncDateToNow(),Te.actions.incrementHistory({totalArticles:n.newArticlesCount,totalHighlights:n.newHighlightsCount}),t(),e)))},setJobs:t=>{e.update((e=>{for(const n of Object.values(t))e.jobs.push({status:"idle",articleId:n.id});return e}))},startJob:e=>n(e,"in-progress"),completeJob:e=>n(e,"done"),errorJob:e=>n(e,"error"),reset:t}}})();class Ce{constructor(){Se().configure({autoescape:!1})}validate(e){try{return Se().renderString(e,{}),!0}catch(e){return!1}}render(e,t=!0){const{metadata:n,highlights:i}=e,r=Object.assign(Object.assign({is_new_article:t},n),{highlights:i.map((e=>Object.assign({},e)))}),o=m(Te).template;return Se().renderString(o,r)}}function $e(e){let t,n,i,r,o,s,l,c;return{c(){t=E("div"),t.innerHTML='<div class="setting-item-info"><div class="setting-item-name">Hypothesis API Token</div> \n        <div class="setting-item-description"><span>Log into your\n                <a href="https://hypothes.is/account/developer">Hypothes.is Developer settings</a> to retrieve API\n                token</span></div></div>',n=T(),i=E("div"),r=E("input"),o=T(),s=E("button"),s.textContent="Save",$(t,"class","setting-item"),$(r,"type","text"),$(r,"placeholder","API token"),$(r,"size","40"),$(s,"class","mod-cta"),j(s,"float","right"),$(i,"class","setting-item-info")},m(a,u){x(a,t,u),x(a,n,u),x(a,i,u),_(i,r),e[2](r),_(i,o),_(i,s),l||(c=C(s,"click",e[3]),l=!0)},p:a,i:a,o:a,d(r){r&&k(t),r&&k(n),r&&k(i),e[2](null),l=!1,c()}}}function Ie(e,t,n){let i,{onSubmit:r}=t;return e.$$set=e=>{"onSubmit"in e&&n(0,r=e.onSubmit)},[r,i,function(e){W[e?"unshift":"push"]((()=>{i=e,n(1,i)}))},()=>r(i.value)]}const Ne=class extends _e{constructor(e){super(),be(this,e,Ie,$e,f,{onSubmit:0})}};class Fe extends e.Modal{constructor(e,t){super(e),this.tokenManager=t,this.waitForClose=new Promise((e=>this.resolvePromise=e)),this.titleEl.innerText="Enter Hypothesis API token",this.modalContent=new Ne({target:this.contentEl,props:{onSubmit:async e=>{await this.tokenManager.setToken(e),this.close()}}}),this.open()}onClose(){super.onClose(),this.modalContent.$destroy(),this.resolvePromise()}}function Be(e){w(e,"svelte-3e0qet",".item.svelte-3e0qet{cursor:default;height:var(--height, 42px);line-height:var(--height, 42px);padding:var(--itemPadding, 0 20px);color:var(--itemColor, inherit);text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.groupHeader.svelte-3e0qet{text-transform:var(--groupTitleTextTransform, uppercase)}.groupItem.svelte-3e0qet{padding-left:var(--groupItemPaddingLeft, 40px)}.item.svelte-3e0qet:active{background:var(--itemActiveBackground, #b9daff)}.item.active.svelte-3e0qet{background:var(--itemIsActiveBG, #007aff);color:var(--itemIsActiveColor, #fff)}.item.notSelectable.svelte-3e0qet{color:var(--itemIsNotSelectableColor, #999)}.item.first.svelte-3e0qet{border-radius:var(--itemFirstBorderRadius, 4px 4px 0 0)}.item.hover.svelte-3e0qet:not(.active){background:var(--itemHoverBG, #e7f2ff);color:var(--itemHoverColor, inherit)}")}function je(e){let t,n,i=e[0](e[1],e[2])+"";return{c(){t=E("div"),$(t,"class",n="item "+e[3]+" svelte-3e0qet")},m(e,n){x(e,t,n),t.innerHTML=i},p(e,[r]){7&r&&i!==(i=e[0](e[1],e[2])+"")&&(t.innerHTML=i),8&r&&n!==(n="item "+e[3]+" svelte-3e0qet")&&$(t,"class",n)},i:a,o:a,d(e){e&&k(t)}}}function Pe(e,t,n){let{isActive:i=!1}=t,{isFirst:r=!1}=t,{isHover:o=!1}=t,{isSelectable:s=!1}=t,{getOptionLabel:a}=t,{item:l}=t,{filterText:c=""}=t,u="";return e.$$set=e=>{"isActive"in e&&n(4,i=e.isActive),"isFirst"in e&&n(5,r=e.isFirst),"isHover"in e&&n(6,o=e.isHover),"isSelectable"in e&&n(7,s=e.isSelectable),"getOptionLabel"in e&&n(0,a=e.getOptionLabel),"item"in e&&n(1,l=e.item),"filterText"in e&&n(2,c=e.filterText)},e.$$.update=()=>{if(242&e.$$.dirty){const e=[];i&&e.push("active"),r&&e.push("first"),o&&e.push("hover"),l.isGroupHeader&&e.push("groupHeader"),l.isGroupItem&&e.push("groupItem"),s||e.push("notSelectable"),n(3,u=e.join(" "))}},[a,l,c,u,i,r,o,s]}const Me=class extends _e{constructor(e){super(),be(this,e,Pe,je,f,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2},Be)}};function Re(e){w(e,"svelte-1uyqfml",".listContainer.svelte-1uyqfml{box-shadow:var(--listShadow, 0 2px 3px 0 rgba(44, 62, 80, 0.24));border-radius:var(--listBorderRadius, 4px);max-height:var(--listMaxHeight, 250px);overflow-y:auto;background:var(--listBackground, #fff);border:var(--listBorder, none);position:var(--listPosition, absolute);z-index:var(--listZIndex, 2);width:100%;left:var(--listLeft, 0);right:var(--listRight, 0)}.virtualList.svelte-1uyqfml{height:var(--virtualListHeight, 200px)}.listGroupTitle.svelte-1uyqfml{color:var(--groupTitleColor, #8f8f8f);cursor:default;font-size:var(--groupTitleFontSize, 12px);font-weight:var(--groupTitleFontWeight, 600);height:var(--height, 42px);line-height:var(--height, 42px);padding:var(--groupTitlePadding, 0 20px);text-overflow:ellipsis;overflow-x:hidden;white-space:nowrap;text-transform:var(--groupTitleTextTransform, uppercase)}.empty.svelte-1uyqfml{text-align:var(--listEmptyTextAlign, center);padding:var(--listEmptyPadding, 20px 0);color:var(--listEmptyColor, #78848f)}")}function He(e,t,n){const i=e.slice();return i[41]=t[n],i[42]=n,i}function De(e){let t,n,i=e[1],r=[];for(let t=0;t<i.length;t+=1)r[t]=ze(He(e,i,t));const o=e=>he(r[e],1,1,(()=>{r[e]=null}));let s=null;return i.length||(s=Ve(e)),{c(){for(let e=0;e<r.length;e+=1)r[e].c();t=A(),s&&s.c()},m(e,i){for(let t=0;t<r.length;t+=1)r[t].m(e,i);x(e,t,i),s&&s.m(e,i),n=!0},p(e,n){if(114390&n[0]){let a;for(i=e[1],a=0;a<i.length;a+=1){const o=He(e,i,a);r[a]?(r[a].p(o,n),ue(r[a],1)):(r[a]=ze(o),r[a].c(),ue(r[a],1),r[a].m(t.parentNode,t))}for(le(),a=i.length;a<r.length;a+=1)o(a);ce(),!i.length&&s?s.p(e,n):i.length?s&&(s.d(1),s=null):(s=Ve(e),s.c(),s.m(t.parentNode,t))}},i(e){if(!n){for(let e=0;e<i.length;e+=1)ue(r[e]);n=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<r.length;e+=1)he(r[e]);n=!1},d(e){S(r,e),e&&k(t),s&&s.d(e)}}}function Ke(e){let t,n,i;var r=e[3];function o(e){return{props:{items:e[1],itemHeight:e[8],$$slots:{default:[qe,({item:e,i:t})=>({41:e,42:t}),({item:e,i:t})=>[0,(e?1024:0)|(t?2048:0)]]},$$scope:{ctx:e}}}}return r&&(t=new r(o(e))),{c(){t&&ve(t.$$.fragment),n=A()},m(e,r){t&&ge(t,e,r),x(e,n,r),i=!0},p(e,i){const s={};if(2&i[0]&&(s.items=e[1]),256&i[0]&&(s.itemHeight=e[8]),9814&i[0]|11264&i[1]&&(s.$$scope={dirty:i,ctx:e}),r!==(r=e[3])){if(t){le();const e=t;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}r?(t=new r(o(e)),ve(t.$$.fragment),ue(t.$$.fragment,1),ge(t,n.parentNode,n)):t=null}else r&&t.$set(s)},i(e){i||(t&&ue(t.$$.fragment,e),i=!0)},o(e){t&&he(t.$$.fragment,e),i=!1},d(e){e&&k(n),t&&ye(t,e)}}}function Ve(e){let t,n=!e[11]&&Ue(e);return{c(){n&&n.c(),t=A()},m(e,i){n&&n.m(e,i),x(e,t,i)},p(e,i){e[11]?n&&(n.d(1),n=null):n?n.p(e,i):(n=Ue(e),n.c(),n.m(t.parentNode,t))},d(e){n&&n.d(e),e&&k(t)}}}function Ue(e){let t,n;return{c(){t=E("div"),n=L(e[12]),$(t,"class","empty svelte-1uyqfml")},m(e,i){x(e,t,i),_(t,n)},p(e,t){4096&t[0]&&F(n,e[12])},d(e){e&&k(t)}}}function Ge(e){let t,n,i,r,o,s;var a=e[4];function l(e){return{props:{item:e[41],filterText:e[13],getOptionLabel:e[6],isFirst:Xe(e[42]),isActive:Je(e[41],e[9],e[10]),isHover:Ze(e[2],e[41],e[42],e[1]),isSelectable:Qe(e[41])}}}function c(){return e[29](e[42])}function u(){return e[30](e[42])}function p(...t){return e[31](e[41],e[42],...t)}return a&&(n=new a(l(e))),{c(){t=E("div"),n&&ve(n.$$.fragment),i=T(),$(t,"class","listItem"),$(t,"tabindex","-1")},m(e,a){x(e,t,a),n&&ge(n,t,null),_(t,i),r=!0,o||(s=[C(t,"mouseover",c),C(t,"focus",u),C(t,"click",p)],o=!0)},p(r,o){e=r;const s={};if(2&o[0]&&(s.item=e[41]),8192&o[0]&&(s.filterText=e[13]),64&o[0]&&(s.getOptionLabel=e[6]),1538&o[0]&&(s.isActive=Je(e[41],e[9],e[10])),6&o[0]&&(s.isHover=Ze(e[2],e[41],e[42],e[1])),2&o[0]&&(s.isSelectable=Qe(e[41])),a!==(a=e[4])){if(n){le();const e=n;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}a?(n=new a(l(e)),ve(n.$$.fragment),ue(n.$$.fragment,1),ge(n,t,i)):n=null}else a&&n.$set(s)},i(e){r||(n&&ue(n.$$.fragment,e),r=!0)},o(e){n&&he(n.$$.fragment,e),r=!1},d(e){e&&k(t),n&&ye(n),o=!1,h(s)}}}function We(e){let t,n,i=e[7](e[41])+"";return{c(){t=E("div"),n=L(i),$(t,"class","listGroupTitle svelte-1uyqfml")},m(e,i){x(e,t,i),_(t,n)},p(e,t){130&t[0]&&i!==(i=e[7](e[41])+"")&&F(n,i)},i:a,o:a,d(e){e&&k(t)}}}function ze(e){let t,n,i,r;const o=[We,Ge],s=[];function a(e,t){return e[41].isGroupHeader&&!e[41].isSelectable?0:1}return t=a(e),n=s[t]=o[t](e),{c(){n.c(),i=A()},m(e,n){s[t].m(e,n),x(e,i,n),r=!0},p(e,r){let l=t;t=a(e),t===l?s[t].p(e,r):(le(),he(s[l],1,1,(()=>{s[l]=null})),ce(),n=s[t],n?n.p(e,r):(n=s[t]=o[t](e),n.c()),ue(n,1),n.m(i.parentNode,i))},i(e){r||(ue(n),r=!0)},o(e){he(n),r=!1},d(e){s[t].d(e),e&&k(i)}}}function qe(e){let t,n,i,r,o;var s=e[4];function a(e){return{props:{item:e[41],filterText:e[13],getOptionLabel:e[6],isFirst:Xe(e[42]),isActive:Je(e[41],e[9],e[10]),isHover:Ze(e[2],e[41],e[42],e[1]),isSelectable:Qe(e[41])}}}function l(){return e[26](e[42])}function c(){return e[27](e[42])}function u(...t){return e[28](e[41],e[42],...t)}return s&&(n=new s(a(e))),{c(){t=E("div"),n&&ve(n.$$.fragment),$(t,"class","listItem")},m(e,s){x(e,t,s),n&&ge(n,t,null),i=!0,r||(o=[C(t,"mouseover",l),C(t,"focus",c),C(t,"click",u)],r=!0)},p(i,r){e=i;const o={};if(1024&r[1]&&(o.item=e[41]),8192&r[0]&&(o.filterText=e[13]),64&r[0]&&(o.getOptionLabel=e[6]),2048&r[1]&&(o.isFirst=Xe(e[42])),1536&r[0]|1024&r[1]&&(o.isActive=Je(e[41],e[9],e[10])),6&r[0]|3072&r[1]&&(o.isHover=Ze(e[2],e[41],e[42],e[1])),1024&r[1]&&(o.isSelectable=Qe(e[41])),s!==(s=e[4])){if(n){le();const e=n;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}s?(n=new s(a(e)),ve(n.$$.fragment),ue(n.$$.fragment,1),ge(n,t,null)):n=null}else s&&n.$set(o)},i(e){i||(n&&ue(n.$$.fragment,e),i=!0)},o(e){n&&he(n.$$.fragment,e),i=!1},d(e){e&&k(t),n&&ye(n),r=!1,h(o)}}}function Ye(e){let t,n,i,r,o,s;const a=[Ke,De],l=[];function c(e,t){return e[5]?0:1}return n=c(e),i=l[n]=a[n](e),{c(){t=E("div"),i.c(),$(t,"class","listContainer svelte-1uyqfml"),$(t,"style",e[14]),M(t,"virtualList",e[5])},m(i,a){x(i,t,a),l[n].m(t,null),e[32](t),r=!0,o||(s=[C(window,"keydown",e[17]),C(window,"resize",e[18])],o=!0)},p(e,o){let s=n;n=c(e),n===s?l[n].p(e,o):(le(),he(l[s],1,1,(()=>{l[s]=null})),ce(),i=l[n],i?i.p(e,o):(i=l[n]=a[n](e),i.c()),ue(i,1),i.m(t,null)),(!r||16384&o[0])&&$(t,"style",e[14]),32&o[0]&&M(t,"virtualList",e[5])},i(e){r||(ue(i),r=!0)},o(e){he(i),r=!1},d(i){i&&k(t),l[n].d(),e[32](null),o=!1,h(s)}}}function Je(e,t,n){return t&&t[n]===e[n]}function Xe(e){return 0===e}function Ze(e,t,n,i){return Qe(t)&&(e===n||1===i.length)}function Qe(e){return e.isGroupHeader&&e.isSelectable||e.selectable||!e.hasOwnProperty("selectable")}function et(e,t,n){const i=U();let r,o,{container:s}=t,{VirtualList:a=null}=t,{Item:l=Me}=t,{isVirtualList:c=!1}=t,{items:u=[]}=t,{labelIdentifier:h="label"}=t,{getOptionLabel:p=((e,t)=>{if(e)return e.isCreator?`Create "${t}"`:e[h]})}=t,{getGroupHeaderLabel:f=null}=t,{itemHeight:d=40}=t,{hoverItemIndex:m=0}=t,{value:v}=t,{optionIdentifier:g="value"}=t,{hideEmptyState:y=!1}=t,{noOptionsMessage:b="No options"}=t,{isMulti:_=!1}=t,{activeItemIndex:w=0}=t,{filterText:x=""}=t,{parent:k=null}=t,{listPlacement:S=null}=t,{listAutoWidth:E=null}=t,{listOffset:O=5}=t,L=0,T=!1;function A(e){e.isCreator||i("itemSelected",e)}function C(e){T||n(2,m=e)}function $(e){const{item:t,i:r,event:o}=e;if(o.stopPropagation(),v&&!_&&v[g]===t[g])return I();t.isCreator?i("itemCreated",x):Qe(t)&&(n(19,w=r),n(2,m=r),A(t))}function I(){i("closeList")}async function N(e){if(c)return;let t=!0;for(;t;)e>0&&m===u.length-1?n(2,m=0):n(2,e<0&&0===m?m=u.length-1:m+=e),t=!Qe(u[m]);await Z(),F("hover")}function F(e){if(c||!s)return;let t;const i=s.querySelector(`.listItem .${e}`);i&&(t=s.getBoundingClientRect().bottom-i.getBoundingClientRect().bottom),n(0,s.scrollTop-=t,s)}function B(){const{top:e,height:t,width:i}=k.getBoundingClientRect();n(14,o=""),n(14,o+=`min-width:${i}px;width:${E?"auto":"100%"};`),"top"===S||"auto"===S&&function(e){const t=e.getBoundingClientRect(),n={};return n.top=t.top<0,n.left=t.left<0,n.bottom=t.bottom>(window.innerHeight||document.documentElement.clientHeight),n.right=t.right>(window.innerWidth||document.documentElement.clientWidth),n.any=n.top||n.left||n.bottom||n.right,n}(k).bottom?n(14,o+=`bottom:${t+O}px;`):n(14,o+=`top:${t+O}px;`)}return V((()=>{if(u.length>0&&!_&&v){const e=u.findIndex((e=>e[g]===v[g]));e&&n(2,m=e)}F("active"),s.addEventListener("scroll",(()=>{clearTimeout(L),L=setTimeout((()=>{T=!1}),100)}),!1)})),K((()=>{u||n(1,u=[]),u!==r&&u.length>0&&n(2,m=0),r=u})),e.$$set=e=>{"container"in e&&n(0,s=e.container),"VirtualList"in e&&n(3,a=e.VirtualList),"Item"in e&&n(4,l=e.Item),"isVirtualList"in e&&n(5,c=e.isVirtualList),"items"in e&&n(1,u=e.items),"labelIdentifier"in e&&n(20,h=e.labelIdentifier),"getOptionLabel"in e&&n(6,p=e.getOptionLabel),"getGroupHeaderLabel"in e&&n(7,f=e.getGroupHeaderLabel),"itemHeight"in e&&n(8,d=e.itemHeight),"hoverItemIndex"in e&&n(2,m=e.hoverItemIndex),"value"in e&&n(9,v=e.value),"optionIdentifier"in e&&n(10,g=e.optionIdentifier),"hideEmptyState"in e&&n(11,y=e.hideEmptyState),"noOptionsMessage"in e&&n(12,b=e.noOptionsMessage),"isMulti"in e&&n(21,_=e.isMulti),"activeItemIndex"in e&&n(19,w=e.activeItemIndex),"filterText"in e&&n(13,x=e.filterText),"parent"in e&&n(22,k=e.parent),"listPlacement"in e&&n(23,S=e.listPlacement),"listAutoWidth"in e&&n(24,E=e.listAutoWidth),"listOffset"in e&&n(25,O=e.listOffset)},e.$$.update=()=>{4194305&e.$$.dirty[0]&&k&&s&&B()},[s,u,m,a,l,c,p,f,d,v,g,y,b,x,o,C,$,function(e){switch(e.key){case"Escape":e.preventDefault(),I();break;case"ArrowDown":e.preventDefault(),u.length&&N(1);break;case"ArrowUp":e.preventDefault(),u.length&&N(-1);break;case"Enter":if(e.preventDefault(),0===u.length)break;const t=u[m];if(v&&!_&&v[g]===t[g]){I();break}t.isCreator?i("itemCreated",x):(n(19,w=m),A(u[m]));break;case"Tab":if(e.preventDefault(),0===u.length)return I();if(v&&v[g]===u[m][g])return I();n(19,w=m),A(u[m])}},B,w,h,_,k,S,E,O,e=>C(e),e=>C(e),(e,t,n)=>$({item:e,i:t,event:n}),e=>C(e),e=>C(e),(e,t,n)=>$({item:e,i:t,event:n}),function(e){W[e?"unshift":"push"]((()=>{s=e,n(0,s)}))}]}const tt=class extends _e{constructor(e){super(),be(this,e,et,Ye,f,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},Re,[-1,-1])}};function nt(e){w(e,"svelte-pu1q1n",".selection.svelte-pu1q1n{text-overflow:ellipsis;overflow-x:hidden;white-space:nowrap}")}function it(e){let t,n=e[0](e[1])+"";return{c(){t=E("div"),$(t,"class","selection svelte-pu1q1n")},m(e,i){x(e,t,i),t.innerHTML=n},p(e,[i]){3&i&&n!==(n=e[0](e[1])+"")&&(t.innerHTML=n)},i:a,o:a,d(e){e&&k(t)}}}function rt(e,t,n){let{getSelectionLabel:i}=t,{item:r}=t;return e.$$set=e=>{"getSelectionLabel"in e&&n(0,i=e.getSelectionLabel),"item"in e&&n(1,r=e.item)},[i,r]}const ot=class extends _e{constructor(e){super(),be(this,e,rt,it,f,{getSelectionLabel:0,item:1},nt)}};function st(e){w(e,"svelte-liu9pa",".multiSelectItem.svelte-liu9pa.svelte-liu9pa{background:var(--multiItemBG, #ebedef);margin:var(--multiItemMargin, 5px 5px 0 0);border-radius:var(--multiItemBorderRadius, 16px);height:var(--multiItemHeight, 32px);line-height:var(--multiItemHeight, 32px);display:flex;cursor:default;padding:var(--multiItemPadding, 0 10px 0 15px);max-width:100%}.multiSelectItem_label.svelte-liu9pa.svelte-liu9pa{margin:var(--multiLabelMargin, 0 5px 0 0);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.multiSelectItem.svelte-liu9pa.svelte-liu9pa:hover,.multiSelectItem.active.svelte-liu9pa.svelte-liu9pa{background-color:var(--multiItemActiveBG, #006fff);color:var(--multiItemActiveColor, #fff)}.multiSelectItem.disabled.svelte-liu9pa.svelte-liu9pa:hover{background:var(--multiItemDisabledHoverBg, #ebedef);color:var(--multiItemDisabledHoverColor, #c1c6cc)}.multiSelectItem_clear.svelte-liu9pa.svelte-liu9pa{border-radius:var(--multiClearRadius, 50%);background:var(--multiClearBG, #52616f);min-width:var(--multiClearWidth, 16px);max-width:var(--multiClearWidth, 16px);height:var(--multiClearHeight, 16px);position:relative;top:var(--multiClearTop, 8px);text-align:var(--multiClearTextAlign, center);padding:var(--multiClearPadding, 1px)}.multiSelectItem_clear.svelte-liu9pa.svelte-liu9pa:hover,.active.svelte-liu9pa .multiSelectItem_clear.svelte-liu9pa{background:var(--multiClearHoverBG, #fff)}.multiSelectItem_clear.svelte-liu9pa:hover svg.svelte-liu9pa,.active.svelte-liu9pa .multiSelectItem_clear svg.svelte-liu9pa{fill:var(--multiClearHoverFill, #006fff)}.multiSelectItem_clear.svelte-liu9pa svg.svelte-liu9pa{fill:var(--multiClearFill, #ebedef);vertical-align:top}")}function at(e,t,n){const i=e.slice();return i[9]=t[n],i[11]=n,i}function lt(e){let t,n,i;function r(...t){return e[6](e[11],...t)}return{c(){t=E("div"),t.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-liu9pa"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',$(t,"class","multiSelectItem_clear svelte-liu9pa")},m(e,o){x(e,t,o),n||(i=C(t,"click",r),n=!0)},p(t,n){e=t},d(e){e&&k(t),n=!1,i()}}}function ct(e){let t,n,i,r,o,s,a,l=e[4](e[9])+"",c=!e[2]&&!e[3]&&lt(e);function u(...t){return e[7](e[11],...t)}return{c(){t=E("div"),n=E("div"),i=T(),c&&c.c(),r=T(),$(n,"class","multiSelectItem_label svelte-liu9pa"),$(t,"class",o="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")},m(e,o){x(e,t,o),_(t,n),n.innerHTML=l,_(t,i),c&&c.m(t,null),_(t,r),s||(a=C(t,"click",u),s=!0)},p(i,s){e=i,17&s&&l!==(l=e[4](e[9])+"")&&(n.innerHTML=l),e[2]||e[3]?c&&(c.d(1),c=null):c?c.p(e,s):(c=lt(e),c.c(),c.m(t,r)),6&s&&o!==(o="multiSelectItem "+(e[1]===e[11]?"active":"")+" "+(e[2]?"disabled":"")+" svelte-liu9pa")&&$(t,"class",o)},d(e){e&&k(t),c&&c.d(),s=!1,a()}}}function ut(e){let t,n=e[0],i=[];for(let t=0;t<n.length;t+=1)i[t]=ct(at(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);x(e,t,n)},p(e,[r]){if(63&r){let o;for(n=e[0],o=0;o<n.length;o+=1){const s=at(e,n,o);i[o]?i[o].p(s,r):(i[o]=ct(s),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},i:a,o:a,d(e){S(i,e),e&&k(t)}}}function ht(e,t,n){const i=U();let{value:r=[]}=t,{activeValue:o}=t,{isDisabled:s=!1}=t,{multiFullItemClearable:a=!1}=t,{getSelectionLabel:l}=t;function c(e,t){t.stopPropagation(),i("multiItemClear",{i:e})}return e.$$set=e=>{"value"in e&&n(0,r=e.value),"activeValue"in e&&n(1,o=e.activeValue),"isDisabled"in e&&n(2,s=e.isDisabled),"multiFullItemClearable"in e&&n(3,a=e.multiFullItemClearable),"getSelectionLabel"in e&&n(4,l=e.getSelectionLabel)},[r,o,s,a,l,c,(e,t)=>c(e,t),(e,t)=>a?c(e,t):{}]}const pt=class extends _e{constructor(e){super(),be(this,e,ht,ut,f,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4},st)}};function ft(e){w(e,"svelte-g2cagw","svelte-virtual-list-viewport.svelte-g2cagw{position:relative;overflow-y:auto;-webkit-overflow-scrolling:touch;display:block}svelte-virtual-list-contents.svelte-g2cagw,svelte-virtual-list-row.svelte-g2cagw{display:block}svelte-virtual-list-row.svelte-g2cagw{overflow:hidden}")}function dt(e,t,n){const i=e.slice();return i[23]=t[n],i}const mt=e=>({item:32&e,i:32&e,hoverItemIndex:2&e}),vt=e=>({item:e[23].data,i:e[23].index,hoverItemIndex:e[1]});function gt(e,t){let n,i,r;const o=t[15].default,s=function(e,t,n,i){if(e){const r=v(e,t,n,i);return e[0](r)}}(o,t,t[14],vt),a=s||function(e){let t;return{c(){t=L("Missing template")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}();return{key:e,first:null,c(){n=E("svelte-virtual-list-row"),a&&a.c(),i=T(),N(n,"class","svelte-g2cagw"),this.first=n},m(e,t){x(e,n,t),a&&a.m(n,null),_(n,i),r=!0},p(e,n){t=e,s&&s.p&&(!r||16418&n)&&function(e,t,n,i,r,o){if(r){const s=v(t,n,i,o);e.p(s,r)}}(s,o,t,t[14],r?function(e,t,n,i){if(e[2]&&i){const r=e[2](i(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let i=0;i<n;i+=1)e[i]=t.dirty[i]|r[i];return e}return t.dirty|r}return t.dirty}(o,t[14],n,mt):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(t[14]),vt)},i(e){r||(ue(a,e),r=!0)},o(e){he(a,e),r=!1},d(e){e&&k(n),a&&a.d(e)}}}function yt(e){let t,n,i,r,o,s,a=[],l=new Map,c=e[5];const u=e=>e[23].index;for(let t=0;t<c.length;t+=1){let n=dt(e,c,t),i=u(n);l.set(i,a[t]=gt(i,n))}return{c(){t=E("svelte-virtual-list-viewport"),n=E("svelte-virtual-list-contents");for(let e=0;e<a.length;e+=1)a[e].c();j(n,"padding-top",e[6]+"px"),j(n,"padding-bottom",e[7]+"px"),N(n,"class","svelte-g2cagw"),j(t,"height",e[0]),N(t,"class","svelte-g2cagw"),Q((()=>e[18].call(t)))},m(l,c){x(l,t,c),_(t,n);for(let e=0;e<a.length;e+=1)a[e].m(n,null);e[16](n),e[17](t),i=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=E("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=P();let r;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=C(window,"message",(e=>{e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=()=>{r=C(n.contentWindow,"resize",t)}),_(e,n),()=>{(i||r&&n.contentWindow)&&r(),k(n)}}(t,e[18].bind(t)),r=!0,o||(s=C(t,"scroll",e[8]),o=!0)},p(e,[i]){16418&i&&(c=e[5],le(),a=function(e,t,n,i,r,o,s,a,l,c,u,h){let p=e.length,f=o.length,d=p;const m={};for(;d--;)m[e[d].key]=d;const v=[],g=new Map,y=new Map;for(d=f;d--;){const e=h(r,o,d),i=n(e);let a=s.get(i);a?a.p(e,t):(a=c(i,e),a.c()),g.set(i,v[d]=a),i in m&&y.set(i,Math.abs(d-m[i]))}const b=new Set,_=new Set;function w(e){ue(e,1),e.m(a,u),s.set(e.key,e),u=e.first,f--}for(;p&&f;){const t=v[f-1],n=e[p-1],i=t.key,r=n.key;t===n?(u=t.first,p--,f--):g.has(r)?!s.has(i)||b.has(i)?w(t):_.has(r)?p--:y.get(i)>y.get(r)?(_.add(i),w(t)):(b.add(r),p--):(l(n,s),p--)}for(;p--;){const t=e[p];g.has(t.key)||l(t,s)}for(;f;)w(v[f-1]);return v}(a,i,u,0,e,c,l,n,pe,gt,null,dt),ce()),(!r||64&i)&&j(n,"padding-top",e[6]+"px"),(!r||128&i)&&j(n,"padding-bottom",e[7]+"px"),(!r||1&i)&&j(t,"height",e[0])},i(e){if(!r){for(let e=0;e<c.length;e+=1)ue(a[e]);r=!0}},o(e){for(let e=0;e<a.length;e+=1)he(a[e]);r=!1},d(n){n&&k(t);for(let e=0;e<a.length;e+=1)a[e].d();e[16](null),e[17](null),i(),o=!1,s()}}}function bt(e,t,n){let i,r,o,s,a,l,{$$slots:c={},$$scope:u}=t,{items:h}=t,{height:p="100%"}=t,{itemHeight:f=40}=t,{hoverItemIndex:d=0}=t,{start:m=0}=t,{end:v=0}=t,g=[],y=0,b=0,_=0;return V((()=>{i=o.getElementsByTagName("svelte-virtual-list-row"),n(13,a=!0)})),e.$$set=e=>{"items"in e&&n(11,h=e.items),"height"in e&&n(0,p=e.height),"itemHeight"in e&&n(12,f=e.itemHeight),"hoverItemIndex"in e&&n(1,d=e.hoverItemIndex),"start"in e&&n(9,m=e.start),"end"in e&&n(10,v=e.end),"$$scope"in e&&n(14,u=e.$$scope)},e.$$.update=()=>{3584&e.$$.dirty&&n(5,s=h.slice(m,v).map(((e,t)=>({index:t+m,data:e})))),14340&e.$$.dirty&&a&&async function(e,t,o){const{scrollTop:s}=r;await Z();let a=b-s,c=m;for(;a<t&&c<e.length;){let e=i[c-m];e||(n(10,v=c+1),await Z(),e=i[c-m]),a+=g[c]=o||e.offsetHeight,c+=1}n(10,v=c);const u=e.length-v;l=(b+a)/v,n(7,_=u*l),g.length=e.length,r&&n(3,r.scrollTop=0,r)}(h,y,f)},[p,d,y,r,o,s,b,_,async function(){const{scrollTop:e}=r,t=m;for(let e=0;e<i.length;e+=1)g[m+e]=f||i[e].offsetHeight;let o=0,s=0;for(;o<h.length;){const t=g[o]||l;if(s+t>e){n(9,m=o),n(6,b=s);break}s+=t,o+=1}for(;o<h.length&&(s+=g[o]||l,o+=1,!(s>e+y)););n(10,v=o);const a=h.length-v;for(l=s/v;o<h.length;)g[o++]=l;if(n(7,_=a*l),m<t){await Z();let n=0,o=0;for(let e=m;e<t;e+=1)i[e-m]&&(n+=g[e],o+=f||i[e-m].offsetHeight);const s=o-n;r.scrollTo(0,e+s)}},m,v,h,f,a,u,c,function(e){W[e?"unshift":"push"]((()=>{o=e,n(4,o)}))},function(e){W[e?"unshift":"push"]((()=>{r=e,n(3,r)}))},function(){y=this.offsetHeight,n(2,y)}]}const _t=class extends _e{constructor(e){super(),be(this,e,bt,yt,f,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10},ft)}};function wt(e){let t,n;return{c(){t=O("svg"),n=O("path"),$(n,"fill","currentColor"),$(n,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),$(t,"width","100%"),$(t,"height","100%"),$(t,"viewBox","-2 -2 50 50"),$(t,"focusable","false"),$(t,"aria-hidden","true"),$(t,"role","presentation")},m(e,i){x(e,t,i),_(t,n)},p:a,i:a,o:a,d(e){e&&k(t)}}}const xt=class extends _e{constructor(e){super(),be(this,e,null,wt,f,{})}};function kt(e){w(e,"svelte-17l1npl",".selectContainer.svelte-17l1npl.svelte-17l1npl{--internalPadding:0 16px;border:var(--border, 1px solid #d8dbdf);border-radius:var(--borderRadius, 3px);box-sizing:border-box;height:var(--height, 42px);position:relative;display:flex;align-items:center;padding:var(--padding, var(--internalPadding));background:var(--background, #fff);margin:var(--margin, 0)}.selectContainer.svelte-17l1npl input.svelte-17l1npl{cursor:default;border:none;color:var(--inputColor, #3f4f5f);height:var(--height, 42px);line-height:var(--height, 42px);padding:var(--inputPadding, var(--padding, var(--internalPadding)));width:100%;background:transparent;font-size:var(--inputFontSize, 14px);letter-spacing:var(--inputLetterSpacing, -0.08px);position:absolute;left:var(--inputLeft, 0);margin:var(--inputMargin, 0)}.selectContainer.svelte-17l1npl input.svelte-17l1npl::placeholder{color:var(--placeholderColor, #78848f);opacity:var(--placeholderOpacity, 1)}.selectContainer.svelte-17l1npl input.svelte-17l1npl:focus{outline:none}.selectContainer.svelte-17l1npl.svelte-17l1npl:hover{border-color:var(--borderHoverColor, #b2b8bf)}.selectContainer.focused.svelte-17l1npl.svelte-17l1npl{border-color:var(--borderFocusColor, #006fe8)}.selectContainer.disabled.svelte-17l1npl.svelte-17l1npl{background:var(--disabledBackground, #ebedef);border-color:var(--disabledBorderColor, #ebedef);color:var(--disabledColor, #c1c6cc)}.selectContainer.disabled.svelte-17l1npl input.svelte-17l1npl::placeholder{color:var(--disabledPlaceholderColor, #c1c6cc);opacity:var(--disabledPlaceholderOpacity, 1)}.selectedItem.svelte-17l1npl.svelte-17l1npl{line-height:var(--height, 42px);height:var(--height, 42px);overflow-x:hidden;padding:var(--selectedItemPadding, 0 20px 0 0)}.selectedItem.svelte-17l1npl.svelte-17l1npl:focus{outline:none}.clearSelect.svelte-17l1npl.svelte-17l1npl{position:absolute;right:var(--clearSelectRight, 10px);top:var(--clearSelectTop, 11px);bottom:var(--clearSelectBottom, 11px);width:var(--clearSelectWidth, 20px);color:var(--clearSelectColor, #c5cacf);flex:none !important}.clearSelect.svelte-17l1npl.svelte-17l1npl:hover{color:var(--clearSelectHoverColor, #2c3e50)}.selectContainer.focused.svelte-17l1npl .clearSelect.svelte-17l1npl{color:var(--clearSelectFocusColor, #3f4f5f)}.indicator.svelte-17l1npl.svelte-17l1npl{position:absolute;right:var(--indicatorRight, 10px);top:var(--indicatorTop, 11px);width:var(--indicatorWidth, 20px);height:var(--indicatorHeight, 20px);color:var(--indicatorColor, #c5cacf)}.indicator.svelte-17l1npl svg.svelte-17l1npl{display:inline-block;fill:var(--indicatorFill, currentcolor);line-height:1;stroke:var(--indicatorStroke, currentcolor);stroke-width:0}.spinner.svelte-17l1npl.svelte-17l1npl{position:absolute;right:var(--spinnerRight, 10px);top:var(--spinnerLeft, 11px);width:var(--spinnerWidth, 20px);height:var(--spinnerHeight, 20px);color:var(--spinnerColor, #51ce6c);animation:svelte-17l1npl-rotate 0.75s linear infinite}.spinner_icon.svelte-17l1npl.svelte-17l1npl{display:block;height:100%;transform-origin:center center;width:100%;position:absolute;top:0;bottom:0;left:0;right:0;margin:auto;-webkit-transform:none}.spinner_path.svelte-17l1npl.svelte-17l1npl{stroke-dasharray:90;stroke-linecap:round}.multiSelect.svelte-17l1npl.svelte-17l1npl{display:flex;padding:var(--multiSelectPadding, 0 35px 0 16px);height:auto;flex-wrap:wrap;align-items:stretch}.multiSelect.svelte-17l1npl>.svelte-17l1npl{flex:1 1 50px}.selectContainer.multiSelect.svelte-17l1npl input.svelte-17l1npl{padding:var(--multiSelectInputPadding, 0);position:relative;margin:var(--multiSelectInputMargin, 0)}.hasError.svelte-17l1npl.svelte-17l1npl{border:var(--errorBorder, 1px solid #ff2d55);background:var(--errorBackground, #fff)}.a11yText.svelte-17l1npl.svelte-17l1npl{z-index:9999;border:0px;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0px;white-space:nowrap}@keyframes svelte-17l1npl-rotate{100%{transform:rotate(360deg)}}")}function St(e,t,n){const i=e.slice();return i[103]=t[n],i}function Et(e){let t,n,i,r,o;return{c(){t=E("span"),n=L(e[33]),i=T(),r=E("span"),o=L(e[32]),$(t,"id","aria-selection"),$(r,"id","aria-context")},m(e,s){x(e,t,s),_(t,n),x(e,i,s),x(e,r,s),_(r,o)},p(e,t){4&t[1]&&F(n,e[33]),2&t[1]&&F(o,e[32])},d(e){e&&k(t),e&&k(i),e&&k(r)}}}function Ot(e){let t,n,i;const r=[e[18]];var o=e[17];function s(e){let t={};for(let e=0;e<r.length;e+=1)t=l(t,r[e]);return{props:t}}return o&&(t=new o(s())),{c(){t&&ve(t.$$.fragment),n=A()},m(e,r){t&&ge(t,e,r),x(e,n,r),i=!0},p(e,i){const a=262144&i[0]?fe(r,[de(e[18])]):{};if(o!==(o=e[17])){if(t){le();const e=t;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}o?(t=new o(s()),ve(t.$$.fragment),ue(t.$$.fragment,1),ge(t,n.parentNode,n)):t=null}else o&&t.$set(a)},i(e){i||(t&&ue(t.$$.fragment,e),i=!0)},o(e){t&&he(t.$$.fragment,e),i=!1},d(e){e&&k(n),t&&ye(t,e)}}}function Lt(e){let t,n,i;var r=e[26];function o(e){return{props:{value:e[2],getSelectionLabel:e[12],activeValue:e[30],isDisabled:e[9],multiFullItemClearable:e[8]}}}return r&&(t=new r(o(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40])),{c(){t&&ve(t.$$.fragment),n=A()},m(e,r){t&&ge(t,e,r),x(e,n,r),i=!0},p(e,i){const s={};if(4&i[0]&&(s.value=e[2]),4096&i[0]&&(s.getSelectionLabel=e[12]),1073741824&i[0]&&(s.activeValue=e[30]),512&i[0]&&(s.isDisabled=e[9]),256&i[0]&&(s.multiFullItemClearable=e[8]),r!==(r=e[26])){if(t){le();const e=t;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}r?(t=new r(o(e)),t.$on("multiItemClear",e[38]),t.$on("focus",e[40]),ve(t.$$.fragment),ue(t.$$.fragment,1),ge(t,n.parentNode,n)):t=null}else r&&t.$set(s)},i(e){i||(t&&ue(t.$$.fragment,e),i=!0)},o(e){t&&he(t.$$.fragment,e),i=!1},d(e){e&&k(n),t&&ye(t,e)}}}function Tt(e){let t,n,i,r,o;var s=e[25];function a(e){return{props:{item:e[2],getSelectionLabel:e[12]}}}return s&&(n=new s(a(e))),{c(){t=E("div"),n&&ve(n.$$.fragment),$(t,"class","selectedItem svelte-17l1npl")},m(s,a){x(s,t,a),n&&ge(n,t,null),i=!0,r||(o=C(t,"focus",e[40]),r=!0)},p(e,i){const r={};if(4&i[0]&&(r.item=e[2]),4096&i[0]&&(r.getSelectionLabel=e[12]),s!==(s=e[25])){if(n){le();const e=n;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}s?(n=new s(a(e)),ve(n.$$.fragment),ue(n.$$.fragment,1),ge(n,t,null)):n=null}else s&&n.$set(r)},i(e){i||(n&&ue(n.$$.fragment,e),i=!0)},o(e){n&&he(n.$$.fragment,e),i=!1},d(e){e&&k(t),n&&ye(n),r=!1,o()}}}function At(e){let t,n,i,r,o;var s=e[23];return s&&(n=new s({})),{c(){t=E("div"),n&&ve(n.$$.fragment),$(t,"class","clearSelect svelte-17l1npl"),$(t,"aria-hidden","true")},m(s,a){var l;x(s,t,a),n&&ge(n,t,null),i=!0,r||(o=C(t,"click",(l=e[27],function(e){return e.preventDefault(),l.call(this,e)})),r=!0)},p(e,i){if(s!==(s=e[23])){if(n){le();const e=n;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}s?(n=new s({}),ve(n.$$.fragment),ue(n.$$.fragment,1),ge(n,t,null)):n=null}},i(e){i||(n&&ue(n.$$.fragment,e),i=!0)},o(e){n&&he(n.$$.fragment,e),i=!1},d(e){e&&k(t),n&&ye(n),r=!1,o()}}}function Ct(e){let t;function n(e,t){return e[22]?It:$t}let i=n(e),r=i(e);return{c(){t=E("div"),r.c(),$(t,"class","indicator svelte-17l1npl"),$(t,"aria-hidden","true")},m(e,n){x(e,t,n),r.m(t,null)},p(e,o){i===(i=n(e))&&r?r.p(e,o):(r.d(1),r=i(e),r&&(r.c(),r.m(t,null)))},d(e){e&&k(t),r.d()}}}function $t(e){let t,n;return{c(){t=O("svg"),n=O("path"),$(n,"d","M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747\n          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0\n          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502\n          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0\n          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"),$(t,"width","100%"),$(t,"height","100%"),$(t,"viewBox","0 0 20 20"),$(t,"focusable","false"),$(t,"aria-hidden","true"),$(t,"class","svelte-17l1npl")},m(e,i){x(e,t,i),_(t,n)},p:a,d(e){e&&k(t)}}}function It(e){let t,n;return{c(){t=new R,n=A(),t.a=n},m(i,r){t.m(e[22],i,r),x(i,n,r)},p(e,n){4194304&n[0]&&t.p(e[22])},d(e){e&&k(n),e&&t.d()}}}function Nt(e){let t;return{c(){t=E("div"),t.innerHTML='<svg class="spinner_icon svelte-17l1npl" viewBox="25 25 50 50"><circle class="spinner_path svelte-17l1npl" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>',$(t,"class","spinner svelte-17l1npl")},m(e,n){x(e,t,n)},d(e){e&&k(t)}}}function Ft(e){let t,n,i,r;const o=[e[34]];function s(t){e[84](t)}var a=e[24];function c(e){let t={};for(let e=0;e<o.length;e+=1)t=l(t,o[e]);return void 0!==e[28]&&(t.hoverItemIndex=e[28]),{props:t}}return a&&(t=new a(c(e)),W.push((()=>me(t,"hoverItemIndex",s))),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45])),{c(){t&&ve(t.$$.fragment),i=A()},m(e,n){t&&ge(t,e,n),x(e,i,n),r=!0},p(e,r){const l=8&r[1]?fe(o,[de(e[34])]):{};if(!n&&268435456&r[0]&&(n=!0,l.hoverItemIndex=e[28],ee((()=>n=!1))),a!==(a=e[24])){if(t){le();const e=t;he(e.$$.fragment,1,0,(()=>{ye(e,1)})),ce()}a?(t=new a(c(e)),W.push((()=>me(t,"hoverItemIndex",s))),t.$on("itemSelected",e[43]),t.$on("itemCreated",e[44]),t.$on("closeList",e[45]),ve(t.$$.fragment),ue(t.$$.fragment,1),ge(t,i.parentNode,i)):t=null}else a&&t.$set(l)},i(e){r||(t&&ue(t.$$.fragment,e),r=!0)},o(e){t&&he(t.$$.fragment,e),r=!1},d(e){e&&k(i),t&&ye(t,e)}}}function Bt(e){let t,n,i;return{c(){t=E("input"),$(t,"name",n=e[16].name),$(t,"type","hidden"),t.value=i=e[2]?e[12](e[2]):null,$(t,"class","svelte-17l1npl")},m(e,n){x(e,t,n)},p(e,r){65536&r[0]&&n!==(n=e[16].name)&&$(t,"name",n),4100&r[0]&&i!==(i=e[2]?e[12](e[2]):null)&&(t.value=i)},d(e){e&&k(t)}}}function jt(e){let t,n=e[2],i=[];for(let t=0;t<n.length;t+=1)i[t]=Pt(St(e,n,t));return{c(){for(let e=0;e<i.length;e+=1)i[e].c();t=A()},m(e,n){for(let t=0;t<i.length;t+=1)i[t].m(e,n);x(e,t,n)},p(e,r){if(69636&r[0]){let o;for(n=e[2],o=0;o<n.length;o+=1){const s=St(e,n,o);i[o]?i[o].p(s,r):(i[o]=Pt(s),i[o].c(),i[o].m(t.parentNode,t))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(e){S(i,e),e&&k(t)}}}function Pt(e){let t,n,i;return{c(){t=E("input"),$(t,"name",n=e[16].name),$(t,"type","hidden"),t.value=i=e[103]?e[12](e[103]):null,$(t,"class","svelte-17l1npl")},m(e,n){x(e,t,n)},p(e,r){65536&r[0]&&n!==(n=e[16].name)&&$(t,"name",n),4100&r[0]&&i!==(i=e[103]?e[12](e[103]):null)&&(t.value=i)},d(e){e&&k(t)}}}function Mt(e){let t,n,i,r,o,s,a,c,u,p,f,d,m,v,g,y,b,w,S=e[1]&&Et(e),O=e[17]&&Ot(e),L=e[35]&&Lt(e),A=[{readOnly:a=!e[13]},e[31],{placeholder:e[36]},{style:e[14]},{disabled:e[9]}],N={};for(let e=0;e<A.length;e+=1)N=l(N,A[e]);let F=!e[7]&&e[29]&&Tt(e),j=e[37]&&At(e),P=!e[37]&&(e[20]||e[19]&&!e[2]||!e[13]&&!e[9]&&!e[4]&&(e[29]&&!e[15]||!e[29]))&&Ct(e),R=e[4]&&Nt(),H=e[5]&&Ft(e),D=(!e[7]||e[7]&&!e[35])&&Bt(e),K=e[7]&&e[35]&&jt(e);return{c(){t=E("div"),n=E("span"),S&&S.c(),i=T(),O&&O.c(),r=T(),L&&L.c(),o=T(),s=E("input"),c=T(),F&&F.c(),u=T(),j&&j.c(),p=T(),P&&P.c(),f=T(),R&&R.c(),d=T(),H&&H.c(),m=T(),D&&D.c(),v=T(),K&&K.c(),$(n,"aria-live","polite"),$(n,"aria-atomic","false"),$(n,"aria-relevant","additions text"),$(n,"class","a11yText svelte-17l1npl"),I(s,N),M(s,"svelte-17l1npl",!0),$(t,"class",g="selectContainer "+e[21]+" svelte-17l1npl"),$(t,"style",e[11]),M(t,"hasError",e[10]),M(t,"multiSelect",e[7]),M(t,"disabled",e[9]),M(t,"focused",e[1])},m(a,l){x(a,t,l),_(t,n),S&&S.m(n,null),_(t,i),O&&O.m(t,null),_(t,r),L&&L.m(t,null),_(t,o),_(t,s),s.autofocus&&s.focus(),e[82](s),B(s,e[3]),_(t,c),F&&F.m(t,null),_(t,u),j&&j.m(t,null),_(t,p),P&&P.m(t,null),_(t,f),R&&R.m(t,null),_(t,d),H&&H.m(t,null),_(t,m),D&&D.m(t,null),_(t,v),K&&K.m(t,null),e[85](t),y=!0,b||(w=[C(window,"click",e[41]),C(window,"focusin",e[41]),C(window,"keydown",e[39]),C(s,"focus",e[40]),C(s,"input",e[83]),C(t,"click",e[42])],b=!0)},p(e,i){e[1]?S?S.p(e,i):(S=Et(e),S.c(),S.m(n,null)):S&&(S.d(1),S=null),e[17]?O?(O.p(e,i),131072&i[0]&&ue(O,1)):(O=Ot(e),O.c(),ue(O,1),O.m(t,r)):O&&(le(),he(O,1,1,(()=>{O=null})),ce()),e[35]?L?(L.p(e,i),16&i[1]&&ue(L,1)):(L=Lt(e),L.c(),ue(L,1),L.m(t,o)):L&&(le(),he(L,1,1,(()=>{L=null})),ce()),I(s,N=fe(A,[(!y||8192&i[0]&&a!==(a=!e[13]))&&{readOnly:a},1&i[1]&&e[31],(!y||32&i[1])&&{placeholder:e[36]},(!y||16384&i[0])&&{style:e[14]},(!y||512&i[0])&&{disabled:e[9]}])),8&i[0]&&s.value!==e[3]&&B(s,e[3]),M(s,"svelte-17l1npl",!0),!e[7]&&e[29]?F?(F.p(e,i),536871040&i[0]&&ue(F,1)):(F=Tt(e),F.c(),ue(F,1),F.m(t,u)):F&&(le(),he(F,1,1,(()=>{F=null})),ce()),e[37]?j?(j.p(e,i),64&i[1]&&ue(j,1)):(j=At(e),j.c(),ue(j,1),j.m(t,p)):j&&(le(),he(j,1,1,(()=>{j=null})),ce()),e[37]||!(e[20]||e[19]&&!e[2])&&(e[13]||e[9]||e[4]||(!e[29]||e[15])&&e[29])?P&&(P.d(1),P=null):P?P.p(e,i):(P=Ct(e),P.c(),P.m(t,f)),e[4]?R||(R=Nt(),R.c(),R.m(t,d)):R&&(R.d(1),R=null),e[5]?H?(H.p(e,i),32&i[0]&&ue(H,1)):(H=Ft(e),H.c(),ue(H,1),H.m(t,m)):H&&(le(),he(H,1,1,(()=>{H=null})),ce()),!e[7]||e[7]&&!e[35]?D?D.p(e,i):(D=Bt(e),D.c(),D.m(t,v)):D&&(D.d(1),D=null),e[7]&&e[35]?K?K.p(e,i):(K=jt(e),K.c(),K.m(t,null)):K&&(K.d(1),K=null),(!y||2097152&i[0]&&g!==(g="selectContainer "+e[21]+" svelte-17l1npl"))&&$(t,"class",g),(!y||2048&i[0])&&$(t,"style",e[11]),2098176&i[0]&&M(t,"hasError",e[10]),2097280&i[0]&&M(t,"multiSelect",e[7]),2097664&i[0]&&M(t,"disabled",e[9]),2097154&i[0]&&M(t,"focused",e[1])},i(e){y||(ue(O),ue(L),ue(F),ue(j),ue(H),y=!0)},o(e){he(O),he(L),he(F),he(j),he(H),y=!1},d(n){n&&k(t),S&&S.d(),O&&O.d(),L&&L.d(),e[82](null),F&&F.d(),j&&j.d(),P&&P.d(),R&&R.d(),H&&H.d(),D&&D.d(),K&&K.d(),e[85](null),b=!1,h(w)}}}function Rt(e){return e.map(((e,t)=>({index:t,value:e,label:`${e}`})))}function Ht(e,t,n){let i,r,o,s,a,l,c,u;const h=U();let{id:p=null}=t,{container:f}=t,{input:d}=t,{isMulti:m=!1}=t,{multiFullItemClearable:v=!1}=t,{isDisabled:g=!1}=t,{isCreatable:y=!1}=t,{isFocused:b=!1}=t,{value:_=null}=t,{filterText:w=""}=t,{placeholder:x="Select..."}=t,{placeholderAlwaysShow:k=!1}=t,{items:S=null}=t,{itemFilter:E=((e,t,n)=>`${e}`.toLowerCase().includes(t.toLowerCase()))}=t,{groupBy:O}=t,{groupFilter:L=(e=>e)}=t,{isGroupHeaderSelectable:T=!1}=t,{getGroupHeaderLabel:A=(e=>e[C]||e.id)}=t,{labelIdentifier:C="label"}=t,{getOptionLabel:$=((e,t)=>e.isCreator?`Create "${t}"`:e[C])}=t,{optionIdentifier:I="value"}=t,{loadOptions:N}=t,{hasError:F=!1}=t,{containerStyles:B=""}=t,{getSelectionLabel:j=(e=>e?e[C]:null)}=t,{createGroupHeaderItem:P=(e=>({value:e,label:e}))}=t,{createItem:M=(e=>({value:e,label:e}))}=t,{isSearchable:R=!0}=t,{inputStyles:H=""}=t,{isClearable:D=!0}=t,{isWaiting:G=!1}=t,{listPlacement:z="auto"}=t,{listOpen:q=!1}=t,{isVirtualList:Y=!1}=t,{loadOptionsInterval:J=300}=t,{noOptionsMessage:X="No options"}=t,{hideEmptyState:Z=!1}=t,{inputAttributes:Q={}}=t,{listAutoWidth:ee=!0}=t,{itemHeight:te=40}=t,{Icon:ne}=t,{iconProps:ie={}}=t,{showChevron:re=!1}=t,{showIndicator:oe=!1}=t,{containerClasses:se=""}=t,{indicatorSvg:ae}=t,{listOffset:le=5}=t,{ClearIcon:ce=xt}=t,{Item:ue=Me}=t,{List:he=tt}=t,{Selection:pe=ot}=t,{MultiSelection:fe=pt}=t,{VirtualList:de=_t}=t;function me(e,t){if(0===t.length)return e;const n=M(t);return e[0]&&t===e[0][C]?e:(n.isCreator=!0,[...e,n])}let ve,ge,ye,be,_e,we,{selectedValue:xe=null}=t;const ke=function(e,t,n){let i;return function(){let r=this,o=arguments,s=function(){i=null,e.apply(r,o)},a=n;clearTimeout(i),i=setTimeout(s,t),a&&e.apply(r,o)}}((async()=>{n(4,G=!0);let e=await N(w).catch((e=>{console.warn("svelte-select loadOptions error :>> ",e),h("error",{type:"loadOptions",details:e})}));e&&!e.cancelled&&(e?(e&&e.length>0&&"object"!=typeof e[0]&&(e=Rt(e)),n(81,i=[...e]),h("loaded",{items:i})):n(81,i=[]),y&&n(81,i=me(i,w)),n(4,G=!1),n(1,b=!0),n(5,q=!0))}),J);let Se;function Ee(){let e=!0;if(_){const t=[],i=[];_.forEach((n=>{t.includes(n[I])?e=!1:(t.push(n[I]),i.push(n))})),e||n(2,_=i)}return e}function Oe(e){let t=e?e[I]:_[I];return S.find((e=>e[I]===t))}function Le(e){const{detail:t}=e,i=_[t?t.i:_.length-1];1===_.length?n(2,_=void 0):n(2,_=_.filter((e=>e!==i))),h("clear",i)}function Te(){n(1,b=!0),d&&d.focus()}K((async()=>{n(77,ge=_),n(78,ye=w),n(79,be=b),n(80,_e=m)})),V((()=>{b&&d&&d.focus()}));let{ariaValues:Ae=(e=>`Option ${e}, selected.`)}=t,{ariaListOpen:Ce=((e,t)=>`You are currently focused on option ${e}. There are ${t} results available.`)}=t,{ariaFocused:$e=(()=>"Select is focused, type to refine list, press down to open the menu.")}=t;return e.$$set=e=>{"id"in e&&n(46,p=e.id),"container"in e&&n(0,f=e.container),"input"in e&&n(6,d=e.input),"isMulti"in e&&n(7,m=e.isMulti),"multiFullItemClearable"in e&&n(8,v=e.multiFullItemClearable),"isDisabled"in e&&n(9,g=e.isDisabled),"isCreatable"in e&&n(47,y=e.isCreatable),"isFocused"in e&&n(1,b=e.isFocused),"value"in e&&n(2,_=e.value),"filterText"in e&&n(3,w=e.filterText),"placeholder"in e&&n(48,x=e.placeholder),"placeholderAlwaysShow"in e&&n(49,k=e.placeholderAlwaysShow),"items"in e&&n(50,S=e.items),"itemFilter"in e&&n(51,E=e.itemFilter),"groupBy"in e&&n(52,O=e.groupBy),"groupFilter"in e&&n(53,L=e.groupFilter),"isGroupHeaderSelectable"in e&&n(54,T=e.isGroupHeaderSelectable),"getGroupHeaderLabel"in e&&n(55,A=e.getGroupHeaderLabel),"labelIdentifier"in e&&n(56,C=e.labelIdentifier),"getOptionLabel"in e&&n(57,$=e.getOptionLabel),"optionIdentifier"in e&&n(58,I=e.optionIdentifier),"loadOptions"in e&&n(59,N=e.loadOptions),"hasError"in e&&n(10,F=e.hasError),"containerStyles"in e&&n(11,B=e.containerStyles),"getSelectionLabel"in e&&n(12,j=e.getSelectionLabel),"createGroupHeaderItem"in e&&n(60,P=e.createGroupHeaderItem),"createItem"in e&&n(61,M=e.createItem),"isSearchable"in e&&n(13,R=e.isSearchable),"inputStyles"in e&&n(14,H=e.inputStyles),"isClearable"in e&&n(15,D=e.isClearable),"isWaiting"in e&&n(4,G=e.isWaiting),"listPlacement"in e&&n(63,z=e.listPlacement),"listOpen"in e&&n(5,q=e.listOpen),"isVirtualList"in e&&n(64,Y=e.isVirtualList),"loadOptionsInterval"in e&&n(65,J=e.loadOptionsInterval),"noOptionsMessage"in e&&n(66,X=e.noOptionsMessage),"hideEmptyState"in e&&n(67,Z=e.hideEmptyState),"inputAttributes"in e&&n(16,Q=e.inputAttributes),"listAutoWidth"in e&&n(68,ee=e.listAutoWidth),"itemHeight"in e&&n(69,te=e.itemHeight),"Icon"in e&&n(17,ne=e.Icon),"iconProps"in e&&n(18,ie=e.iconProps),"showChevron"in e&&n(19,re=e.showChevron),"showIndicator"in e&&n(20,oe=e.showIndicator),"containerClasses"in e&&n(21,se=e.containerClasses),"indicatorSvg"in e&&n(22,ae=e.indicatorSvg),"listOffset"in e&&n(70,le=e.listOffset),"ClearIcon"in e&&n(23,ce=e.ClearIcon),"Item"in e&&n(71,ue=e.Item),"List"in e&&n(24,he=e.List),"Selection"in e&&n(25,pe=e.Selection),"MultiSelection"in e&&n(26,fe=e.MultiSelection),"VirtualList"in e&&n(72,de=e.VirtualList),"selectedValue"in e&&n(73,xe=e.selectedValue),"ariaValues"in e&&n(74,Ae=e.ariaValues),"ariaListOpen"in e&&n(75,Ce=e.ariaListOpen),"ariaFocused"in e&&n(76,$e=e.ariaFocused)},e.$$.update=()=>{140&e.$$.dirty[0]|405340160&e.$$.dirty[1]&&n(81,i=function(e){if(e.loadOptions&&e.filterText.length>0)return;if(!e.items)return[];e.items&&e.items.length>0&&"object"!=typeof e.items[0]&&(e.items=Rt(e.items));let t=e.items.filter((t=>{let n=E($(t,e.filterText),e.filterText,t);return n&&e.isMulti&&e.value&&Array.isArray(e.value)&&(n=!e.value.some((n=>n[e.optionIdentifier]===t[e.optionIdentifier]))),n}));return e.groupBy&&(t=function(e){const t=[],n={};e.forEach((e=>{const i=O(e);t.includes(i)||(t.push(i),n[i]=[],i&&n[i].push(Object.assign(P(i,e),{id:i,isGroupHeader:!0,isSelectable:T}))),n[i].push(Object.assign({isGroupItem:!!i},e))}));const i=[];return L(t).forEach((e=>{i.push(...n[e])})),i}(t)),e.isCreatable&&(t=me(t,e.filterText)),t}({loadOptions:N,filterText:w,items:S,value:_,isMulti:m,optionIdentifier:I,groupBy:O,isCreatable:y})),2048&e.$$.dirty[2]&&xe&&console.warn("selectedValue is no longer used. Please use value instead."),524288&e.$$.dirty[1]&&function(e){e&&0!==e.length&&!e.some((e=>"object"!=typeof e))&&_&&(m?!_.some((e=>!e||!e[I])):_[I])&&(Array.isArray(_)?n(2,_=_.map((e=>Oe(e)||e))):n(2,_=Oe()||_))}(S),4&e.$$.dirty[0]&&_&&("string"==typeof _?n(2,_={[I]:_,label:_}):m&&Array.isArray(_)&&_.length>0&&n(2,_=_.map((e=>"string"==typeof e?{value:e,label:e}:e)))),73728&e.$$.dirty[0]&&(!Q&&R||(n(31,Se=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},Q)),p&&n(31,Se.id=p,Se),R||n(31,Se.readonly=!0,Se))),128&e.$$.dirty[0]|262144&e.$$.dirty[2]&&(m&&_&&(Array.isArray(_)?n(2,_=[..._]):n(2,_=[_])),_e&&!m&&_&&n(2,_=null)),132&e.$$.dirty[0]&&m&&_&&_.length>1&&Ee(),4&e.$$.dirty[0]&&_&&(m?JSON.stringify(_)!==JSON.stringify(ge)&&Ee()&&h("select",_):ge&&JSON.stringify(_[I])===JSON.stringify(ge[I])||h("select",_)),132&e.$$.dirty[0]|32768&e.$$.dirty[2]&&!_&&m&&ge&&h("select",_),2&e.$$.dirty[0]|131072&e.$$.dirty[2]&&b!==be&&(b||q?Te():d&&d.blur()),8&e.$$.dirty[0]|65536&e.$$.dirty[2]&&w!==ye&&0!==w.length&&(n(1,b=!0),n(5,q=!0),N?ke():(n(5,q=!0),m&&n(30,ve=void 0))),12&e.$$.dirty[0]&&n(29,r=_&&0===w.length),536904208&e.$$.dirty[0]&&n(37,o=r&&D&&!g&&!G),132&e.$$.dirty[0]|393216&e.$$.dirty[1]&&n(36,s=k&&m?x:_?"":x),132&e.$$.dirty[0]&&n(35,a=m&&_&&_.length>0),141&e.$$.dirty[0]|218103808&e.$$.dirty[1]|526326&e.$$.dirty[2]&&n(34,l={Item:ue,filterText:w,optionIdentifier:I,noOptionsMessage:X,hideEmptyState:Z,isVirtualList:Y,VirtualList:de,value:_,isMulti:m,getGroupHeaderLabel:A,items:i,itemHeight:te,getOptionLabel:$,listPlacement:z,parent:f,listAutoWidth:ee,listOffset:le}),132&e.$$.dirty[0]&&n(33,c=_?function(){let e;return e=m&&_.length>0?_.map((e=>j(e))).join(", "):j(_),Ae(e)}():""),268435490&e.$$.dirty[0]|524288&e.$$.dirty[2]&&n(32,u=function(){if(!b||!i||0===i.length)return"";let e=i[we];if(q&&e){let t=j(e),n=i?i.length:0;return Ce(t,n)}return $e()}())},[f,b,_,w,G,q,d,m,v,g,F,B,j,R,H,D,Q,ne,ie,re,oe,se,ae,ce,he,pe,fe,function(){n(2,_=void 0),n(5,q=!1),h("clear",_),Te()},we,r,ve,Se,u,c,l,a,s,o,Le,function(e){if(b)switch(e.key){case"ArrowDown":case"ArrowUp":e.preventDefault(),n(5,q=!0),n(30,ve=void 0);break;case"Tab":q||n(1,b=!1);break;case"Backspace":if(!m||w.length>0)return;if(m&&_&&_.length>0){if(Le(void 0!==ve?ve:_.length-1),0===ve||void 0===ve)break;n(30,ve=_.length>ve?ve-1:void 0)}break;case"ArrowLeft":if(!m||w.length>0)return;void 0===ve?n(30,ve=_.length-1):_.length>ve&&0!==ve&&n(30,ve-=1);break;case"ArrowRight":if(!m||w.length>0||void 0===ve)return;ve===_.length-1?n(30,ve=void 0):ve<_.length-1&&n(30,ve+=1)}},Te,function(e){if(!f)return;const t=e.path&&e.path.length>0?e.path[0]:e.target;f.contains(t)||(n(1,b=!1),n(5,q=!1),n(30,ve=void 0),d&&d.blur())},function(){g||(n(1,b=!0),n(5,q=!q))},function(e){const{detail:t}=e;if(t){n(3,w="");const e=Object.assign({},t);e.isGroupHeader&&!e.isSelectable||(n(2,_=m?_?_.concat([e]):[e]:e),n(2,_),setTimeout((()=>{n(5,q=!1),n(30,ve=void 0)})))}},function(e){const{detail:t}=e;m?(n(2,_=_||[]),n(2,_=[..._,M(t)])):n(2,_=M(t)),h("itemCreated",t),n(3,w=""),n(5,q=!1),n(30,ve=void 0)},function(){n(3,w=""),n(5,q=!1)},p,y,x,k,S,E,O,L,T,A,C,$,I,N,P,M,()=>i,z,Y,J,X,Z,ee,te,le,ue,de,xe,Ae,Ce,$e,ge,ye,be,_e,i,function(e){W[e?"unshift":"push"]((()=>{d=e,n(6,d)}))},function(){w=this.value,n(3,w)},function(e){we=e,n(28,we)},function(e){W[e?"unshift":"push"]((()=>{f=e,n(0,f)}))}]}const Dt=class extends _e{constructor(e){super(),be(this,e,Ht,Mt,f,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},kt,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}};function Kt(e){w(e,"svelte-1s90b1",".ow-info.svelte-1s90b1{padding-top:0px;border-top:0px !important}.ow-dropdown.svelte-1s90b1{width:500px !important}.ow-themed.svelte-1s90b1{--border:3px solid var(--background-modifier-border) !important;--borderRadius:3px;--placeholderColor:var(--text-muted) !important;--background:var(--background-secondary-alt) !important;--itemColor:var(--text-normal) !important;--itemHoverBG:var(--interactive-accent-hover) !important;--itemHoverColor:var(--text-on-accent) !important;--listBackground:var(--interactive-normal) !important}")}function Vt(e){let t,n,i,r,o,s,a,l,c,u,h,p,f,d,m,v,g,y;function b(t){e[7](t)}let w={isMulti:!0,optionIdentifier:Ut,labelIdentifier:Gt,items:e[0]};return void 0!==e[2]&&(w.value=e[2]),s=new Dt({props:w}),W.push((()=>me(s,"value",b))),s.$on("select",e[5]),s.$on("clear",e[6]),{c(){t=E("div"),n=E("div"),i=E("div"),r=E("div"),o=E("p"),ve(s.$$.fragment),l=T(),c=E("div"),u=E("div"),h=E("div"),h.textContent=`${e[4]}`,p=T(),f=E("div"),d=E("button"),m=L("Sync"),$(r,"class","ow-dropdown ow-themed svelte-1s90b1"),$(i,"class","setting-item-description"),$(n,"class","setting-item-info"),$(t,"class","setting-item"),$(h,"class","setting-item-description"),$(u,"class","setting-item-info"),$(d,"class","mod-cta"),d.disabled=e[3],j(d,"float","right"),$(f,"class","setting-item-control"),$(c,"class","setting-item ow-info svelte-1s90b1")},m(a,b){x(a,t,b),_(t,n),_(n,i),_(i,r),_(r,o),ge(s,o,null),x(a,l,b),x(a,c,b),_(c,u),_(u,h),_(c,p),_(c,f),_(f,d),_(d,m),v=!0,g||(y=C(d,"click",e[8]),g=!0)},p(e,[t]){const n={};1&t&&(n.items=e[0]),!a&&4&t&&(a=!0,n.value=e[2],ee((()=>a=!1))),s.$set(n),(!v||8&t)&&(d.disabled=e[3])},i(e){v||(ue(s.$$.fragment,e),v=!0)},o(e){he(s.$$.fragment,e),v=!1},d(e){e&&k(t),ye(s),e&&k(l),e&&k(c),g=!1,y()}}}const Ut="uri",Gt="filename";function Wt(e,t,n){let i,{deletedFiles:r}=t,{onSubmit:o}=t,s=!0,a=0===r.length?"No deleted file(s) found...":"Select file(s) to resync from Hypothes.is";return e.$$set=e=>{"deletedFiles"in e&&n(0,r=e.deletedFiles),"onSubmit"in e&&n(1,o=e.onSubmit)},[r,o,i,s,a,function(e){n(3,s=!i)},function(e){n(3,s=!i)},function(e){i=e,n(2,i)},()=>o({selected:i})]}const zt=class extends _e{constructor(e){super(),be(this,e,Wt,Vt,f,{deletedFiles:0,onSubmit:1},Kt)}};var qt=n(214),Yt=n.n(qt);const Jt=async e=>e.map((e=>{e.selected=!0;const{organization:t,scoped:n,groupid:i,links:r}=e;return function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["organization","scoped","groupid","links"])}));class Xt{async startSync(){const e=await m(Te).token,t=await m(Te).user,n=new Ee(e,t),i=await n.getGroups(),r=await Jt(i),o=[...await m(Te).groups,...r],s=new Set,a=o.filter((e=>!s.has(e.id)&&(s.add(e.id),!0)),s);await Te.actions.setGroups(a)}}class Zt{constructor(e){this.syncState={newArticlesSynced:0,newHighlightsSynced:0},this.fileManager=e,this.syncGroup=new Xt}async startSync(t){this.syncState={newArticlesSynced:0,newHighlightsSynced:0};const n=await m(Te).token,i=await m(Te).user,r=new Ee(n,i);Ae.actions.startSync(),await this.syncGroup.startSync();const o=t?await r.getHighlightWithUri(t):await r.getHighlights(m(Te).lastSyncDate),s=await(async t=>{const n=m(Te).dateTimeFormat,i=m(Te).groups;return t.reduce(((t,r)=>{if(r.uri.startsWith("urn:x-pdf"))return t;const o=i.find((e=>e.id==r.group));if(!o.selected)return t;const s=Yt()(r.uri);let a="No highlighted text";try{t[s]||(t[s]={id:s,metadata:{title:r.document.title[0],url:r.uri,author:(l=r.uri,new URL(l).hostname.replace("www.",""))},highlights:[]});const i="TextQuoteSelector";r.target[0].selector.find((function(e,t){if(e.type===i)return a=e.exact,t})),t[s].highlights.push({id:r.id,created:(0,e.moment)(r.created).format(n),updated:(0,e.moment)(r.updated).format(n),text:a,incontext:r.links.incontext,user:r.user,annotation:r.text,tags:r.tags,group:o.name})}catch(e){console.log(`Possible missing highlights or document title. ${e}`,r)}var l;return t}),{})})(o);Ae.actions.setJobs(s),Object.keys(s).length>0&&await this.syncArticles(s),Ae.actions.completeSync({newArticlesCount:this.syncState.newArticlesSynced,newHighlightsCount:this.syncState.newHighlightsSynced,updatedArticlesCount:0,updatedHighlightsCount:0})}async syncArticles(e){for(const t of Object.values(e))try{Ae.actions.startJob(t),await this.syncArticle(t),Ae.actions.completeJob(t)}catch(e){console.error(`Error syncing ${t.metadata.title}`,e),Ae.actions.errorJob(t)}}async syncArticle(e){await this.fileManager.createOrUpdate(e)&&(this.syncState.newArticlesSynced+=1),this.syncState.newHighlightsSynced+=e.highlights.length}}var Qt=n(202),en=n.n(Qt);class tn{constructor(e){this.vault=e,this.renderer=new Ce}async createFile(e,t,n){await this.vault.create(e,n)}async createOrUpdate(e){const t=(e=>{const t=e.replace(/[':#|]/g,"").trim();return en()(t)})(e.metadata.title),n=(e=>`${m(Te).highlightsFolder}/${e}.md`)(t);let i=!1;if(await this.vault.adapter.exists(n)){console.info(`Document ${e.metadata.title} found. Loading content and updating highlights`);const t=this.renderer.render(e,!1),i=await this.vault.adapter.read(n)+t;await this.vault.adapter.write(n,i)}else{console.info(`Document ${n} not found. Will be created`);const r=this.renderer.render(e);await this.createFile(n,e,r),i=!0,await Te.actions.addSyncedFile({filename:`${t}.md`,uri:encodeURIComponent(e.metadata.url)})}return i}}class nn extends e.Modal{constructor(e){super(e),this.vault=e.vault,this.waitForClose=new Promise((e=>this.resolvePromise=e)),this.open()}async onOpen(){super.onOpen();const e=new tn(this.vault);this.syncHypothesis=new Zt(e);const t=await this.retrieveDeletedFiles(this.vault);this.titleEl.innerText="Hypothes.is: Resync deleted file(s)",this.modalContent=new zt({target:this.contentEl,props:{deletedFiles:t,onSubmit:async e=>{e.selected&&e.selected.length>0?this.startResync(e.selected):console.log("No files selected"),this.close()}}})}onClose(){super.onClose(),this.modalContent.$destroy(),this.resolvePromise()}async retrieveDeletedFiles(e){const t=m(Te).highlightsFolder,n=m(Te).syncedFiles,i=await e.adapter.list(`/${t}`),r=/[^\/]*$/;return i.files.forEach((function(e,t){this[t]=e.match(r)[0]}),i.files),n.filter((e=>!i.files.includes(e.filename)))}async startResync(e){e.forEach((async e=>{console.log(`Start resync deleted file - ${e.filename}`),await this.syncHypothesis.startSync(e.uri)}))}}function rn(e){w(e,"svelte-1gqavgt",".ow-info.svelte-1gqavgt{padding-top:0px;border-top:0px !important}.ow-dropdown.svelte-1gqavgt{width:500px !important}.ow-themed.svelte-1gqavgt{--border:3px solid var(--background-modifier-border) !important;--borderRadius:3px;--placeholderColor:var(--text-muted) !important;--background:var(--background-secondary-alt) !important;--itemColor:var(--text-normal) !important;--itemHoverBG:var(--interactive-accent-hover) !important;--itemHoverColor:var(--text-on-accent) !important;--listBackground:var(--interactive-normal) !important}")}function on(e){let t,n,i,r,o,s,a,l,c,u,h,p,f,d,m,v,g;function y(t){e[6](t)}let b={isMulti:!0,optionIdentifier:sn,labelIdentifier:an,items:e[0]};return void 0!==e[2]&&(b.value=e[2]),s=new Dt({props:b}),W.push((()=>me(s,"value",y))),s.$on("select",e[4]),s.$on("clear",e[5]),{c(){t=E("div"),n=E("div"),i=E("div"),r=E("div"),o=E("p"),ve(s.$$.fragment),l=T(),c=E("div"),u=E("div"),u.innerHTML='<div class="setting-item-description">Note: Use with caution. <br/>Highlight(s) and annotation(s) will not sync retroactively.</div>',h=T(),p=E("div"),f=E("button"),d=L("Save"),$(r,"class","ow-dropdown ow-themed svelte-1gqavgt"),$(i,"class","setting-item-description"),$(n,"class","setting-item-info"),$(t,"class","setting-item"),$(u,"class","setting-item-info"),$(f,"class","mod-cta"),f.disabled=e[3],j(f,"float","right"),$(p,"class","setting-item-control"),$(c,"class","setting-item ow-info svelte-1gqavgt")},m(a,y){x(a,t,y),_(t,n),_(n,i),_(i,r),_(r,o),ge(s,o,null),x(a,l,y),x(a,c,y),_(c,u),_(c,h),_(c,p),_(p,f),_(f,d),m=!0,v||(g=C(f,"click",e[7]),v=!0)},p(e,[t]){const n={};1&t&&(n.items=e[0]),!a&&4&t&&(a=!0,n.value=e[2],ee((()=>a=!1))),s.$set(n),(!m||8&t)&&(f.disabled=e[3])},i(e){m||(ue(s.$$.fragment,e),m=!0)},o(e){he(s.$$.fragment,e),m=!1},d(e){e&&k(t),ye(s),e&&k(l),e&&k(c),v=!1,g()}}}const sn="id",an="name";function ln(e,t,n){let{groups:i}=t,{onSubmit:r}=t,o=i.filter((e=>e.selected)),s=!0;return e.$$set=e=>{"groups"in e&&n(0,i=e.groups),"onSubmit"in e&&n(1,r=e.onSubmit)},[i,r,o,s,function(e){n(3,s=!o)},function(e){n(3,s=!o)},function(e){o=e,n(2,o)},()=>r({selectedGroups:o})]}const cn=class extends _e{constructor(e){super(),be(this,e,ln,on,f,{groups:0,onSubmit:1},rn)}};class un extends e.Modal{constructor(e){super(e),this.waitForClose=new Promise((e=>this.resolvePromise=e)),this.open()}async onOpen(){super.onOpen();const e=m(Te).groups;this.titleEl.innerText="Hypothes.is: Manage groups to be synced",this.modalContent=new cn({target:this.contentEl,props:{groups:e,onSubmit:async e=>{this.setGroupsSettings(e.selectedGroups),this.close()}}})}onClose(){super.onClose(),this.modalContent.$destroy(),this.resolvePromise()}async setGroupsSettings(e){const t=m(Te).groups;t.forEach((t=>{t.selected=e.some((e=>e.id===t.id))})),await Te.actions.setGroups(t)}}const{moment:hn}=window;class pn extends e.PluginSettingTab{constructor(e,t){super(e,t),this.app=e,this.plugin=t,this.renderer=new Ce,this.tokenManager=new Oe,this.syncGroup=new Xt}async display(){const{containerEl:e}=this;e.empty(),m(Te).isConnected?this.disconnect():this.connect(),this.autoSyncInterval(),this.highlightsFolder(),this.syncOnBoot(),this.dateFormat(),this.template(),this.manageGroups(),this.resetSyncHistory()}disconnect(){const t=m(Te).lastSyncDate?`Last sync ${hn(m(Te).lastSyncDate).fromNow()}`:"Sync has never run",n=document.createRange().createContextualFragment(`\n      ${m(Te).history.totalArticles} article(s) & ${m(Te).history.totalHighlights} highlight(s) synced<br/>\n      ${t}\n    `);new e.Setting(this.containerEl).setName(`Connected to Hypothes.is as ${m(Te).user.match(/([^:]+)@/)[1]}`).setDesc(n).addButton((e=>e.setButtonText("Disconnect").setCta().onClick((async()=>{e.removeCta().setButtonText("Removing API token...").setDisabled(!0),await Te.actions.disconnect(),this.display()}))))}connect(){new e.Setting(this.containerEl).setName("Connect to Hypothes.is").addButton((e=>e.setButtonText("Connect").setCta().onClick((async()=>{e.removeCta().setButtonText("Removing API token...").setDisabled(!0);const t=new Fe(this.app,this.tokenManager);await t.waitForClose,this.display()}))))}autoSyncInterval(){new e.Setting(this.containerEl).setName("Auto sync in interval (minutes)").setDesc("Sync every X minutes. To disable auto sync, specify negative value or zero (default)").addText((e=>{e.setPlaceholder(String(0)).setValue(String(m(Te).autoSyncInterval)).onChange((async e=>{if(!isNaN(Number(e))){const t=Number(e);await Te.actions.setAutoSyncInterval(t);const n=m(Te).autoSyncInterval;console.log(n),n>0?(this.plugin.clearAutoSync(),this.plugin.startAutoSync(t),console.log(`Auto sync enabled! Every ${t} minutes.`)):n<=0&&this.plugin.clearAutoSync()&&console.log("Auto sync disabled!")}}))}))}highlightsFolder(){new e.Setting(this.containerEl).setName("Highlights folder location").setDesc("Vault folder to use for writing hypothesis highlights").addDropdown((e=>{const t=this.app.vault.adapter.files,n=s()(t,(e=>"folder"===e.type));return Object.keys(n).forEach((t=>{e.addOption(t,t)})),e.setValue(m(Te).highlightsFolder).onChange((async e=>{await Te.actions.setHighlightsFolder(e)}))}))}template(){const n=document.createRange().createContextualFragment(t);new e.Setting(this.containerEl).setName("Highlights template").setDesc(n).addTextArea((e=>(e.inputEl.style.width="100%",e.inputEl.style.height="450px",e.inputEl.style.fontSize="0.8em",e.setValue(m(Te).template).onChange((async t=>{const n=this.renderer.validate(t);n&&await Te.actions.setTemplate(t),e.inputEl.style.border=n?"":"1px solid red"})),e)))}syncOnBoot(){new e.Setting(this.containerEl).setName("Sync on Startup").setDesc("Automatically sync new highlights when Obsidian starts").addToggle((e=>e.setValue(m(Te).syncOnBoot).onChange((async e=>{await Te.actions.setSyncOnBoot(e)}))))}resetSyncHistory(){new e.Setting(this.containerEl).setName("Reset sync").setDesc("Wipe sync history to allow for resync").addButton((e=>e.setButtonText("Reset").setDisabled(!m(Te).isConnected).setWarning().onClick((async()=>{await Te.actions.resetSyncHistory(),this.display()}))))}dateFormat(){const t=document.createRange().createContextualFragment(r);new e.Setting(this.containerEl).setName("Date & time format").setDesc(t).addText((e=>{e.setPlaceholder("YYYY-MM-DD HH:mm:ss").setValue(m(Te).dateTimeFormat).onChange((async e=>{await Te.actions.setDateTimeFormat(e)}))}))}async resyncDeletedFile(){new e.Setting(this.containerEl).setName("Sync deleted file(s)").setDesc("Manually sync deleted file(s)").addButton((e=>e.setButtonText("Show deleted file(s)").setCta().onClick((async()=>{e.removeCta().setButtonText("Resync deleted file..").setDisabled(!0);const t=new nn(this.app);await t.waitForClose,this.display()}))))}async manageGroups(){const t=document.createRange().createContextualFragment(`Add/remove group(s) to be synced.<br/>\n      ${m(Te).groups.length} group(s) synced from Hypothesis<br/>`);new e.Setting(this.containerEl).setName("Groups").setDesc(t).addExtraButton((e=>e.setIcon("switch").setTooltip("Reset group selections").setDisabled(!m(Te).isConnected).onClick((async()=>{await Te.actions.resetGroups(),await this.syncGroup.startSync(),this.display()})))).addButton((e=>e.setButtonText("Manage").setCta().setDisabled(!m(Te).isConnected).onClick((async()=>{const e=new un(this.app);await e.waitForClose,this.display()}))))}}var fn=n(506);(0,e.addIcon)("hypothesisIcon",fn);class dn extends e.Plugin{async onload(){console.log("loading plugin",(new Date).toLocaleString()),await async function(e){await Te.initialise(e)}(this);const t=new tn(this.app.vault);this.syncHypothesis=new Zt(t),this.addRibbonIcon("hypothesisIcon","Sync your hypothesis highlights",(()=>{m(Te).isConnected?this.startSync():new e.Notice("Please configure Hypothesis API token in the plugin setting")})),this.addCommand({id:"hypothesis-sync",name:"Sync highlights",callback:()=>{m(Te).isConnected?this.startSync():new e.Notice("Please configure Hypothesis API token in the plugin setting")}}),this.addCommand({id:"hypothesis-resync-deleted",name:"Resync deleted file(s)",callback:()=>{m(Te).isConnected?this.showResyncModal():new e.Notice("Please configure Hypothesis API token in the plugin setting")}}),this.addSettingTab(new pn(this.app,this)),m(Te).syncOnBoot&&(m(Te).isConnected?await this.startSync():console.info("Sync disabled. API Token not configured")),m(Te).autoSyncInterval&&this.startAutoSync()}async showResyncModal(){const e=new nn(this.app);await e.waitForClose}async onunload(){console.log("unloading plugin",(new Date).toLocaleString()),this.clearAutoSync()}async startSync(){console.log("Start syncing..."),await this.syncHypothesis.startSync()}async clearAutoSync(){this.timeoutIDAutoSync&&(window.clearTimeout(this.timeoutIDAutoSync),this.timeoutIDAutoSync=void 0),console.log("Clearing auto sync...")}async startAutoSync(e){const t=null!=e?e:Number(m(Te).autoSyncInterval);t>0&&(this.timeoutIDAutoSync=window.setTimeout((()=>{this.startSync(),this.startAutoSync()}),6e4*t)),console.log(`StartAutoSync: this.timeoutIDAutoSync ${this.timeoutIDAutoSync} with ${t} minutes`)}}})();var r=exports;for(var o in i)r[o]=i[o];i.__esModule&&Object.defineProperty(r,"__esModule",{value:!0})})();