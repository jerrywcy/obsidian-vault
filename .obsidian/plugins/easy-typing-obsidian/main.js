/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
__export(exports, {
  default: () => EasyTypingPlugin
});
var import_obsidian2 = __toModule(require("obsidian"));

// core.ts
var import_obsidian = __toModule(require("obsidian"));
var InlineType;
(function(InlineType3) {
  InlineType3["text"] = "text";
  InlineType3["code"] = "code";
  InlineType3["formula"] = "formula";
  InlineType3["link"] = "link";
  InlineType3["user"] = "user-defined";
  InlineType3["none"] = "none";
})(InlineType || (InlineType = {}));
var LineType;
(function(LineType2) {
  LineType2["text"] = "text";
  LineType2["code"] = "code";
  LineType2["formula"] = "formula";
  LineType2["frontmatter"] = "frontmatter";
  LineType2["none"] = "none";
})(LineType || (LineType = {}));
var DEFAULT_SETTINGS = {
  AutoFormatting: true,
  FormattingWhenLineEnd: false,
  ChineseEnglishSpace: true,
  ChineseNoSpace: true,
  Capitalization: true,
  PunctuationSpace: true,
  EnglishSpace: true,
  BraceSpace: true,
  NumberSpace: true,
  InlineCodeSpace: true,
  InlineFormulaSpace: true,
  LinkSpace: true,
  LinkSmartSpace: true,
  FullWidthCharacterEnhance: true,
  UserDefinedRegExp: ":\\w*:\n{{.*?}}\n<.*?>\n\\[\\!.*?\\][+-]{0,1}",
  UserDefinedRegSwitch: true,
  UserPartSpace: true,
  Debug: false
};
function splitArticle(article, checkFrontMatter = true, beginIndex = 0) {
  let retArray = [];
  let lines = article.split("\n");
  console.log("line number", lines.length);
  let regNullLine = /^\s*$/;
  let regFormulaBegin = /^\s*(\- (\[[x ]\] )?)?\$\$/;
  let regFormulaEnd = /\$\$$/;
  let regCodeBegin = /^\s*```/;
  let regCodeEnd = /^\s*```$/;
  let index = beginIndex;
  let regAdmonitionBlockBegin = /^\s*```ad-\w+/g;
  if (checkFrontMatter) {
    let frontMatterPart;
    for (let i = 0; i < lines.length; i++) {
      if (regNullLine.test(lines[i])) {
        continue;
      } else if (lines[i] === "---") {
        for (let j = i + 1; j < lines.length; j++) {
          if (lines[j] === "---") {
            if (i != 0) {
              retArray.push({
                type: LineType.text,
                begin: 0,
                end: i
              });
            }
            frontMatterPart = {
              type: LineType.frontmatter,
              begin: i,
              end: j + 1
            };
            retArray.push(frontMatterPart);
            index = j + 1;
            break;
          }
        }
        break;
      } else {
        break;
      }
    }
  }
  while (index < lines.length) {
    if (regCodeBegin.test(lines[index])) {
      let j = index + 1;
      while (j < lines.length) {
        if (regCodeEnd.test(lines[j]))
          break;
        j++;
      }
      if (j === lines.length || !regAdmonitionBlockBegin.test(lines[index])) {
        j = j === lines.length ? j - 1 : j;
        retArray.push({
          type: LineType.code,
          begin: index,
          end: j + 1
        });
      } else {
        retArray.push({
          type: LineType.code,
          begin: index,
          end: index + 1
        });
        retArray.push({
          type: LineType.text,
          begin: index + 1,
          end: j
        });
        retArray.push({
          type: LineType.code,
          begin: j,
          end: j + 1
        });
      }
      index = j + 1;
    } else if (regFormulaBegin.test(lines[index])) {
      let regFormulaOneLine = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
      if (regFormulaOneLine.test(lines[index])) {
        retArray.push({
          type: LineType.formula,
          begin: index,
          end: index + 1
        });
        index += 1;
      } else {
        let j = index + 1;
        while (j < lines.length) {
          if (regFormulaEnd.test(lines[j]))
            break;
          j++;
        }
        j = j === lines.length ? j - 1 : j;
        retArray.push({
          type: LineType.formula,
          begin: index,
          end: j + 1
        });
        index = j + 1;
      }
    } else {
      let j = index + 1;
      for (; j < lines.length; j++) {
        if (regCodeBegin.test(lines[j]) || regFormulaBegin.test(lines[j])) {
          break;
        }
      }
      retArray.push({
        type: LineType.text,
        begin: index,
        end: j
      });
      index = j;
    }
  }
  return retArray;
}
function reparseArticleParts(article, prevArticlePart, updateLineStart, print = false) {
  if (prevArticlePart === null || updateLineStart === 0) {
    return splitArticle(article);
  }
  let lines = article.split("\n");
  let res = [];
  let newBeginIndex = 0;
  let changeArticlePartIndex = 0;
  for (let i = 0; i < prevArticlePart.length; i++) {
    if (updateLineStart >= prevArticlePart[i].begin && updateLineStart < prevArticlePart[i].end) {
      newBeginIndex = prevArticlePart[i].begin;
      changeArticlePartIndex = i;
      break;
    } else {
      res.push(prevArticlePart[i]);
    }
  }
  let regAdmonitionBlockBegin = /```ad-\w+/g;
  if (prevArticlePart[changeArticlePartIndex].type === LineType.text && newBeginIndex != 0 && regAdmonitionBlockBegin.test(lines[newBeginIndex - 1])) {
    changeArticlePartIndex -= 1;
    res.pop();
  } else if (prevArticlePart[changeArticlePartIndex].begin === prevArticlePart[changeArticlePartIndex].end - 1 && changeArticlePartIndex >= 2 && regAdmonitionBlockBegin.test(lines[prevArticlePart[changeArticlePartIndex - 2].end - 1])) {
    changeArticlePartIndex -= 2;
    res.pop();
    res.pop();
  }
  if (changeArticlePartIndex === 0) {
    return splitArticle(article);
  }
  newBeginIndex = prevArticlePart[changeArticlePartIndex].begin;
  let newParts = splitArticle(article, false, newBeginIndex);
  for (let j = 0; j < newParts.length; j++) {
    res.push(newParts[j]);
  }
  if (print)
    new import_obsidian.Notice("Reparse Article: begin line index " + newBeginIndex.toString());
  return res;
}
function getLineTypeFromArticleParts(line, typeArray) {
  for (let i = 0; i < typeArray.length; i++) {
    if (line >= typeArray[i].begin && line < typeArray[i].end) {
      return typeArray[i].type;
    }
  }
}
function stringDeleteAt(str, index) {
  return str.substring(0, index) + str.substring(index + 1);
}
function stringInsertAt(str, index, s) {
  return str.substring(0, index) + s + str.substring(index);
}
function splitLine(line, regExps) {
  let regInlineMark = /(?<!\\)\$|(?<!\\)\`/g;
  let regFormulaInline = /(?<!\\)\$(?! )[^]+?(?<! )(?<!\\)\$/g;
  let regFormulaBlock = /(?<!\\)\$\$(?! )[^]*?(?<! )(?<!\\)\$\$/g;
  let regCode = /(?<!\\)`[^]*?(?<!\\)`/g;
  let markQueue = [];
  let arrayOfInlineTextCodeFormula = [];
  while (true) {
    let match = regInlineMark.exec(line);
    if (!match)
      break;
    markQueue.push(match);
  }
  let textBeginIndex = 0;
  while (markQueue.length != 0) {
    let mark = markQueue.shift();
    if (mark.index < textBeginIndex)
      continue;
    if (mark[0] === "$") {
      let matchFormulaBeginIndex;
      let matchFormulaLastIndex;
      regFormulaBlock.lastIndex = mark.index;
      let matchBlockFormula = regFormulaBlock.exec(line);
      if (matchBlockFormula && matchBlockFormula.index === mark.index) {
        matchFormulaBeginIndex = matchBlockFormula.index;
        matchFormulaLastIndex = regFormulaBlock.lastIndex;
      } else {
        regFormulaInline.lastIndex = mark.index;
        let matchInlineFormula = regFormulaInline.exec(line);
        if (matchInlineFormula && matchInlineFormula.index === mark.index) {
          matchFormulaBeginIndex = matchInlineFormula.index;
          matchFormulaLastIndex = regFormulaInline.lastIndex;
        } else {
          continue;
        }
      }
      if (mark.index > textBeginIndex) {
        arrayOfInlineTextCodeFormula.push({
          content: line.substring(textBeginIndex, mark.index),
          type: InlineType.text,
          begin: textBeginIndex,
          end: mark.index
        });
      }
      arrayOfInlineTextCodeFormula.push({
        content: line.substring(matchFormulaBeginIndex, matchFormulaLastIndex),
        type: InlineType.formula,
        begin: matchFormulaBeginIndex,
        end: matchFormulaLastIndex
      });
      textBeginIndex = matchFormulaLastIndex;
      continue;
    } else if (mark[0] === "`") {
      let matchCodeBeginIndex;
      let matchCodeLastIndex;
      regCode.lastIndex = mark.index;
      let matchInlineCode = regCode.exec(line);
      if (matchInlineCode && matchInlineCode.index === mark.index) {
        matchCodeBeginIndex = matchInlineCode.index;
        matchCodeLastIndex = regCode.lastIndex;
        if (mark.index > textBeginIndex) {
          arrayOfInlineTextCodeFormula.push({
            content: line.substring(textBeginIndex, mark.index),
            type: InlineType.text,
            begin: textBeginIndex,
            end: mark.index
          });
        }
        arrayOfInlineTextCodeFormula.push({
          content: line.substring(matchCodeBeginIndex, matchCodeLastIndex),
          type: InlineType.code,
          begin: matchCodeBeginIndex,
          end: matchCodeLastIndex
        });
        textBeginIndex = matchCodeLastIndex;
        continue;
      } else {
        continue;
      }
    }
  }
  if (textBeginIndex != line.length) {
    arrayOfInlineTextCodeFormula.push({
      content: line.substring(textBeginIndex),
      type: InlineType.text,
      begin: textBeginIndex,
      end: line.length
    });
  }
  let retArray = [];
  for (let i = 0; i < arrayOfInlineTextCodeFormula.length; i++) {
    if (arrayOfInlineTextCodeFormula[i].type != InlineType.text) {
      retArray.push(arrayOfInlineTextCodeFormula[i]);
    } else {
      let tempArray;
      if (regExps)
        tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content, regExps);
      else
        tempArray = splitTextWithLinkAndUserDefined(arrayOfInlineTextCodeFormula[i].content);
      tempArray.forEach((item) => {
        item.begin += arrayOfInlineTextCodeFormula[i].begin;
        item.end += arrayOfInlineTextCodeFormula[i].begin;
        retArray.push(item);
      });
    }
  }
  return retArray;
}
function matchWithReg(text, regExp, type, inlineTypeArray, checkArray = false) {
  let retArray = inlineTypeArray;
  let matchArray = [];
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  while (true) {
    let match = regExp.exec(text);
    if (!match)
      break;
    let valid = true;
    if (checkArray) {
      for (let i = 0; i < retArray.length; i++) {
        if (match.index <= retArray[i].begin) {
          if (regExp.lastIndex <= retArray[i].begin) {
            valid = true;
            break;
          } else if (regExp.lastIndex <= retArray[i].end) {
            valid = false;
            break;
          } else if (regExp.lastIndex > retArray[i].end) {
            let removeCount = 1;
            valid = true;
            for (let j = i + 1; j < retArray.length; j++) {
              if (regExp.lastIndex <= retArray[j].begin) {
                removeCount = j - i;
                valid = true;
                break;
              } else if (regExp.lastIndex < retArray[j].end) {
                valid = false;
                break;
              } else {
                continue;
              }
            }
            if (valid) {
              retArray.splice(i, removeCount);
              i -= 1;
            }
            break;
          }
        }
        if (match.index > retArray[i].begin && match.index < retArray[i].end) {
          valid = false;
          break;
        }
      }
    }
    if (!valid)
      continue;
    matchArray.push({
      content: match[0],
      type,
      begin: match.index,
      end: regExp.lastIndex
    });
  }
  retArray = retArray.concat(matchArray);
  return retArray;
}
function splitTextWithLinkAndUserDefined(text, regExps) {
  let retArray = [];
  let regWikiLink = /\!?\[\[[^\[\]]*?\]\]/g;
  let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
  let regBareLink = /(https?:\/\/|ftp:\/\/|obsidian:\/\/|zotero:\/\/|www.)[^\s（）《》。，！？；：“”‘’\)\(\[\]\{\}']+/g;
  retArray = matchWithReg(text, regWikiLink, InlineType.link, retArray);
  retArray = matchWithReg(text, regMdLink, InlineType.link, retArray);
  let regExpList = [];
  if (regExps) {
    let regs = regExps.split("\n");
    for (let i = 0; i < regs.length; i++) {
      let regNull = /^\s*$/g;
      if (regNull.test(regs[i]))
        continue;
      let isValidReg = true;
      try {
        let regTemp = new RegExp(regs[i], "g");
      } catch (error) {
        isValidReg = false;
        new import_obsidian.Notice("Bad RegExp:" + regs[i]);
      }
      if (isValidReg) {
        regExpList.push(new RegExp(regs[i], "g"));
      }
    }
    let regLen = regExpList.length;
    for (let i = 0; i < regLen; i++) {
      retArray = matchWithReg(text, regExpList[i], InlineType.user, retArray, true);
    }
  }
  retArray = matchWithReg(text, regBareLink, InlineType.link, retArray, true);
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  let textArray = [];
  let textBegin = 0;
  let textEnd = 0;
  for (let i = 0; i < retArray.length; i++) {
    if (textBegin < retArray[i].begin) {
      textEnd = retArray[i].begin;
      textArray.push({
        content: text.substring(textBegin, textEnd),
        type: InlineType.text,
        begin: textBegin,
        end: textEnd
      });
    }
    textBegin = retArray[i].end;
  }
  if (textBegin != text.length) {
    textArray.push({
      content: text.substring(textBegin, text.length),
      type: InlineType.text,
      begin: textBegin,
      end: text.length
    });
  }
  retArray = retArray.concat(textArray);
  retArray = retArray.sort((a, b) => a.begin - b.begin);
  return retArray;
}
function formatLine(line, curCursor, settings, prevCursor) {
  let ch = curCursor.ch;
  if (line === "")
    return ["", 0, []];
  let lineParts;
  if (settings.UserDefinedRegSwitch) {
    lineParts = splitLine(line, settings.UserDefinedRegExp);
  } else {
    lineParts = splitLine(line);
  }
  let linePartsOrigin = JSON.parse(JSON.stringify(lineParts));
  let inlineChangeList = [];
  let cursorLinePartIndex = -1;
  let cursorRelativeIndex = -1;
  let resultCursorCh = 0;
  for (let i = 0; i < lineParts.length; i++) {
    if (ch > lineParts[i].begin && ch <= lineParts[i].end) {
      cursorLinePartIndex = i;
      cursorRelativeIndex = ch - lineParts[i].begin;
      if (lineParts[i].type === InlineType.text) {
        lineParts[i].content = stringInsertAt(lineParts[i].content, cursorRelativeIndex, "\0");
      }
      break;
    }
  }
  let resultLine = "";
  let offset = 0;
  let prevPartType = InlineType.none;
  let prevTextEndWithSpace = false;
  for (let i = 0; i < lineParts.length; i++) {
    if (i === 0 && lineParts[i].type === InlineType.text && settings.Capitalization) {
      if (prevCursor && cursorLinePartIndex != 0) {
      } else {
        let regFirstSentence = /^\s*(\- (\[[x ]\] )?)?[a-z]/g;
        let regHeaderSentence = /^(#+ |>+ ?)[a-z]/g;
        let textcopy = lineParts[0].content;
        let match = regFirstSentence.exec(textcopy);
        let matchHeader = regHeaderSentence.exec(textcopy);
        let dstCharIndex = -1;
        if (match) {
          dstCharIndex = regFirstSentence.lastIndex - 1;
        } else if (matchHeader) {
          dstCharIndex = regHeaderSentence.lastIndex - 1;
        }
        if (!prevCursor) {
        } else if (prevCursor.line === curCursor.line && dstCharIndex >= prevCursor.ch && dstCharIndex < curCursor.ch) {
        } else {
          dstCharIndex = -1;
        }
        if (dstCharIndex != -1) {
          lineParts[0].content = textcopy.substring(0, dstCharIndex) + textcopy.charAt(dstCharIndex).toUpperCase() + textcopy.substring(dstCharIndex + 1);
        }
      }
    }
    switch (lineParts[i].type) {
      case InlineType.text:
        let content = lineParts[i].content;
        if (settings.Capitalization) {
          var reg = /[\.\?\!。！？]([\s]*)[a-z]/g;
          while (true) {
            let match = reg.exec(content);
            if (!match)
              break;
            let tempIndex = reg.lastIndex - 1;
            if (!prevCursor) {
              lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
              content = lineParts[i].content;
            } else if (prevCursor && cursorLinePartIndex === i && prevCursor.line === curCursor.line) {
              if (tempIndex >= prevCursor.ch - offset && tempIndex < curCursor.ch - offset) {
                lineParts[i].content = content.substring(0, tempIndex) + content.charAt(tempIndex).toUpperCase() + content.substring(reg.lastIndex);
                content = lineParts[i].content;
              }
            }
          }
        }
        if (settings.ChineseEnglishSpace) {
          let reg1 = /([A-Za-z0-9,\.;\?:!])([\u4e00-\u9fa5]+)/gi;
          let reg22 = /([\u4e00-\u9fa5]+)([A-Za-z0-9])/gi;
          lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
          content = lineParts[i].content;
        }
        if (settings.ChineseNoSpace) {
          let reg3 = /([\u4e00-\u9fa5，。、；‘’《》]+)(\s+)([\u4e00-\u9fa5，。、；‘’《》]+)/g;
          while (reg3.exec(content)) {
            lineParts[i].content = content.replace(reg3, "$1$3");
            content = lineParts[i].content;
          }
        }
        if (settings.PunctuationSpace) {
          {
            let reg3 = /([,\.;\?\!])([A-Za-z])/gi;
            while (true) {
              let match = reg3.exec(content);
              if (!match)
                break;
              let tempIndex = reg3.lastIndex - 1;
              if (!prevCursor) {
                content = content.substring(0, tempIndex) + " " + content.substring(tempIndex);
              } else if (prevCursor && cursorLinePartIndex === i && prevCursor.line === curCursor.line) {
                if (tempIndex >= prevCursor.ch - offset && tempIndex < curCursor.ch - offset) {
                  content = content.substring(0, tempIndex) + " " + content.substring(tempIndex);
                }
              }
            }
            var reg2 = /(:)([A-Za-z0-9_]+[ ,\.\?\\\/;'"，。？；‘“”’、\[\]\-\{\}])/gi;
            lineParts[i].content = content.replace(reg2, "$1 $2");
            content = lineParts[i].content;
          }
          {
            let reg1 = /(\))([A-Za-z0-9\u4e00-\u9fa5]+)/gi;
            let reg22 = /([A-Za-z0-9\u4e00-\u9fa5:,\.\?\!'"]+)(\()/gi;
            lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
            content = lineParts[i].content;
          }
          {
            let reg1 = /([,;\?\!\]\}])([0-9])/g;
            let reg22 = /([0-9])([\[\{])/g;
            lineParts[i].content = content.replace(reg1, "$1 $2").replace(reg22, "$1 $2");
            content = lineParts[i].content;
          }
        }
        let regStartWithSpace = /^\0?[\s,\.;\?\!，。；？！、（）\]\)\}]/;
        let regEndWithSpace = /[\s，。、：；？！（）\[\(\{]\0?$/;
        let textStartWithSpace = regStartWithSpace.test(content);
        let textEndWithSpace = regEndWithSpace.test(content);
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.link:
            if (lineParts[i].content.charAt(0) === " ")
              break;
            let regBareLink = /^(https?:\/\/|ftp:\/\/|obsidian:\/\/|zotero:\/\/|www.)[^\s（）《》。,;:，！？；：“”‘’\)\(\[\]\{\}']+/g;
            let isBareLink = false;
            isBareLink = regBareLink.test(lineParts[i - 1].content);
            if (isBareLink) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
              break;
            }
            if (settings.LinkSmartSpace && !textStartWithSpace) {
              let regTestWikiLink = /\!?\[\[[^\[\]]*?\]\]/;
              let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
              let regNoNeedSpace = /[\u4e00-\u9fa5][\u4e00-\u9fa5]/g;
              let twoNeighborChars = "";
              let charAtTextBegin = lineParts[i].content.charAt(0);
              let charAtLinkEnd = "";
              let linkWithNoText = false;
              if (regTestWikiLink.test(lineParts[i - 1].content)) {
                charAtLinkEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 3);
                if (charAtLinkEnd === "[")
                  linkWithNoText = true;
              } else if (regMdLink.test(lineParts[i - 1].content)) {
                let regMdLinkEnd = /\]/;
                let charAtLinkEndIndex = lineParts[i - 1].content.search(regMdLinkEnd) - 1;
                charAtLinkEnd = lineParts[i - 1].content.charAt(charAtLinkEndIndex);
                if (charAtLinkEnd === "[")
                  linkWithNoText = true;
              }
              twoNeighborChars = charAtLinkEnd + charAtTextBegin;
              if (!linkWithNoText && !regNoNeedSpace.test(twoNeighborChars)) {
                lineParts[i].content = " " + content;
                content = lineParts[i].content;
              }
            } else if (!settings.LinkSmartSpace && settings.LinkSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace && !textStartWithSpace) {
              lineParts[i].content = " " + content;
              content = lineParts[i].content;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          let reg3 = "\0";
          let n = content.search(reg3);
          resultCursorCh = offset + n;
          lineParts[i].content = stringDeleteAt(content, n);
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.text;
        prevTextEndWithSpace = textEndWithSpace;
        break;
      case InlineType.code:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.InlineCodeSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.InlineCodeSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.code;
        prevTextEndWithSpace = false;
        break;
      case InlineType.formula:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.InlineFormulaSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.InlineFormulaSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.formula;
        prevTextEndWithSpace = false;
        break;
      case InlineType.link:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            let charAtTextEnd = lineParts[i - 1].content.charAt(lineParts[i - 1].content.length - 1);
            if (charAtTextEnd === " ")
              break;
            if (settings.LinkSmartSpace && !prevTextEndWithSpace) {
              let regTestWikiLink = /\!?\[\[[^\[\]]*?\]\]/;
              let regMdLink = /\!?\[[^\[\]]*?\]\([^\s\)\(\[\]\{\}']*\)/g;
              let regNoNeedSpace = /[\u4e00-\u9fa5][\u4e00-\u9fa5]/g;
              let isBareLink = false;
              let twoNeighborChars = "";
              let charAtLinkBegin = "";
              let linkWithNoText = false;
              if (regTestWikiLink.test(lineParts[i].content)) {
                let beginIndex = 2;
                if (lineParts[i].content.charAt(0) === "!")
                  beginIndex = 3;
                charAtLinkBegin = lineParts[i].content.charAt(beginIndex);
                if (charAtLinkBegin === "]")
                  linkWithNoText = true;
              } else if (regMdLink.test(lineParts[i].content)) {
                let regMdLinkBegin = /\[/;
                let charAtLinkBeginIndex = lineParts[i].content.search(regMdLinkBegin) + 1;
                charAtLinkBegin = lineParts[i].content.charAt(charAtLinkBeginIndex);
                if (charAtLinkBegin === "]")
                  linkWithNoText = true;
              } else {
                isBareLink = true;
              }
              twoNeighborChars = charAtTextEnd + charAtLinkBegin;
              if (!linkWithNoText && (isBareLink || !regNoNeedSpace.test(twoNeighborChars))) {
                lineParts[i - 1].content += " ";
                resultLine += " ";
                offset += 1;
              }
            } else if (settings.LinkSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace || settings.LinkSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.link;
        prevTextEndWithSpace = false;
        break;
      case InlineType.user:
        switch (prevPartType) {
          case InlineType.none:
            break;
          case InlineType.text:
            if (settings.UserPartSpace && !prevTextEndWithSpace) {
              lineParts[i - 1].content += " ";
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.code:
            if (settings.InlineCodeSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.formula:
            if (settings.InlineFormulaSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.link:
            if (settings.LinkSpace || settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
          case InlineType.user:
            if (settings.UserPartSpace) {
              inlineChangeList.push({
                text: " ",
                begin: lineParts[i].begin,
                end: lineParts[i].begin,
                origin: ""
              });
              resultLine += " ";
              offset += 1;
            }
            break;
        }
        if (i === cursorLinePartIndex) {
          resultCursorCh = offset + cursorRelativeIndex;
        }
        resultLine += lineParts[i].content;
        offset += lineParts[i].content.length;
        prevPartType = InlineType.user;
        prevTextEndWithSpace = false;
        break;
    }
  }
  for (let i = 0; i < lineParts.length; i++) {
    if (lineParts[i].type === InlineType.text && lineParts[i].content != linePartsOrigin[i].content) {
      inlineChangeList.push({
        text: lineParts[i].content,
        begin: linePartsOrigin[i].begin,
        end: linePartsOrigin[i].end,
        origin: linePartsOrigin[i].content
      });
    }
  }
  inlineChangeList = inlineChangeList.sort((a, b) => a.begin - b.begin);
  return [resultLine, resultCursorCh, inlineChangeList];
}
function isPositionBefore(pos1, pos2) {
  if (pos1.line < pos2.line)
    return true;
  else if (pos1.line > pos2.line)
    return false;
  else {
    if (pos1.ch < pos2.ch)
      return true;
    else
      return false;
  }
}

// main.ts
function setAttributes(element, attributes) {
  for (let key in attributes) {
    element.setAttribute(key, attributes[key]);
  }
}
var EasyTypingPlugin = class extends import_obsidian2.Plugin {
  constructor() {
    super(...arguments);
    this.getEditor = () => {
      let editor = null;
      let markdownView = this.app.workspace.getActiveViewOfType(import_obsidian2.MarkdownView);
      if (markdownView) {
        editor = markdownView.editor;
      }
      if (editor === null && this.settings.Debug)
        console.log("can't get editor");
      return editor;
    };
    this.formatArticle = () => {
      if (this.settings.Debug) {
        console.log("Begin format Article");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.updateArticleParts(editor);
      let lineCount = editor.lineCount();
      for (let i = 0; i < lineCount; i++) {
        if (this.isTextPart(i)) {
          this.FormatLineWithoutCheckPart(editor, i);
        }
      }
      if (this.settings.Debug) {
        new import_obsidian2.Notice("Format Article Done!");
      }
    };
    this.formatSelection = () => {
      if (this.settings.Debug) {
        console.log("Begin format Selection");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.updateArticleParts(editor);
      if (!editor.somethingSelected() || editor.getSelection() === "") {
        let lineNumber = editor.getCursor().line;
        if (this.isTextPart(lineNumber)) {
          this.FormatLineWithoutCheckPart(editor, lineNumber);
        }
        editor.setCursor({ line: lineNumber, ch: editor.getLine(lineNumber).length });
        return;
      }
      let selection = editor.listSelections()[0];
      let lineBeginReparse = selection.anchor.line;
      if (lineBeginReparse > selection.head.line) {
        lineBeginReparse = selection.head.line;
      }
      this.reparseArticle = { check: true, beginLineNumber: lineBeginReparse };
      let selectedArticle = editor.getSelection();
      let articleParts = splitArticle(selectedArticle);
      let lines = selectedArticle.split("\n");
      let result = "";
      for (let i = 0; i < articleParts.length; i++) {
        if (articleParts[i].type != LineType.text) {
          for (let j = articleParts[i].begin; j < articleParts[i].end; j++) {
            let line = lines[j];
            result += line + "\n";
          }
        } else {
          for (let j = articleParts[i].begin; j < articleParts[i].end; j++) {
            let line = lines[j];
            let newline = formatLine(line, { line: 0, ch: line.length }, this.settings)[0];
            result += newline + "\n";
          }
        }
      }
      result = result.substring(0, result.length - 1);
      editor.replaceSelection(result);
      this.updateArticleParts(editor);
      if (this.settings.Debug) {
        new import_obsidian2.Notice("Format Selection Done!");
        console.log("End format Selection");
      }
    };
    this.handleBeforeInput = (ev) => {
      if (this.settings.Debug)
        console.log("===> Before Input");
      if (!this.settings.FullWidthCharacterEnhance)
        return;
      let editor = this.getEditor();
      if (!editor)
        return;
      let specialChar = new Set(["\u3010", "\u3011", "\xB7", "=", "\u201C", "\u201D", "\u300A", "\u300B", "\u2018", "\u2019", "\uFF08", "\uFF09", "\uFFE5"]);
      if (editor.somethingSelected() && editor.getSelection() != "") {
        if (ev.data.length != 1 || specialChar.has(editor.getSelection()))
          return;
        let selectedFormatRange = editor.listSelections()[0];
        let begin;
        let end;
        let anchor;
        let head;
        if (isPositionBefore(selectedFormatRange.anchor, selectedFormatRange.head)) {
          begin = selectedFormatRange.anchor;
        } else {
          begin = selectedFormatRange.head;
        }
        end = { line: begin.line, ch: begin.ch + 1 };
        anchor = { line: selectedFormatRange.anchor.line, ch: selectedFormatRange.anchor.ch + 1 };
        head = { line: selectedFormatRange.head.line, ch: selectedFormatRange.head.ch + 1 };
        let text;
        switch (ev.data) {
          case "\u3010":
          case "\u3011":
            text = "[" + editor.getSelection() + "]";
            break;
          case "\xB7":
            text = "`" + editor.getSelection() + "`";
            this.reparseArticle.check = true;
            this.reparseArticle.beginLineNumber = begin.line;
            break;
          case "\uFFE5":
          case "\xA5":
            text = "$" + editor.getSelection() + "$";
            this.reparseArticle.check = true;
            this.reparseArticle.beginLineNumber = begin.line;
            break;
          case "\u201C":
          case "\u201D":
            text = "\u201C" + editor.getSelection() + "\u201D";
            break;
          case "\u2018":
          case "\u2019":
            text = "\u2018" + editor.getSelection() + "\u2019";
            break;
          case "\u300A":
          case "\u300B":
            text = "\u300A" + editor.getSelection() + "\u300B";
            break;
          case "\uFF08":
          case "\uFF09":
            console.log("I am here");
            text = "\uFF08" + editor.getSelection() + "\uFF09";
            break;
          default:
            this.prevCursor = begin;
            let regReparse = /^[\-\$\`]|[\-\$\`]\s*$|\n/m;
            let reg = /[-\`\$]/;
            if (regReparse.test(editor.getSelection()) || reg.test(ev.data)) {
              this.reparseArticle.check = true;
              this.reparseArticle.beginLineNumber = begin.line;
            }
            this.selectionTextChange = null;
            return;
        }
        this.selectionTextChange = {
          begin,
          end,
          text,
          selection: true,
          selectionAnchor: anchor,
          selectionHead: head
        };
      }
    };
    this.handleKeydown = (evt) => {
      if (this.settings.Debug) {
        console.log("=========================");
        console.log("keydown:", evt.key);
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.keyDownFlag = true;
      if (evt.key === "Control")
        this.ctrlDownLineIndex = editor.getCursor().line;
    };
    this.handleKeyup = (evt) => {
      if (this.settings.Debug) {
        console.log("=========================");
        console.log("keyup:", evt.key);
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.keyDownFlag = false;
      if (evt.key === "Process" || evt.key === "Shift") {
        return;
      }
      if (evt.key != "Backspace" && evt.key != "Enter" && evt.key != "Delete") {
        this.updateSelection(editor);
      }
      if (this.selectionTextChange && this.settings.AutoFormatting) {
        editor.replaceRange(this.selectionTextChange.text, this.selectionTextChange.begin, this.selectionTextChange.end);
        editor.setSelection(this.selectionTextChange.selectionAnchor, this.selectionTextChange.selectionHead);
        this.prevCursor = this.selectionTextChange.selectionHead;
        this.selectionTextChange = null;
        this.editorChanged = false;
        return;
      }
      this.selectionTextChange = null;
      if (!this.editorChanged || this.settings.AutoFormatting === false) {
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      if (evt.ctrlKey && (evt.key === "z" || evt.key === "y" || evt.key === "x")) {
        let lineReparseBegin = editor.getCursor().line;
        if (lineReparseBegin > this.ctrlDownLineIndex) {
          lineReparseBegin = this.ctrlDownLineIndex;
        }
        this.reparseArticle = { check: true, beginLineNumber: lineReparseBegin };
        this.updateArticleParts(editor);
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      let regTestReparse = /^[\-\$`]|[\-\$\`]\s*$|\n|\$\$|---|```/gm;
      let cs = editor.getCursor();
      let charAfterCursor = editor.getRange({ line: cs.line, ch: cs.ch }, { line: cs.line, ch: cs.ch + 1 });
      switch (evt.key) {
        case "Backspace":
          if (this.selectedText != "" && !regTestReparse.test(this.selectedText) || this.selectedText === "" && !regTestReparse.test(this.charBeforeCursor)) {
            this.reparseArticle.check = false;
          } else {
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line };
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          this.updateArticleParts(editor);
          return;
        case "Delete":
          if (this.selectedText != "" && !regTestReparse.test(this.selectedText) || this.selectedText === "" && !regTestReparse.test(this.charAfterCursor)) {
            this.reparseArticle.check = false;
          } else {
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line };
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          this.updateArticleParts(editor);
          return;
        case "Enter":
          let prevLineIndex = editor.getCursor().line - 1;
          prevLineIndex = prevLineIndex > 0 ? prevLineIndex : 0;
          if (!evt.ctrlKey)
            this.reparseArticle = { check: true, beginLineNumber: editor.getCursor().line - 1 };
          this.updateArticleParts(editor);
          if (this.isTextPart(prevLineIndex)) {
            if (this.settings.FormattingWhenLineEnd) {
              this.FormatLineWithoutCheckPart(editor, prevLineIndex);
            } else {
              let prevLineEndCursor = { line: prevLineIndex, ch: editor.getLine(prevLineIndex).length };
              this.updateLine(editor, prevLineIndex, prevLineEndCursor, this.settings, prevLineEndCursor, editor.getCursor());
            }
          }
          this.updateSelection(editor);
          this.prevCursor = editor.getCursor();
          this.editorChanged = false;
          return;
        default:
          break;
      }
      let cursor = editor.getCursor();
      {
        let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
        let threeCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 3 }, { line: cursor.line, ch: cursor.ch });
        if (twoCharactersBeforeCursor === "$$" || threeCharactersBeforeCursor === "```" || threeCharactersBeforeCursor == "---") {
          this.reparseArticle = { check: true, beginLineNumber: cursor.line };
        }
      }
      if (this.settings.FullWidthCharacterEnhance && !editor.somethingSelected()) {
        let twoCharactersBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
        let charBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
        let twoCharactersNearCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch + 1 });
        let character2cursor1 = editor.getRange({ line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
        let twoCharactersAfterCursor = editor.getRange({ line: cursor.line, ch: cursor.ch }, { line: cursor.line, ch: cursor.ch + 2 });
        switch (evt.key) {
          case "$":
          case "\uFFE5":
          case "\xA5":
            if (twoCharactersBeforeCursor === "\uFFE5\uFFE5" || twoCharactersBeforeCursor === "\xA5\xA5") {
              editor.replaceRange("$$", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (twoCharactersBeforeCursor === "$$") {
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (character2cursor1 === "$\uFFE5$" || character2cursor1 === "$\xA5$") {
              editor.replaceRange("$$", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            }
            break;
          case "[":
          case "\u3010":
            if (twoCharactersBeforeCursor === "[[" && twoCharactersAfterCursor != "]]" && !editor.somethingSelected()) {
              editor.replaceRange("[[]]", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
            }
            break;
          case "`":
          case "\xB7":
            if (twoCharactersBeforeCursor === "\xB7\xB7") {
              editor.replaceRange("``", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            } else if (character2cursor1 === "`\xB7`") {
              editor.replaceRange("```\n```", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch + 1 });
              this.reparseArticle = { check: true, beginLineNumber: cursor.line };
            }
            break;
          case "\uFF1A":
          case ":":
          case `;`:
          case `\uFF1B`:
            if (twoCharactersBeforeCursor === "\uFF1B\uFF1B") {
              editor.replaceRange(";", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            } else if (twoCharactersBeforeCursor === "\uFF1A\uFF1A") {
              editor.replaceRange(":", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case `,`:
          case `\uFF0C`:
            if (twoCharactersBeforeCursor === "\uFF0C\uFF0C") {
              editor.replaceRange(",", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u3001":
          case "/":
            if (cursor.ch === 1 && charBeforeCursor === "\u3001") {
              editor.replaceRange("/", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u3001\u3001") {
              editor.replaceRange("/", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u3002":
          case ".":
            if (twoCharactersBeforeCursor === "\u3002\u3002") {
              editor.replaceRange(".", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "(":
          case "\uFF08":
            if (charBeforeCursor === "\uFF08" && twoCharactersNearCursor != "\uFF08\uFF09") {
              editor.replaceRange("\uFF08\uFF09", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\uFF08\uFF08" && twoCharactersNearCursor === "\uFF08\uFF09") {
              editor.replaceRange("()", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "\u300B":
          case ">":
            if (cursor.ch === 1 && charBeforeCursor === "\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u300B\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            } else if (twoCharactersBeforeCursor === ">\u300B") {
              editor.replaceRange(">", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor(cursor);
            }
            break;
          case "<":
          case "\u300A":
            if (charBeforeCursor === "\u300A" && twoCharactersNearCursor != "\u300A\u300B") {
              editor.replaceRange("\u300A\u300B", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u300A\u300A" && twoCharactersNearCursor === "\u300A\u300B") {
              editor.replaceRange("<", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "!":
          case "\uFF01":
            if (twoCharactersBeforeCursor === "\uFF01\uFF01") {
              editor.replaceRange("!", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "|":
          case "\uFF5C":
            if (twoCharactersBeforeCursor === "\uFF5C\uFF5C") {
              editor.replaceRange("|", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case '"':
            if (charBeforeCursor === "\u201C" && twoCharactersNearCursor != "\u201C\u201D") {
              editor.replaceRange("\u201C\u201D", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u201C\u201D" && twoCharactersNearCursor === "\u201D\u201D") {
              editor.replaceRange('""', { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          case "'":
            if (charBeforeCursor === "\u2018" && twoCharactersNearCursor != "\u2018\u2019") {
              editor.replaceRange("\u2018\u2019", { line: cursor.line, ch: cursor.ch - 1 }, { line: cursor.line, ch: cursor.ch });
              editor.setCursor({ line: cursor.line, ch: cursor.ch });
            } else if (twoCharactersBeforeCursor === "\u2018\u2019" && twoCharactersNearCursor === "\u2019\u2019") {
              editor.replaceRange("''", { line: cursor.line, ch: cursor.ch - 2 }, { line: cursor.line, ch: cursor.ch + 1 });
              editor.setCursor({ line: cursor.line, ch: cursor.ch - 1 });
            }
            break;
          default:
            break;
        }
      }
      cursor = editor.getCursor();
      this.updateSelection(editor);
      this.updateArticleParts(editor);
      if (getLineTypeFromArticleParts(cursor.line, this.articleParts) != LineType.text) {
        this.prevCursor = editor.getCursor();
        this.editorChanged = false;
        return;
      }
      if (!this.settings.FormattingWhenLineEnd) {
        this.updateLine(editor, cursor.line, cursor, this.settings, this.prevCursor);
      }
      this.prevCursor = editor.getCursor();
      this.editorChanged = false;
    };
    this.isTextPart = (lineIndex) => {
      if (getLineTypeFromArticleParts(lineIndex, this.articleParts) === LineType.text) {
        return true;
      }
      return false;
    };
    this.handleClick = () => {
      if (this.settings.Debug)
        console.log("===>Click event triggered");
      let editor = this.getEditor();
      if (!editor)
        return;
      this.prevCursor = editor.getCursor();
      this.updateSelection(editor);
    };
    this.handleFileOpen = (file) => {
      if (file != null) {
        if (this.settings.Debug)
          console.log("===>File open:", file.vault.getName() + "/" + file.path);
        this.reparseArticle = { check: true, beginLineNumber: 0 };
        this.articleParts = null;
      }
    };
    this.handlePaste = (evt, editor, markdownView) => {
      let cursor = editor.getCursor();
      if (this.settings.Debug) {
        console.log("===>Before-Paste");
      }
      this.reparseArticle = { check: true, beginLineNumber: cursor.line };
      this.updateArticleParts(editor);
    };
    this.handleChange = (editor, markdownView) => {
      if (this.settings.Debug) {
        console.log("===>Change Event");
      }
      this.editorChanged = true;
    };
    this.handleSelectBegin = (ev) => {
      if (this.keyDownFlag)
        return;
      if (this.settings.Debug) {
        console.log("===>Select Event");
      }
      let editor = this.getEditor();
      if (!editor)
        return;
      this.updateSelection(editor);
    };
    this.updateArticleParts = (editor) => {
      if (this.reparseArticle.check || this.articleParts === null) {
        this.articleParts = reparseArticleParts(editor.getValue(), this.articleParts, this.reparseArticle.beginLineNumber, this.settings.Debug);
        this.reparseArticle.check = false;
      }
    };
    this.printArticleParts = (editor) => {
      let article = editor.getValue();
      let lines = article.split("\n");
      console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
      for (let i = 0; i < this.articleParts.length; i++) {
        console.log("Article Part:", this.articleParts[i].type, this.articleParts[i].begin, this.articleParts[i].end);
        for (let j = this.articleParts[i].begin; j < this.articleParts[i].end; j++) {
          console.log(lines[j]);
        }
      }
      console.log("~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~");
    };
    this.updateSelection = (editor) => {
      this.selectedText = editor.getSelection();
      this.updateCharAroundCursor(editor);
    };
    this.updateCharAroundCursor = (editor) => {
      if (this.selectedText != "")
        return;
      let cursor = editor.getCursor();
      if (cursor.ch != 0) {
        this.charBeforeCursor = editor.getRange({ line: cursor.line, ch: cursor.ch - 1 }, cursor);
      } else {
        this.charBeforeCursor = cursor.line != 0 ? "\n" : "";
      }
      if (cursor.ch != editor.getLine(cursor.line).length) {
        this.charAfterCursor = editor.getRange(cursor, { line: cursor.line, ch: cursor.ch + 1 });
      } else {
        this.charAfterCursor = cursor.line != editor.lineCount() - 1 ? "\n" : "";
      }
    };
    this.FormatLineWithoutCheckPart = (editor, line) => {
      let lineString = editor.getLine(line);
      let cs = { line, ch: lineString.length };
      let formattedChange = formatLine(lineString, cs, this.settings);
      let changedLine = formattedChange[0];
      if (changedLine != lineString) {
        editor.replaceRange(changedLine, { line, ch: 0 }, cs);
      }
    };
    this.updateLine = (editor, lineIndex, curCursor, settings, prevCursor, setCursor) => {
      let formattedChange = formatLine(editor.getLine(lineIndex), curCursor, this.settings, this.prevCursor);
      let resultLine = formattedChange[0];
      let resultCurosrCh = formattedChange[1];
      let inlineChangeList = formattedChange[2];
      if (inlineChangeList.length != 0) {
        let offset = 0;
        for (let i = 0; i < inlineChangeList.length; i++) {
          let changeBegin = {
            line: lineIndex,
            ch: inlineChangeList[i].begin + offset
          };
          let changeEnd = {
            line: lineIndex,
            ch: inlineChangeList[i].end + offset
          };
          offset += inlineChangeList[i].text.length - inlineChangeList[i].origin.length;
          editor.replaceRange(inlineChangeList[i].text, changeBegin, changeEnd);
        }
        if (!setCursor) {
          editor.setCursor({
            line: lineIndex,
            ch: resultCurosrCh
          });
        } else {
          editor.setCursor(setCursor);
        }
        editor.focus();
      }
    };
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.prevCursor = { line: 0, ch: 0 };
      this.selectionTextChange = null;
      this.editorChanged = false;
      this.keyUpdateCursor = new Set(["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"]);
      this.articleParts = null;
      this.reparseArticle = {
        check: true,
        beginLineNumber: 0
      };
      this.keyDownFlag = false;
      this.selectedText = "";
      this.charBeforeCursor = "";
      this.charAfterCursor = "";
      this.ctrlDownLineIndex = 0;
      this.addCommand({
        id: "easy-typing-format-selection",
        name: "format selected text",
        callback: () => this.formatSelection(),
        hotkeys: [{
          modifiers: ["Ctrl", "Shift"],
          key: "s"
        }]
      });
      this.addCommand({
        id: "easy-typing-format-article",
        name: "format current article",
        callback: () => this.formatArticle(),
        hotkeys: [{
          modifiers: ["Ctrl", "Alt"],
          key: "l"
        }]
      });
      this.addCommand({
        id: "easy-typing-format-switch",
        name: "switch autoformat",
        callback: () => this.switchAutoFormatting(),
        hotkeys: [{
          modifiers: ["Ctrl"],
          key: "tab"
        }]
      });
      this.addSettingTab(new EasyTypingSettingTab(this.app, this));
      this.registerEvent(this.app.workspace.on("editor-change", this.handleChange));
      this.registerEvent(this.app.workspace.on("editor-paste", this.handlePaste));
      this.registerEvent(this.app.workspace.on("file-open", this.handleFileOpen));
      this.registerEvent(this.app.workspace.on("click", this.handleClick));
      this.registerDomEvent(document, "keyup", this.handleKeyup);
      this.registerDomEvent(document, "keydown", this.handleKeydown);
      this.registerDomEvent(document, "beforeinput", this.handleBeforeInput);
      this.registerDomEvent(document, "selectionchange", this.handleSelectBegin);
    });
  }
  onunload() {
  }
  switchAutoFormatting() {
    this.settings.AutoFormatting = this.settings.AutoFormatting ? false : true;
    let status = this.settings.AutoFormatting ? "on" : "off";
    new import_obsidian2.Notice("Autoformat is " + status + "!");
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
var EasyTypingSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    let { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("a", { text: "More detail is in Github: easy-typing-obsidian", href: "https://github.com/Yaozhuwa/easy-typing-obsidian" });
    containerEl.createEl("h2", { text: "\u603B\u5F00\u5173 (Master Switch)" });
    new import_obsidian2.Setting(containerEl).setName("Auto formatting when typing").setDesc("\u662F\u5426\u5728\u7F16\u8F91\u6587\u6863\u65F6\u81EA\u52A8\u683C\u5F0F\u5316\u6587\u672C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.AutoFormatting).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.AutoFormatting = value;
        console.log("AutoFormatting:", value);
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("LineMode: Only formatting when line end.").setDesc("\u884C\u6A21\u5F0F\uFF1A\u53EA\u5728\u4E00\u884C\u8F93\u5165\u7ED3\u675F\uFF0C\u56DE\u8F66\u521B\u5EFA\u65B0\u884C\u7684\u65F6\u5019\uFF0C\u5BF9\u8BE5\u884C\u8FDB\u884C\u683C\u5F0F\u5316\u3002").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.FormattingWhenLineEnd).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.FormattingWhenLineEnd = value;
        console.log("FormattingWhenLineEnd:", value);
        yield this.plugin.saveSettings();
      }));
    });
    containerEl.createEl("h2", { text: "\u8BE6\u7EC6\u89C4\u5219\u5F00\u5173 (Sub Switches)" });
    new import_obsidian2.Setting(containerEl).setName("Full-Width symbol input enhancement").setDesc("\u5168\u89D2\u7B26\u53F7\u8F93\u5165\u589E\u5F3A").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.FullWidthCharacterEnhance).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.FullWidthCharacterEnhance = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between Chinese and English/number").setDesc("\u5728\u4E2D\u6587\u548C\u82F1\u6587/\u6570\u5B57\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.ChineseEnglishSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.ChineseEnglishSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Delete the Space between Chinese characters").setDesc("\u5728\u4E2D\u6587\u5B57\u7B26\u95F4\u53BB\u9664\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.ChineseNoSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.ChineseNoSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Smartly insert space between text and punctuation").setDesc("\u5728\u6587\u672C\u548C\u6807\u70B9\u95F4\u667A\u80FD\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.PunctuationSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.PunctuationSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Capitalize the first letter of every sentence").setDesc("\u82F1\u6587\u6BCF\u4E2A\u53E5\u9996\u5B57\u6BCD\u5927\u5199").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.Capitalization).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.Capitalization = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between inline code and text").setDesc("\u5728 `\u884C\u5185\u4EE3\u7801` \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.InlineCodeSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.InlineCodeSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between inline formula and text").setDesc("\u5728 $\u884C\u5185\u516C\u5F0F$ \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.InlineFormulaSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.InlineFormulaSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between link and text").setDesc("\u5728 [[wikilink]] mdlink \u548C\u6587\u672C\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.LinkSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.LinkSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Smart Space between link and text").setDesc("\u5728 [[wikilink]] mdlink \u548C\u6587\u672C\u95F4\u667A\u80FD\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.LinkSmartSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.LinkSmartSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    containerEl.createEl("h2", { text: "\u81EA\u5B9A\u4E49\u6B63\u5219 (Custom regular expressions)" });
    new import_obsidian2.Setting(containerEl).setName("User Defined RegExp Switch").setDesc("\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\u5F00\u5173\uFF0C\u5339\u914D\u5230\u7684\u5185\u5BB9\u4E0D\u8FDB\u884C\u683C\u5F0F\u5316").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.UserDefinedRegSwitch).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.UserDefinedRegSwitch = value;
        yield this.plugin.saveSettings();
      }));
    });
    new import_obsidian2.Setting(containerEl).setName("Space between User Defined Part(selected by RegExp) and text").setDesc("\u5728\u7528\u6237\u81EA\u5B9A\u4E49\u533A\u5757(\u6B63\u5219\u8868\u8FBE\u5F0F\u9009\u62E9)\u548C\u6587\u672C\u4E4B\u95F4\u7A7A\u683C").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.UserPartSpace).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.UserPartSpace = value;
        yield this.plugin.saveSettings();
      }));
    });
    const regContentAreaSetting = new import_obsidian2.Setting(containerEl);
    regContentAreaSetting.settingEl.setAttribute("style", "display: grid; grid-template-columns: 1fr;");
    regContentAreaSetting.setName("User-defined RegExp to ignore, one expression per line").setDesc("\u7528\u6237\u81EA\u5B9A\u4E49\u6B63\u5219\u8868\u8FBE\u5F0F\uFF0C\u5339\u914D\u5230\u7684\u5185\u5BB9\u4E0D\u8FDB\u884C\u683C\u5F0F\u5316\uFF0C\u6BCF\u884C\u4E00\u4E2A\u8868\u8FBE\u5F0F\uFF0C\u884C\u5C3E\u4E0D\u8981\u968F\u610F\u52A0\u7A7A\u683C");
    const regContentArea = new import_obsidian2.TextAreaComponent(regContentAreaSetting.controlEl);
    setAttributes(regContentArea.inputEl, {
      style: "margin-top: 12px; width: 100%;  height: 30vh;"
    });
    regContentArea.setValue(this.plugin.settings.UserDefinedRegExp).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.UserDefinedRegExp = value;
      this.plugin.saveSettings();
    }));
    containerEl.createEl("a", { text: "RegExp: \u6B63\u5219\u8868\u8FBE\u5F0F", href: "https://javascript.ruanyifeng.com/stdlib/regexp.html#" });
    containerEl.createEl("h2", { text: "Debug" });
    new import_obsidian2.Setting(containerEl).setName("Print debug info in console").setDesc("\u5728\u63A7\u5236\u53F0\u8F93\u51FA\u8C03\u8BD5\u4FE1\u606F").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.Debug).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.Debug = value;
        yield this.plugin.saveSettings();
      }));
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJjb3JlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgTm90aWNlLCBQbHVnaW4sIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIFRleHRBcmVhQ29tcG9uZW50LCBXb3Jrc3BhY2UsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IEVkaXRvclBvc2l0aW9uLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgSW5saW5lVHlwZSwgTGluZVR5cGUsIEFydGljbGVQYXJ0LCBJbmxpbmVQYXJ0LCBJbmxpbmVDaGFuZ2UgfSBmcm9tIFwiLi9jb3JlXCIgXHJcbmltcG9ydCB7IEZvcm1hdFNldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi9jb3JlJ1xyXG5pbXBvcnQgeyBzcGxpdEFydGljbGUsIHNwbGl0TGluZSwgZm9ybWF0TGluZSwgZ2V0TGluZVR5cGVGcm9tQXJ0aWNsZVBhcnRzLCBpc1Bvc2l0aW9uQmVmb3JlLCByZXBhcnNlQXJ0aWNsZVBhcnRzfSBmcm9tICcuL2NvcmUnXHJcbi8vIFJlbWVtYmVyIHRvIHJlbmFtZSB0aGVzZSBjbGFzc2VzIGFuZCBpbnRlcmZhY2VzIVxyXG5cclxuaW50ZXJmYWNlIEVkaXRvclNlbGVjdGlvbkNoYW5nZXtcclxuXHRiZWdpbjogRWRpdG9yUG9zaXRpb24sXHJcblx0ZW5kOiBFZGl0b3JQb3NpdGlvbixcclxuXHR0ZXh0OiBzdHJpbmcsXHJcblx0c2VsZWN0aW9uOiBib29sZWFuLFxyXG5cdHNlbGVjdGlvbkFuY2hvcjogRWRpdG9yUG9zaXRpb24sXHJcblx0c2VsZWN0aW9uSGVhZDogRWRpdG9yUG9zaXRpb25cclxufVxyXG5cclxuaW50ZXJmYWNlIFBhcnNlQXJ0aWNsZXtcclxuXHRjaGVjazogYm9vbGVhbjtcclxuXHRiZWdpbkxpbmVOdW1iZXI6IG51bWJlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QXR0cmlidXRlcyhlbGVtZW50OiBhbnksIGF0dHJpYnV0ZXM6IGFueSkge1xyXG5cdGZvciAobGV0IGtleSBpbiBhdHRyaWJ1dGVzKSB7XHJcblx0ICBlbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZXNba2V5XSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFYXN5VHlwaW5nUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcclxuXHRzZXR0aW5nczogRm9ybWF0U2V0dGluZ3M7XHJcblx0a2V5VXBkYXRlQ3Vyc29yOiBTZXQ8c3RyaW5nPjtcclxuXHRhcnRpY2xlUGFydHM6IEFydGljbGVQYXJ0W107XHJcblx0c2VsZWN0aW9uVGV4dENoYW5nZTogRWRpdG9yU2VsZWN0aW9uQ2hhbmdlfG51bGw7XHJcblx0cHJldkN1cnNvcjogRWRpdG9yUG9zaXRpb247XHJcblx0cmVwYXJzZUFydGljbGU6IFBhcnNlQXJ0aWNsZTtcclxuXHRlZGl0b3JDaGFuZ2VkOiBib29sZWFuO1xyXG5cclxuXHRzZWxlY3RlZFRleHQ6IHN0cmluZztcclxuXHRjaGFyQmVmb3JlQ3Vyc29yOiBzdHJpbmc7XHJcblx0Y2hhckFmdGVyQ3Vyc29yOiBzdHJpbmc7XHJcblx0a2V5RG93bkZsYWc6IGJvb2xlYW47XHJcblxyXG5cdGN0cmxEb3duTGluZUluZGV4OiBudW1iZXI7XHJcblx0YXN5bmMgb25sb2FkKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMucHJldkN1cnNvciA9IHtsaW5lOjAsIGNoOjB9O1xyXG5cdFx0dGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlID0gbnVsbDtcclxuXHRcdHRoaXMuZWRpdG9yQ2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5rZXlVcGRhdGVDdXJzb3IgPSBuZXcgU2V0KFsnQXJyb3dVcCcsICdBcnJvd0Rvd24nLCAnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnXSk7XHJcblxyXG5cdFx0dGhpcy5hcnRpY2xlUGFydHMgPSBudWxsO1xyXG5cdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtcclxuXHRcdFx0Y2hlY2s6IHRydWUsXHJcblx0XHRcdGJlZ2luTGluZU51bWJlcjogMFxyXG5cdFx0fTtcclxuXHJcblx0XHR0aGlzLmtleURvd25GbGFnID0gZmFsc2U7XHJcblx0XHR0aGlzLnNlbGVjdGVkVGV4dCA9IFwiXCI7XHJcblx0XHR0aGlzLmNoYXJCZWZvcmVDdXJzb3IgPSBcIlwiO1xyXG5cdFx0dGhpcy5jaGFyQWZ0ZXJDdXJzb3IgPSBcIlwiO1xyXG5cdFx0dGhpcy5jdHJsRG93bkxpbmVJbmRleCA9IDA7XHJcblxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6IFwiZWFzeS10eXBpbmctZm9ybWF0LXNlbGVjdGlvblwiLFxyXG5cdFx0XHRuYW1lOiBcImZvcm1hdCBzZWxlY3RlZCB0ZXh0XCIsXHJcblx0XHRcdGNhbGxiYWNrOiAoKSA9PiB0aGlzLmZvcm1hdFNlbGVjdGlvbigpLFxyXG5cdFx0XHRob3RrZXlzOiBbe1xyXG5cdFx0XHRcdG1vZGlmaWVyczogWydDdHJsJywgJ1NoaWZ0J10sXHJcblx0XHRcdFx0a2V5OiBcInNcIlxyXG5cdFx0XHR9XSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVhc3ktdHlwaW5nLWZvcm1hdC1hcnRpY2xlXCIsXHJcblx0XHRcdG5hbWU6IFwiZm9ybWF0IGN1cnJlbnQgYXJ0aWNsZVwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5mb3JtYXRBcnRpY2xlKCksXHJcblx0XHRcdGhvdGtleXM6IFt7XHJcblx0XHRcdFx0bW9kaWZpZXJzOiBbJ0N0cmwnLCAnQWx0J10sXHJcblx0XHRcdFx0a2V5OiBcImxcIlxyXG5cdFx0XHR9XSxcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHRcdGlkOiBcImVhc3ktdHlwaW5nLWZvcm1hdC1zd2l0Y2hcIixcclxuXHRcdFx0bmFtZTogXCJzd2l0Y2ggYXV0b2Zvcm1hdFwiLFxyXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy5zd2l0Y2hBdXRvRm9ybWF0dGluZygpLFxyXG5cdFx0XHRob3RrZXlzOiBbe1xyXG5cdFx0XHRcdG1vZGlmaWVyczogWydDdHJsJ10sXHJcblx0XHRcdFx0a2V5OiBcInRhYlwiXHJcblx0XHRcdH1dLFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgRWFzeVR5cGluZ1NldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgdGhpcy5oYW5kbGVDaGFuZ2UpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1wYXN0ZScsIHRoaXMuaGFuZGxlUGFzdGUpKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsIHRoaXMuaGFuZGxlRmlsZU9wZW4pKTtcclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljaykpO1xyXG5cdFx0Ly8gdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKGxlYWY6IFdvcmtzcGFjZUxlYWYpPT57XHJcblx0XHQvLyBcdGNvbnNvbGUubG9nKFwiPT09PmxlYWYgY2hhbmdlIVwiKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2cobGVhZi5nZXREaXNwbGF5VGV4dCgpKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2cobGVhZi52aWV3LmdldFZpZXdUeXBlKCkpO1xyXG5cdFx0Ly8gfSkpO1xyXG5cclxuXHRcdC8vIElmIHRoZSBwbHVnaW4gaG9va3MgdXAgYW55IGdsb2JhbCBET00gZXZlbnRzIChvbiBwYXJ0cyBvZiB0aGUgYXBwIHRoYXQgZG9lc24ndCBiZWxvbmcgdG8gdGhpcyBwbHVnaW4pXHJcblx0XHQvLyBVc2luZyB0aGlzIGZ1bmN0aW9uIHdpbGwgYXV0b21hdGljYWxseSByZW1vdmUgdGhlIGV2ZW50IGxpc3RlbmVyIHdoZW4gdGhpcyBwbHVnaW4gaXMgZGlzYWJsZWQuXHJcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5dXApO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5ZG93bilcclxuXHRcdHRoaXMucmVnaXN0ZXJEb21FdmVudChkb2N1bWVudCwgJ2JlZm9yZWlucHV0JywgdGhpcy5oYW5kbGVCZWZvcmVJbnB1dCk7XHJcblx0XHQvLyB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdzZWxlY3QnLCAoZXY6IEV2ZW50KT0+e2NvbnNvbGUubG9nKCdzZWxlY3QnKTsgdGhpcy5oYW5kbGVTZWxlY3QoZXYpO30pO1xyXG5cdFx0dGhpcy5yZWdpc3RlckRvbUV2ZW50KGRvY3VtZW50LCAnc2VsZWN0aW9uY2hhbmdlJywgdGhpcy5oYW5kbGVTZWxlY3RCZWdpbik7XHJcblx0XHQvLyB0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoZG9jdW1lbnQsICdjaGFuZ2UnLCAoZXY6IEV2ZW50KT0+e2NvbnNvbGUubG9nKCdDaGFuZ2U6JywgZXYpfSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblxyXG5cdH1cclxuXHJcblx0Z2V0RWRpdG9yPSgpOkVkaXRvcnxudWxsPT5cclxuXHR7XHJcblx0XHRsZXQgZWRpdG9yID0gbnVsbDtcclxuXHRcdGxldCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0aWYobWFya2Rvd25WaWV3KVxyXG5cdFx0e1xyXG5cdFx0XHRlZGl0b3IgPSBtYXJrZG93blZpZXcuZWRpdG9yO1xyXG5cdFx0fVxyXG5cdFx0aWYoZWRpdG9yID09PSBudWxsICYmIHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKCdjYW5cXCd0IGdldCBlZGl0b3InKTtcclxuXHRcdHJldHVybiBlZGl0b3I7XHJcblx0fVxyXG5cclxuXHRmb3JtYXRBcnRpY2xlID0gKCk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJCZWdpbiBmb3JtYXQgQXJ0aWNsZVwiKTtcclxuXHRcdH1cclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdGxldCBsaW5lQ291bnQgPSBlZGl0b3IubGluZUNvdW50KCk7XHJcblx0XHRmb3IgKGxldCBpPTA7IGk8bGluZUNvdW50OyBpKyspXHJcblx0XHR7XHJcblx0XHRcdGlmKHRoaXMuaXNUZXh0UGFydChpKSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMuRm9ybWF0TGluZVdpdGhvdXRDaGVja1BhcnQoZWRpdG9yLCBpKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0bmV3IE5vdGljZShcIkZvcm1hdCBBcnRpY2xlIERvbmUhXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Zm9ybWF0U2VsZWN0aW9uID0gKCk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJCZWdpbiBmb3JtYXQgU2VsZWN0aW9uXCIpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yKCk7XHJcblx0XHRpZighZWRpdG9yKSByZXR1cm47XHJcblx0XHR0aGlzLnVwZGF0ZUFydGljbGVQYXJ0cyhlZGl0b3IpO1xyXG5cclxuXHRcdGlmKCFlZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSB8fCBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk9PT0nJylcclxuXHRcdHtcclxuXHRcdFx0bGV0IGxpbmVOdW1iZXIgPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdFx0aWYodGhpcy5pc1RleHRQYXJ0KGxpbmVOdW1iZXIpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0dGhpcy5Gb3JtYXRMaW5lV2l0aG91dENoZWNrUGFydChlZGl0b3IsIGxpbmVOdW1iZXIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGxpbmVOdW1iZXIsIGNoOmVkaXRvci5nZXRMaW5lKGxpbmVOdW1iZXIpLmxlbmd0aH0pO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHNlbGVjdGlvbiA9IGVkaXRvci5saXN0U2VsZWN0aW9ucygpWzBdO1xyXG5cdFx0bGV0IGxpbmVCZWdpblJlcGFyc2UgPSBzZWxlY3Rpb24uYW5jaG9yLmxpbmU7XHJcblx0XHRpZihsaW5lQmVnaW5SZXBhcnNlPnNlbGVjdGlvbi5oZWFkLmxpbmUpXHJcblx0XHR7XHJcblx0XHRcdGxpbmVCZWdpblJlcGFyc2UgPSBzZWxlY3Rpb24uaGVhZC5saW5lO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmxpbmVCZWdpblJlcGFyc2V9O1xyXG5cclxuXHRcdGxldCBzZWxlY3RlZEFydGljbGUgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XHJcblx0XHRsZXQgYXJ0aWNsZVBhcnRzID0gc3BsaXRBcnRpY2xlKHNlbGVjdGVkQXJ0aWNsZSk7XHJcblx0XHRsZXQgbGluZXMgPSBzZWxlY3RlZEFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG5cdFx0bGV0IHJlc3VsdCA9IFwiXCI7XHJcblx0XHRmb3IobGV0IGk9MDsgaTxhcnRpY2xlUGFydHMubGVuZ3RoOyBpKyspXHJcblx0XHR7XHJcblx0XHRcdGlmKGFydGljbGVQYXJ0c1tpXS50eXBlIT1MaW5lVHlwZS50ZXh0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGo9YXJ0aWNsZVBhcnRzW2ldLmJlZ2luOyBqPGFydGljbGVQYXJ0c1tpXS5lbmQ7aisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGxpbmUgKyAnXFxuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHQvLyBcdTVCRjlcdTZCQ0ZcdTg4NENcdThGREJcdTg4NENcdTY4M0NcdTVGMEZcdTUzMTZcclxuXHRcdFx0XHRmb3IobGV0IGo9YXJ0aWNsZVBhcnRzW2ldLmJlZ2luOyBqPGFydGljbGVQYXJ0c1tpXS5lbmQ7aisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBsaW5lID0gbGluZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld2xpbmUgPSBmb3JtYXRMaW5lKGxpbmUsIHtsaW5lOjAsIGNoOmxpbmUubGVuZ3RofSwgdGhpcy5zZXR0aW5ncylbMF07XHJcblx0XHRcdFx0XHRyZXN1bHQgKz0gbmV3bGluZSArICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKDAsIHJlc3VsdC5sZW5ndGgtMSk7XHJcblx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihyZXN1bHQpO1xyXG5cdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcblx0XHR7XHJcblx0XHRcdG5ldyBOb3RpY2UoXCJGb3JtYXQgU2VsZWN0aW9uIERvbmUhXCIpO1xyXG5cdFx0XHRjb25zb2xlLmxvZyhcIkVuZCBmb3JtYXQgU2VsZWN0aW9uXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c3dpdGNoQXV0b0Zvcm1hdHRpbmcoKVxyXG4gICAge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmcgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPyBmYWxzZTp0cnVlO1xyXG4gICAgICAgIGxldCBzdGF0dXMgPSB0aGlzLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nPydvbic6J29mZic7XHJcbiAgICAgICAgbmV3IE5vdGljZSgnQXV0b2Zvcm1hdCBpcyAnKyBzdGF0dXMgKychJyk7XHJcbiAgICB9XHJcblxyXG5cclxuXHRoYW5kbGVCZWZvcmVJbnB1dD0oZXY6IElucHV0RXZlbnQpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwiPT09PiBCZWZvcmUgSW5wdXRcIik7XHJcblx0XHRpZighdGhpcy5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlKSByZXR1cm47XHJcblx0XHRsZXQgZWRpdG9yID0gdGhpcy5nZXRFZGl0b3IoKTtcclxuXHRcdGlmKCFlZGl0b3IpIHJldHVybjtcclxuXHJcblx0XHQvLyBvYnNpZGlhbiBcdTU3MjggbGl2ZSBwcmV2aWV3IFx1NkEyMVx1NUYwRlx1NEUwQlx1NEYxQVx1NjcwOVx1OTUxOVx1OEJFRlx1OTAwOVx1NEUyRFx1NTMzQVx1NTdERlx1NzY4NCBCdWdcclxuXHRcdGxldCBzcGVjaWFsQ2hhciA9IG5ldyBTZXQoWydcdTMwMTAnLCAnXHUzMDExJywnXHUwMEI3JywgJz0nLCAnXHUyMDFDJywgJ1x1MjAxRCcsICdcdTMwMEEnLCAnXHUzMDBCJywgJ1x1MjAxOCcsICdcdTIwMTknLCAnXHVGRjA4JywgJ1x1RkYwOScsICdcdUZGRTUnXSk7XHJcblxyXG5cdFx0aWYoZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkgJiYgZWRpdG9yLmdldFNlbGVjdGlvbigpIT1cIlwiKXtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ0JlZm9yZSBDaGFuZ2UgU2VsZWN0aW9uOicsIGVkaXRvci5nZXRTZWxlY3Rpb24oKSwgXCJcdTY2RkZcdTYzNjJcdTUxODVcdTVCQjlcIixldi5kYXRhKTtcclxuXHRcdFx0aWYoZXYuZGF0YS5sZW5ndGghPTEgfHwgc3BlY2lhbENoYXIuaGFzKGVkaXRvci5nZXRTZWxlY3Rpb24oKSkpIHJldHVybjtcclxuXHJcblx0XHRcdGxldCBzZWxlY3RlZEZvcm1hdFJhbmdlID0gZWRpdG9yLmxpc3RTZWxlY3Rpb25zKClbMF07XHJcblx0XHRcdGxldCBiZWdpbjogRWRpdG9yUG9zaXRpb247XHJcblx0XHRcdGxldCBlbmQ6IEVkaXRvclBvc2l0aW9uO1xyXG5cdFx0XHRsZXQgYW5jaG9yOiBFZGl0b3JQb3NpdGlvbjtcclxuXHRcdFx0bGV0IGhlYWQ6IEVkaXRvclBvc2l0aW9uO1xyXG5cdFx0XHRpZihpc1Bvc2l0aW9uQmVmb3JlKHNlbGVjdGVkRm9ybWF0UmFuZ2UuYW5jaG9yLCBzZWxlY3RlZEZvcm1hdFJhbmdlLmhlYWQpKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0YmVnaW4gPSBzZWxlY3RlZEZvcm1hdFJhbmdlLmFuY2hvcjtcclxuXHRcdFx0XHRcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNle1xyXG5cdFx0XHRcdGJlZ2luID0gc2VsZWN0ZWRGb3JtYXRSYW5nZS5oZWFkO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVuZCA9IHtsaW5lOiBiZWdpbi5saW5lLCBjaDogYmVnaW4uY2grMX07XHJcblx0XHRcdGFuY2hvciA9IHtsaW5lOiBzZWxlY3RlZEZvcm1hdFJhbmdlLmFuY2hvci5saW5lLCBjaDogc2VsZWN0ZWRGb3JtYXRSYW5nZS5hbmNob3IuY2grMX07XHJcblx0XHRcdGhlYWQgPSB7bGluZTogc2VsZWN0ZWRGb3JtYXRSYW5nZS5oZWFkLmxpbmUsIGNoOiBzZWxlY3RlZEZvcm1hdFJhbmdlLmhlYWQuY2grMX07XHJcblxyXG5cdFx0XHRsZXQgdGV4dDogc3RyaW5nO1xyXG5cdFx0XHRzd2l0Y2goZXYuZGF0YSlcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNhc2UgJ1x1MzAxMCc6XHJcblx0XHRcdFx0Y2FzZSAnXHUzMDExJzpcclxuXHRcdFx0XHRcdHRleHQgPSBcIltcIitlZGl0b3IuZ2V0U2VsZWN0aW9uKCkrXCJdXCI7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdcdTAwQjcnOlxyXG5cdFx0XHRcdFx0dGV4dCA9IFwiYFwiK2VkaXRvci5nZXRTZWxlY3Rpb24oKStcImBcIjtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5iZWdpbkxpbmVOdW1iZXIgPSBiZWdpbi5saW5lXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdcdUZGRTUnOlxyXG5cdFx0XHRcdGNhc2UgJ1x1MDBBNSc6XHJcblx0XHRcdFx0XHR0ZXh0ID0gXCIkXCIrZWRpdG9yLmdldFNlbGVjdGlvbigpK1wiJFwiO1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayA9IHRydWU7XHJcblx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmJlZ2luTGluZU51bWJlciA9IGJlZ2luLmxpbmVcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1x1MjAxQyc6XHJcblx0XHRcdFx0Y2FzZSAnXHUyMDFEJzpcclxuXHRcdFx0XHRcdHRleHQgPSBcIlx1MjAxQ1wiK2VkaXRvci5nZXRTZWxlY3Rpb24oKStcIlx1MjAxRFwiO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnXHUyMDE4JzpcclxuXHRcdFx0XHRjYXNlICdcdTIwMTknOlxyXG5cdFx0XHRcdFx0dGV4dCA9ICdcdTIwMTgnK2VkaXRvci5nZXRTZWxlY3Rpb24oKSsnXHUyMDE5JztcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1x1MzAwQSc6XHJcblx0XHRcdFx0Y2FzZSAnXHUzMDBCJzpcclxuXHRcdFx0XHRcdHRleHQgPSAnXHUzMDBBJytlZGl0b3IuZ2V0U2VsZWN0aW9uKCkrJ1x1MzAwQic7XHJcblx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1RkYwOCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdUZGMDknOlxyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coXCJJIGFtIGhlcmVcIilcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJ1x1RkYwOCcrZWRpdG9yLmdldFNlbGVjdGlvbigpKydcdUZGMDknO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcbiAgICAgICAgICAgICAgICAvLyBjYXNlICd7JzpcclxuICAgICAgICAgICAgICAgIC8vIGNhc2UgJ30nOlxyXG4gICAgICAgICAgICAgICAgLy8gICAgIHRleHQgPSAneycrZWRpdG9yLmdldFNlbGVjdGlvbigpKyd9JztcclxuXHRcdFx0XHQvLyBcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHR0aGlzLnByZXZDdXJzb3IgPSBiZWdpbjtcclxuXHRcdFx0XHRcdGxldCByZWdSZXBhcnNlID0gL15bXFwtXFwkXFxgXXxbXFwtXFwkXFxgXVxccyokfFxcbi9tO1xyXG5cdFx0XHRcdFx0bGV0IHJlZyA9IC9bLVxcYFxcJF0vO1xyXG5cdFx0XHRcdFx0aWYocmVnUmVwYXJzZS50ZXN0KGVkaXRvci5nZXRTZWxlY3Rpb24oKSkgfHwgcmVnLnRlc3QoZXYuZGF0YSkpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmJlZ2luTGluZU51bWJlciA9IGJlZ2luLmxpbmVcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0aW9uVGV4dENoYW5nZSA9IG51bGw7XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgPSB7XHJcblx0XHRcdFx0YmVnaW46IGJlZ2luLFxyXG5cdFx0XHRcdGVuZDogZW5kLFxyXG5cdFx0XHRcdHRleHQ6IHRleHQsXHJcblx0XHRcdFx0c2VsZWN0aW9uOiB0cnVlLFxyXG5cdFx0XHRcdHNlbGVjdGlvbkFuY2hvcjphbmNob3IsXHJcblx0XHRcdFx0c2VsZWN0aW9uSGVhZDogaGVhZFxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRoYW5kbGVLZXlkb3duPShldnQ6IEtleWJvYXJkRXZlbnQpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdrZXkgZG93bicsIGV2dC5rZXksIGV2dC5jdHJsS2V5LCBldnQuc2hpZnRLZXkpO1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09JylcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2tleWRvd246JywgZXZ0LmtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy5rZXlEb3duRmxhZyA9IHRydWU7XHJcblx0XHRpZihldnQua2V5ID09PSAnQ29udHJvbCcpIHRoaXMuY3RybERvd25MaW5lSW5kZXggPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdC8vIGNvbnNvbGUubG9nKCd0ZXh0IGFmdGVyIGtleSBkb3duOicsIGVkaXRvci5nZXRMaW5lKGVkaXRvci5nZXRDdXJzb3IoKS5saW5lKSk7XHJcblx0fVxyXG5cdFxyXG5cdGhhbmRsZUtleXVwPShldnQ6IEtleWJvYXJkRXZlbnQpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PScpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdrZXl1cDonLCBldnQua2V5KTtcclxuICAgICAgICB9XHJcblxyXG5cdFx0bGV0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yKCk7XHJcblx0XHRpZighZWRpdG9yKSByZXR1cm47XHJcblx0XHR0aGlzLmtleURvd25GbGFnID0gZmFsc2U7XHJcblxyXG5cdFx0Ly8gXHU1OTA0XHU3NDA2XHU0RTBEXHU2NkY0XHU2NUIwIGVkaXRvckNoYW5nZWQgXHU3Njg0XHU2MzA5XHU5NTJFXHJcblx0XHRpZihldnQua2V5ID09PSAnUHJvY2VzcycgfHwgZXZ0LmtleSA9PT0gJ1NoaWZ0JylcclxuXHRcdHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NjZGNFx1NjVCMFx1OTAwOVx1NEUyRFx1NzY4NFx1NjU4N1x1NjcyQ1x1RkYwQ1x1NzUyOFx1NEU4RVx1NTQwRVx1N0VFRFx1NTIyMFx1OTY2NFx1OTUyRVx1ODlFNlx1NTNEMVx1NjVGNlx1NTIyNFx1NjVBRFx1NjYyRlx1NTQyNlx1OTcwMFx1ODk4MVx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NjU4N1x1NjcyQ1xyXG5cdFx0aWYoZXZ0LmtleSE9J0JhY2tzcGFjZScgJiYgZXZ0LmtleSE9J0VudGVyJyAmJiBldnQua2V5IT0nRGVsZXRlJylcclxuXHRcdHtcclxuXHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdH1cclxuXHRcdC8vIGlmKHRoaXMua2V5VXBkYXRlQ3Vyc29yLmhhcyhldnQua2V5KSlcdFx0XHJcblxyXG5cdFx0Ly8gXHU1OTA0XHU3NDA2XHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHU3Njg0XHU2MEM1XHU1MUI1XHU0RTBCXHU2MzA5XHU5NTJFXHU0RjdGXHU3NTI4XHU3Mjc5XHU1QjlBXHU3Njg0XHU1MTY4XHU4OUQyXHU3QjI2XHU1M0Y3XHJcblx0XHRpZih0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgJiYgdGhpcy5zZXR0aW5ncy5BdXRvRm9ybWF0dGluZylcclxuXHRcdHtcclxuXHRcdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZSh0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UudGV4dCwgdGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlLmJlZ2luLCB0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UuZW5kKTtcclxuXHRcdFx0ZWRpdG9yLnNldFNlbGVjdGlvbih0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2Uuc2VsZWN0aW9uQW5jaG9yLCB0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2Uuc2VsZWN0aW9uSGVhZCk7XHJcblx0XHRcdHRoaXMucHJldkN1cnNvciA9IHRoaXMuc2VsZWN0aW9uVGV4dENoYW5nZS5zZWxlY3Rpb25IZWFkO1xyXG5cdFx0XHR0aGlzLnNlbGVjdGlvblRleHRDaGFuZ2UgPSBudWxsO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5zZWxlY3Rpb25UZXh0Q2hhbmdlID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0Ly8gXHU1NzI4XHU0RUU1XHU0RTBCXHU2MEM1XHU1MUI1XHU0RTBCXHU2M0QyXHU0RUY2XHU0RTBEXHU1NENEXHU1RTk0XHJcblx0XHRpZighdGhpcy5lZGl0b3JDaGFuZ2VkIHx8IHRoaXMuc2V0dGluZ3MuQXV0b0Zvcm1hdHRpbmc9PT1mYWxzZSlcclxuXHRcdHtcclxuICAgICAgICAgICAgdGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFx1NTkwNFx1NzQwNlx1NjRBNFx1NTZERVx1MzAwMVx1NTNDRFx1NjRBNFx1NTZERVx1NTQ4Q1x1NTI2QVx1NTIwN1x1RkYwQ1x1OTcwMFx1ODk4MVx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NjU4N1x1Njg2M1xyXG5cdFx0aWYoZXZ0LmN0cmxLZXkgJiYgKGV2dC5rZXk9PT0neicgfHwgZXZ0LmtleT09PSd5JyB8fCBldnQua2V5PT09J3gnKSlcclxuXHRcdHtcclxuXHRcdFx0bGV0IGxpbmVSZXBhcnNlQmVnaW4gPSBlZGl0b3IuZ2V0Q3Vyc29yKCkubGluZTtcclxuXHRcdFx0aWYobGluZVJlcGFyc2VCZWdpbj50aGlzLmN0cmxEb3duTGluZUluZGV4KVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0bGluZVJlcGFyc2VCZWdpbiA9IHRoaXMuY3RybERvd25MaW5lSW5kZXg7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOiBsaW5lUmVwYXJzZUJlZ2lufTtcclxuXHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ3JlcGFyc2UgYmVnaW46JywgbGluZVJlcGFyc2VCZWdpbik7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBcdTUyMjBcdTk2NjRcdTY1ODdcdTY3MkNcdTU0MEVcdTk3MDBcdTg5ODFcdTkxQ0RcdTY1QjBcdTg5RTNcdTY3OTBcdTY1ODdcdTY3MkNcclxuXHRcdGxldCByZWdUZXN0UmVwYXJzZSA9IC9eW1xcLVxcJGBdfFtcXC1cXCRcXGBdXFxzKiR8XFxufFxcJFxcJHwtLS18YGBgL2dtO1xyXG5cdFx0Ly8gbGV0IHNldFRlc3RSZXBhcnNlID0gbmV3IFNldChbJ1xcbicsICctJywgJyQnLCAnYCddKTtcclxuXHRcdGxldCBjcyA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGxldCBjaGFyQWZ0ZXJDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcblx0XHRcdHtsaW5lOiBjcy5saW5lLCBjaDpjcy5jaH0sXHJcblx0XHRcdHtsaW5lOiBjcy5saW5lLCBjaDpjcy5jaCsxfVxyXG5cdFx0KTtcclxuXHRcdHN3aXRjaChldnQua2V5KVxyXG5cdFx0e1xyXG5cdFx0XHRjYXNlICdCYWNrc3BhY2UnOlxyXG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKCdzZWxlY3RlZCcsIHRoaXMuc2VsZWN0ZWRUZXh0KVxyXG5cdFx0XHRcdC8vIGlmKHRoaXMuc2V0dGluZ3MuRnVsbFdpZHRoQ2hhcmFjdGVyRW5oYW5jZSlcclxuXHRcdFx0XHQvLyB7XHJcblx0XHRcdFx0Ly8gXHRpZih0aGlzLnNlbGVjdGVkVGV4dD09PSdcdTMwMEEnICYmIGNoYXJBZnRlckN1cnNvcj09PSdcdTMwMEInKVxyXG5cdFx0XHRcdC8vIFx0e1xyXG5cdFx0XHRcdC8vIFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKCcnLCBcclxuXHRcdFx0XHQvLyBcdFx0XHR7bGluZTogY3MubGluZSwgY2g6Y3MuY2h9LFxyXG5cdFx0XHRcdC8vIFx0XHRcdHtsaW5lOiBjcy5saW5lLCBjaDpjcy5jaCsxfSk7XHJcblx0XHRcdFx0Ly8gXHR9XHJcblx0XHRcdFx0Ly8gfVxyXG5cdFx0XHRcdGlmKCh0aGlzLnNlbGVjdGVkVGV4dCE9XCJcIiAmJiAhcmVnVGVzdFJlcGFyc2UudGVzdCh0aGlzLnNlbGVjdGVkVGV4dCkpIHx8IFxyXG5cdFx0XHRcdCAgICAodGhpcy5zZWxlY3RlZFRleHQ9PT1cIlwiICYmICFyZWdUZXN0UmVwYXJzZS50ZXN0KHRoaXMuY2hhckJlZm9yZUN1cnNvcikpKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUuY2hlY2sgPSBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZXtcclxuXHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjplZGl0b3IuZ2V0Q3Vyc29yKCkubGluZX07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMudXBkYXRlU2VsZWN0aW9uKGVkaXRvcik7XHJcblx0XHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHRcdHRoaXMuZWRpdG9yQ2hhbmdlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMudXBkYXRlQXJ0aWNsZVBhcnRzKGVkaXRvcik7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRjYXNlICdEZWxldGUnOlxyXG5cdFx0XHRcdGlmKCh0aGlzLnNlbGVjdGVkVGV4dCE9XCJcIiAmJiAhcmVnVGVzdFJlcGFyc2UudGVzdCh0aGlzLnNlbGVjdGVkVGV4dCkpIHx8IFxyXG5cdFx0XHRcdCAgICAodGhpcy5zZWxlY3RlZFRleHQ9PT1cIlwiICYmICFyZWdUZXN0UmVwYXJzZS50ZXN0KHRoaXMuY2hhckFmdGVyQ3Vyc29yKSkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayA9IGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNle1xyXG5cdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmVkaXRvci5nZXRDdXJzb3IoKS5saW5lfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHRcdFx0XHR0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHRcdFx0dGhpcy5lZGl0b3JDaGFuZ2VkID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGNhc2UgJ0VudGVyJzpcclxuXHRcdFx0XHRsZXQgcHJldkxpbmVJbmRleCA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lLTE7XHJcblx0XHRcdFx0cHJldkxpbmVJbmRleCA9IHByZXZMaW5lSW5kZXg+MD9wcmV2TGluZUluZGV4OjA7XHJcblx0XHRcdFx0aWYoIWV2dC5jdHJsS2V5KSB0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6ZWRpdG9yLmdldEN1cnNvcigpLmxpbmUtMX07XHJcblx0XHRcdFx0Ly8vaWYgZ2V0IG5ldyBsaW5lLCBmb3JtYXQgUHJldiBsaW5lXHJcblx0XHRcdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdFx0XHRpZih0aGlzLmlzVGV4dFBhcnQocHJldkxpbmVJbmRleCkpXHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0aWYodGhpcy5zZXR0aW5ncy5Gb3JtYXR0aW5nV2hlbkxpbmVFbmQpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdHRoaXMuRm9ybWF0TGluZVdpdGhvdXRDaGVja1BhcnQoZWRpdG9yLCBwcmV2TGluZUluZGV4KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2VcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0bGV0IHByZXZMaW5lRW5kQ3Vyc29yID0ge2xpbmU6IHByZXZMaW5lSW5kZXgsIGNoOiBlZGl0b3IuZ2V0TGluZShwcmV2TGluZUluZGV4KS5sZW5ndGh9XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVMaW5lKGVkaXRvciwgcHJldkxpbmVJbmRleCwgcHJldkxpbmVFbmRDdXJzb3IsIHRoaXMuc2V0dGluZ3MsIHByZXZMaW5lRW5kQ3Vyc29yLCBlZGl0b3IuZ2V0Q3Vyc29yKCkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvbihlZGl0b3IpO1xyXG5cdFx0XHRcdHRoaXMucHJldkN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGxldCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHQvLyBcdTVGNTNcdTUxNDlcdTY4MDdcdTUyNERcdTUxRTBcdTRFMkFcdTVCNTdcdTdCMjZcdTRFM0EgXCIkJFwiIC8gXCJgYGBcIiAvIFwiLS0tXCIgXHU2NUY2XHVGRjBDXHU0RUNFXHU1RjUzXHU1MjREXHU4ODRDXHU5MUNEXHU2NUIwXHU4OUUzXHU2NzkwXHU1MTY4XHU2NTg3XHJcblx0XHR7XHJcblx0XHRcdFxyXG5cdFx0XHRsZXQgdHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICk7XHJcblx0XHRcdGxldCB0aHJlZUNoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0zfSxcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICApO1xyXG5cclxuXHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gXCIkJFwiIHx8IHRocmVlQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gXCJgYGBcIiB8fCB0aHJlZUNoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT0gXCItLS1cIilcclxuXHRcdFx0e1xyXG5cdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjogY3Vyc29yLmxpbmV9O1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gXHU0RTJEXHU2NTg3XHU1MTY4XHU4OUQyXHU3QjI2XHU1M0Y3XHU4RkRFXHU3RUVEXHU4RjkzXHU1MTY1XHU1ODlFXHU1RjNBXHU1MjlGXHU4MEZEXHJcblx0XHRpZih0aGlzLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2UgJiYgIWVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpKVxyXG4gICAgICAgIHtcclxuXHRcdFx0XHJcbiAgICAgICAgICAgIGxldCB0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG5cdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG5cdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG5cdFx0XHQpO1xyXG5cdFx0XHRsZXQgY2hhckJlZm9yZUN1cnNvciA9IGVkaXRvci5nZXRSYW5nZShcclxuXHRcdFx0XHR7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuXHRcdFx0XHR7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuXHRcdFx0KTtcclxuICAgICAgICAgICAgbGV0IHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yID0gZWRpdG9yLmdldFJhbmdlKFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBsZXQgY2hhcmFjdGVyMmN1cnNvcjEgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGxldCB0d29DaGFyYWN0ZXJzQWZ0ZXJDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH0sXHJcbiAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsyfVxyXG4gICAgICAgICAgICApO1xyXG5cdFx0XHRcclxuICAgICAgICAgICAgc3dpdGNoKGV2dC5rZXkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJyQnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHVGRkU1JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MDBBNSc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkZFNVx1RkZFNScgfHwgdHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1MDBBNVx1MDBBNScpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJyQkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6Y3Vyc29yLmxpbmV9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdGVsc2UgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJyQkJylcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjpjdXJzb3IubGluZX07XHJcblx0XHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjaGFyYWN0ZXIyY3Vyc29yMT09PSckXHVGRkU1JCcgfHwgY2hhcmFjdGVyMmN1cnNvcjE9PT0nJFx1MDBBNSQnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICckJCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcik7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjpjdXJzb3IubGluZX07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlICdbJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MzAxMCc6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1tbJyAmJiB0d29DaGFyYWN0ZXJzQWZ0ZXJDdXJzb3IhPSddXScgJiYhZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1tbXV0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2FzZSAnYCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdTAwQjcnOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTAwQjdcdTAwQjcnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdgYCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZXBhcnNlQXJ0aWNsZSA9IHtjaGVjazogdHJ1ZSwgYmVnaW5MaW5lTnVtYmVyOmN1cnNvci5saW5lfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihjaGFyYWN0ZXIyY3Vyc29yMT09PSdgXHUwMEI3YCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2BgYFxcbmBgYCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX0pO1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6Y3Vyc29yLmxpbmV9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1RkYxQSc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICc6JzpcclxuXHRcdFx0XHRjYXNlIGA7YDpcclxuXHRcdFx0XHRjYXNlIGBcdUZGMUJgOlxyXG5cdFx0XHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkYxQlx1RkYxQicpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcblx0XHRcdFx0XHRcdFx0JzsnLFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuXHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGMUFcdUZGMUEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc6JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHRcdFx0XHRjYXNlIGAsYDpcclxuXHRcdFx0XHRjYXNlIGBcdUZGMENgOlxyXG5cdFx0XHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkYwQ1x1RkYwQycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJywnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHUzMDAxJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJy8nOlxyXG5cdFx0XHRcdFx0aWYoY3Vyc29yLmNoPT09MSAmJiBjaGFyQmVmb3JlQ3Vyc29yPT09J1x1MzAwMScpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1MzAwMVx1MzAwMScpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJy8nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHUzMDAyJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJy4nOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTMwMDJcdTMwMDInKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcuJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJygnOlxyXG4gICAgICAgICAgICAgICAgY2FzZSAnXHVGRjA4JzpcclxuXHRcdFx0XHRcdGlmIChjaGFyQmVmb3JlQ3Vyc29yPT09J1x1RkYwOCcgJiYgdHdvQ2hhcmFjdGVyc05lYXJDdXJzb3IhPSdcdUZGMDhcdUZGMDknKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1x1RkYwOFx1RkYwOScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofSk7XHJcblx0XHRcdFx0XHR9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0d29DaGFyYWN0ZXJzQmVmb3JlQ3Vyc29yID09PSAnXHVGRjA4XHVGRjA4JyAmJiB0d29DaGFyYWN0ZXJzTmVhckN1cnNvcj09PSdcdUZGMDhcdUZGMDknKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoKScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0yfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ1x1MzAwQic6XHJcbiAgICAgICAgICAgICAgICBjYXNlICc+JzpcclxuXHRcdFx0XHRcdGlmKGN1cnNvci5jaD09PTEgJiYgY2hhckJlZm9yZUN1cnNvcj09PSdcdTMwMEInKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJz4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTMwMEJcdTMwMEInKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc+JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0XHRcdGVsc2UgaWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJz5cdTMwMEInKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJz4nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcihjdXJzb3IpO1xyXG5cdFx0XHRcdFx0fVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnPCc6XHJcbiAgICAgICAgICAgICAgICBjYXNlICdcdTMwMEEnOlxyXG5cdFx0XHRcdFx0aWYgKGNoYXJCZWZvcmVDdXJzb3I9PT0nXHUzMDBBJyAmJiB0d29DaGFyYWN0ZXJzTmVhckN1cnNvciE9J1x1MzAwQVx1MzAwQicpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXHUzMDBBXHUzMDBCJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9KTtcclxuXHRcdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTMwMEFcdTMwMEEnICYmIHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yPT09J1x1MzAwQVx1MzAwQicpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnISc6XHJcblx0XHRcdFx0Y2FzZSAnXHVGRjAxJzpcclxuXHRcdFx0XHRcdGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdUZGMDFcdUZGMDEnKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICchJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTJ9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2h9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHRcdFx0XHRjYXNlICd8JzpcclxuXHRcdFx0XHRjYXNlICdcdUZGNUMnOlxyXG5cdFx0XHRcdFx0aWYodHdvQ2hhcmFjdGVyc0JlZm9yZUN1cnNvciA9PT0gJ1x1RkY1Q1x1RkY1QycpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3wnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ1wiJzpcclxuXHRcdFx0XHRcdGlmIChjaGFyQmVmb3JlQ3Vyc29yPT09J1x1MjAxQycgJiYgdHdvQ2hhcmFjdGVyc05lYXJDdXJzb3IhPSdcdTIwMUNcdTIwMUQnKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1x1MjAxQ1x1MjAxRCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTIwMUNcdTIwMUQnICYmIHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yPT09J1x1MjAxRFx1MjAxRCcpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiXCInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaCsxfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Y2FzZSAnXFwnJzpcclxuXHRcdFx0XHRcdGlmIChjaGFyQmVmb3JlQ3Vyc29yPT09J1x1MjAxOCcgJiYgdHdvQ2hhcmFjdGVyc05lYXJDdXJzb3IhPSdcdTIwMThcdTIwMTknKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKFxyXG5cdFx0XHRcdFx0XHRcdCdcdTIwMThcdTIwMTknLFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoLTF9LFxyXG5cdFx0XHRcdFx0XHRcdHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofVxyXG5cdFx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHtsaW5lOiBjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNofSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRlbHNlIGlmKHR3b0NoYXJhY3RlcnNCZWZvcmVDdXJzb3IgPT09ICdcdTIwMThcdTIwMTknICYmIHR3b0NoYXJhY3RlcnNOZWFyQ3Vyc29yPT09J1x1MjAxOVx1MjAxOScpXHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlUmFuZ2UoXHJcblx0XHRcdFx0XHRcdFx0J1xcJ1xcJycsXHJcblx0XHRcdFx0XHRcdFx0e2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2gtMn0sXHJcblx0XHRcdFx0XHRcdFx0e2xpbmU6IGN1cnNvci5saW5lLCBjaDpjdXJzb3IuY2grMX1cclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7bGluZTogY3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblx0XHRjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvbihlZGl0b3IpO1xyXG5cclxuXHRcdC8vIFx1OTFDRFx1NjVCMFx1ODlFM1x1Njc5MFx1NTE2OFx1NjU4N1xyXG5cdFx0dGhpcy51cGRhdGVBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHJcblx0XHQvLyBcdTU3MjhcdTk3NUVcdTY1ODdcdTY3MkNcdTg4NENcdTdGMTZcdThGOTFcdTY1RjZcdUZGMENcdTY1RTBcdTk3MDBcdTY4M0NcdTVGMEZcdTUzMTZcclxuXHRcdGlmKGdldExpbmVUeXBlRnJvbUFydGljbGVQYXJ0cyhjdXJzb3IubGluZSwgdGhpcy5hcnRpY2xlUGFydHMpICE9TGluZVR5cGUudGV4dClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vLS0tLS0tLS0tLS0tLS0tLS0tXHU1QkY5XHU2NTg3XHU2NzJDXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2LS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblx0XHRpZighdGhpcy5zZXR0aW5ncy5Gb3JtYXR0aW5nV2hlbkxpbmVFbmQpXHJcblx0XHR7XHJcblx0XHRcdHRoaXMudXBkYXRlTGluZShlZGl0b3IsIGN1cnNvci5saW5lLCBjdXJzb3IsIHRoaXMuc2V0dGluZ3MsIHRoaXMucHJldkN1cnNvcik7XHJcblx0XHR9XHJcblx0XHR0aGlzLnByZXZDdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XHJcblx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdGlzVGV4dFBhcnQ9KGxpbmVJbmRleDpudW1iZXIpOmJvb2xlYW49PlxyXG5cdHtcclxuXHRcdGlmKGdldExpbmVUeXBlRnJvbUFydGljbGVQYXJ0cyhsaW5lSW5kZXgsIHRoaXMuYXJ0aWNsZVBhcnRzKSA9PT0gTGluZVR5cGUudGV4dClcclxuXHRcdHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVDbGljaz0oKT0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZykgY29uc29sZS5sb2coJz09PT5DbGljayBldmVudCB0cmlnZ2VyZWQnKTtcclxuXHRcdGxldCBlZGl0b3IgPSB0aGlzLmdldEVkaXRvcigpO1xyXG5cdFx0aWYoIWVkaXRvcikgcmV0dXJuO1xyXG5cdFx0dGhpcy5wcmV2Q3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0dGhpcy51cGRhdGVTZWxlY3Rpb24oZWRpdG9yKTtcclxuXHR9XHJcblxyXG5cdGhhbmRsZUZpbGVPcGVuPShmaWxlOiBURmlsZSB8IG51bGwpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdGlmKGZpbGUhPW51bGwpXHJcblx0XHR7XHJcblx0XHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwiPT09PkZpbGUgb3BlbjpcIiwgZmlsZS52YXVsdC5nZXROYW1lKCkrJy8nK2ZpbGUucGF0aCk7XHJcblx0XHRcdHRoaXMucmVwYXJzZUFydGljbGUgPSB7Y2hlY2s6IHRydWUsIGJlZ2luTGluZU51bWJlcjogMH07XHJcblx0XHRcdHRoaXMuYXJ0aWNsZVBhcnRzID0gbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdH1cclxuXHJcblx0aGFuZGxlUGFzdGU9KGV2dDogQ2xpcGJvYXJkRXZlbnQsIGVkaXRvcjogRWRpdG9yLCBtYXJrZG93blZpZXc6IE1hcmtkb3duVmlldyk6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcclxuXHRcdGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpXHJcblx0XHR7XHJcblx0XHRcdGNvbnNvbGUubG9nKCc9PT0+QmVmb3JlLVBhc3RlJyk7XHJcblx0XHRcdC8vIGNvbnNvbGUubG9nKGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKSk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlID0ge2NoZWNrOiB0cnVlLCBiZWdpbkxpbmVOdW1iZXI6IGN1cnNvci5saW5lfTtcclxuXHRcdHRoaXMudXBkYXRlQXJ0aWNsZVBhcnRzKGVkaXRvcik7XHJcblx0fVxyXG5cclxuXHRoYW5kbGVDaGFuZ2U9KGVkaXRvcjogRWRpdG9yLCBtYXJrZG93blZpZXc6IE1hcmtkb3duVmlldyk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coJz09PT5DaGFuZ2UgRXZlbnQnKTtcclxuXHRcdFx0Ly8gY29uc29sZS5sb2coZWRpdG9yLmdldExpbmUoZWRpdG9yLmdldEN1cnNvcigpLmxpbmUpKTtcclxuXHRcdH1cdFx0XHJcblx0XHR0aGlzLmVkaXRvckNoYW5nZWQgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0aGFuZGxlU2VsZWN0QmVnaW49KGV2OiBFdmVudCk6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5rZXlEb3duRmxhZykgcmV0dXJuO1xyXG5cdFx0aWYodGhpcy5zZXR0aW5ncy5EZWJ1ZylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCI9PT0+U2VsZWN0IEV2ZW50XCIpO1xyXG5cdFx0fVxyXG5cdFx0bGV0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yKCk7XHJcblx0XHRpZighZWRpdG9yKSByZXR1cm47XHJcblx0XHR0aGlzLnVwZGF0ZVNlbGVjdGlvbihlZGl0b3IpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlQXJ0aWNsZVBhcnRzPShlZGl0b3I6IEVkaXRvcik6dm9pZD0+XHJcblx0e1xyXG5cdFx0aWYodGhpcy5yZXBhcnNlQXJ0aWNsZS5jaGVjayB8fCB0aGlzLmFydGljbGVQYXJ0cyA9PT0gbnVsbClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5hcnRpY2xlUGFydHMgPSByZXBhcnNlQXJ0aWNsZVBhcnRzKGVkaXRvci5nZXRWYWx1ZSgpLCB0aGlzLmFydGljbGVQYXJ0cywgdGhpcy5yZXBhcnNlQXJ0aWNsZS5iZWdpbkxpbmVOdW1iZXIsIHRoaXMuc2V0dGluZ3MuRGVidWcpO1xyXG5cdFx0XHR0aGlzLnJlcGFyc2VBcnRpY2xlLmNoZWNrID0gZmFsc2U7XHJcblx0XHRcdC8vIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIHRoaXMucHJpbnRBcnRpY2xlUGFydHMoZWRpdG9yKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHByaW50QXJ0aWNsZVBhcnRzPShlZGl0b3I6IEVkaXRvcik6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGFydGljbGUgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcclxuXHRcdGxldCBsaW5lcyA9IGFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG5cdFx0Y29uc29sZS5sb2coJ35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+Jyk7XHJcblx0XHRmb3IgKGxldCBpPTA7aTx0aGlzLmFydGljbGVQYXJ0cy5sZW5ndGg7IGkrKylcclxuXHRcdHtcclxuXHRcdFx0Y29uc29sZS5sb2coXCJBcnRpY2xlIFBhcnQ6XCIsIHRoaXMuYXJ0aWNsZVBhcnRzW2ldLnR5cGUsIHRoaXMuYXJ0aWNsZVBhcnRzW2ldLmJlZ2luLCB0aGlzLmFydGljbGVQYXJ0c1tpXS5lbmQpO1xyXG5cdFx0XHRmb3IobGV0IGo9dGhpcy5hcnRpY2xlUGFydHNbaV0uYmVnaW47IGo8dGhpcy5hcnRpY2xlUGFydHNbaV0uZW5kO2orKylcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGNvbnNvbGUubG9nKGxpbmVzW2pdKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS5sb2coJ35+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+Jyk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGVTZWxlY3Rpb249KGVkaXRvcjogRWRpdG9yKTp2b2lkPT5cclxuXHR7XHJcblx0XHR0aGlzLnNlbGVjdGVkVGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuXHRcdHRoaXMudXBkYXRlQ2hhckFyb3VuZEN1cnNvcihlZGl0b3IpO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlQ2hhckFyb3VuZEN1cnNvcj0oZWRpdG9yOiBFZGl0b3IpOnZvaWQ9PlxyXG5cdHtcclxuXHRcdC8vIGlmKHRoaXMuc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwidXBkYXRlIHNlbGVjdGlvbjpcXG5cIiArIHRoaXMuc2VsZWN0ZWRUZXh0KTtcclxuXHRcdGlmKHRoaXMuc2VsZWN0ZWRUZXh0IT1cIlwiKSByZXR1cm47XHJcblx0XHRsZXQgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG5cdFx0XHJcblx0XHRpZihjdXJzb3IuY2ghPTApe1xyXG5cdFx0XHR0aGlzLmNoYXJCZWZvcmVDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2Uoe2xpbmU6Y3Vyc29yLmxpbmUsIGNoOmN1cnNvci5jaC0xfSwgY3Vyc29yKTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdHRoaXMuY2hhckJlZm9yZUN1cnNvciA9IGN1cnNvci5saW5lIT0wP1wiXFxuXCI6XCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZihjdXJzb3IuY2ggIT0gZWRpdG9yLmdldExpbmUoY3Vyc29yLmxpbmUpLmxlbmd0aClcclxuXHRcdHtcclxuXHRcdFx0dGhpcy5jaGFyQWZ0ZXJDdXJzb3IgPSBlZGl0b3IuZ2V0UmFuZ2UoY3Vyc29yLCB7bGluZTpjdXJzb3IubGluZSwgY2g6Y3Vyc29yLmNoKzF9KTtcclxuXHRcdH1cclxuXHRcdGVsc2V7XHJcblx0XHRcdHRoaXMuY2hhckFmdGVyQ3Vyc29yID0gY3Vyc29yLmxpbmUhPWVkaXRvci5saW5lQ291bnQoKS0xP1wiXFxuXCI6XCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZih0aGlzLnNldHRpbmdzLkRlYnVnKVxyXG5cdFx0Ly8ge1xyXG5cdFx0Ly8gXHRjb25zb2xlLmxvZyhcImNoYXJCZWZvcmVDdXJzb3JcIiwgdGhpcy5jaGFyQmVmb3JlQ3Vyc29yKTtcclxuXHRcdC8vIFx0Y29uc29sZS5sb2coXCJjaGFyQWZ0ZXJDdXJzb3JcIiwgdGhpcy5jaGFyQWZ0ZXJDdXJzb3IpO1xyXG5cdFx0Ly8gfVxyXG5cdH1cclxuXHJcblx0Rm9ybWF0TGluZVdpdGhvdXRDaGVja1BhcnQ9KGVkaXRvcjogRWRpdG9yLCBsaW5lOm51bWJlcik6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGxpbmVTdHJpbmcgPSBlZGl0b3IuZ2V0TGluZShsaW5lKTtcclxuXHRcdGxldCBjcyA9IHtsaW5lOiBsaW5lLCBjaDpsaW5lU3RyaW5nLmxlbmd0aH07XHJcblx0XHRsZXQgZm9ybWF0dGVkQ2hhbmdlID0gZm9ybWF0TGluZShsaW5lU3RyaW5nLCBjcywgdGhpcy5zZXR0aW5ncyk7XHJcblx0XHRsZXQgY2hhbmdlZExpbmUgPSBmb3JtYXR0ZWRDaGFuZ2VbMF07XHJcblx0XHRpZihjaGFuZ2VkTGluZSAhPSBsaW5lU3RyaW5nKVxyXG5cdFx0e1xyXG5cdFx0XHRlZGl0b3IucmVwbGFjZVJhbmdlKGNoYW5nZWRMaW5lLCB7bGluZTpsaW5lLCBjaDowfSwgY3MpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0dXBkYXRlTGluZT0oZWRpdG9yOiBFZGl0b3IsIGxpbmVJbmRleDogbnVtYmVyLCBjdXJDdXJzb3I6IEVkaXRvclBvc2l0aW9uLCBzZXR0aW5nczogRm9ybWF0U2V0dGluZ3MsIFxyXG5cdFx0cHJldkN1cnNvcj86IEVkaXRvclBvc2l0aW9uLCBzZXRDdXJzb3I/OiBFZGl0b3JQb3NpdGlvbik6dm9pZD0+XHJcblx0e1xyXG5cdFx0bGV0IGZvcm1hdHRlZENoYW5nZSA9IGZvcm1hdExpbmUoZWRpdG9yLmdldExpbmUobGluZUluZGV4KSwgY3VyQ3Vyc29yLCB0aGlzLnNldHRpbmdzLCB0aGlzLnByZXZDdXJzb3IpO1xyXG5cdFx0bGV0IHJlc3VsdExpbmUgPSBmb3JtYXR0ZWRDaGFuZ2VbMF07XHJcblx0XHRsZXQgcmVzdWx0Q3Vyb3NyQ2g6IG51bWJlciA9IGZvcm1hdHRlZENoYW5nZVsxXTtcclxuXHRcdGxldCBpbmxpbmVDaGFuZ2VMaXN0OiBJbmxpbmVDaGFuZ2VbXT0gZm9ybWF0dGVkQ2hhbmdlWzJdO1xyXG5cclxuXHRcdC8vIGxldCBvcmlnaW5MaW5lU3RyaW5nID0gZWRpdG9yLmdldExpbmUobGluZUluZGV4KTtcclxuXHRcdC8vIGxldCBjdXJzb3JMaW5lQmVnaW4gPSB7bGluZTogbGluZUluZGV4LCBjaDowfTtcclxuXHRcdC8vIGxldCBjdXJzb3JMaW5lRW5kID0ge2xpbmU6IGxpbmVJbmRleCwgY2g6b3JpZ2luTGluZVN0cmluZy5sZW5ndGh9O1xyXG5cdFx0Ly8gZWRpdG9yLnJlcGxhY2VSYW5nZShvcmlnaW5MaW5lU3RyaW5nLCBjdXJzb3JMaW5lQmVnaW4sIGN1cnNvckxpbmVFbmQpO1xyXG5cclxuXHRcdC8vIEFwcGx5IENoYW5nZXNcclxuXHRcdGlmKGlubGluZUNoYW5nZUxpc3QubGVuZ3RoICE9IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxpbmxpbmVDaGFuZ2VMaXN0Lmxlbmd0aDtpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VCZWdpbjpFZGl0b3JQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBsaW5lSW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgY2g6IGlubGluZUNoYW5nZUxpc3RbaV0uYmVnaW4rb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlRW5kOkVkaXRvclBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGxpbmVJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBjaDogaW5saW5lQ2hhbmdlTGlzdFtpXS5lbmQrb2Zmc2V0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gaW5saW5lQ2hhbmdlTGlzdFtpXS50ZXh0Lmxlbmd0aCAtIGlubGluZUNoYW5nZUxpc3RbaV0ub3JpZ2luLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoaW5saW5lQ2hhbmdlTGlzdFtpXS50ZXh0LCBjaGFuZ2VCZWdpbiwgY2hhbmdlRW5kKTtcclxuICAgICAgICAgICAgfVxyXG5cdFx0XHRpZighc2V0Q3Vyc29yKVxyXG5cdFx0XHR7XHJcblx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7XHJcblx0XHRcdFx0XHRsaW5lOiBsaW5lSW5kZXgsXHJcblx0XHRcdFx0XHRjaDogcmVzdWx0Q3Vyb3NyQ2hcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlXHJcblx0XHRcdHtcclxuXHRcdFx0XHRlZGl0b3Iuc2V0Q3Vyc29yKHNldEN1cnNvcik7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gY29uc29sZS5sb2coJ2N1cnNvciBjaCcsIHJlc3VsdEN1cm9zckNoKTsgICAgICAgICAgICBcclxuXHRcdFx0ZWRpdG9yLmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0fVxyXG5cclxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG5cdH1cclxufVxyXG5cclxuY2xhc3MgRWFzeVR5cGluZ1NldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuXHRwbHVnaW46IEVhc3lUeXBpbmdQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEVhc3lUeXBpbmdQbHVnaW4pIHtcclxuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0ZGlzcGxheSgpOiB2b2lkIHtcclxuXHRcdGxldCB7Y29udGFpbmVyRWx9ID0gdGhpcztcclxuXHJcblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuXHRcdC8vIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnU2V0dGluZ3MgZm9yIEVhc3kgVHlwaW5nLid9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2EnLCB7dGV4dDogJ01vcmUgZGV0YWlsIGlzIGluIEdpdGh1YjogZWFzeS10eXBpbmctb2JzaWRpYW4nLCBocmVmOidodHRwczovL2dpdGh1Yi5jb20vWWFvemh1d2EvZWFzeS10eXBpbmctb2JzaWRpYW4nfSk7XHJcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1x1NjAzQlx1NUYwMFx1NTE3MyAoTWFzdGVyIFN3aXRjaCknfSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkF1dG8gZm9ybWF0dGluZyB3aGVuIHR5cGluZ1wiKVxyXG5cdFx0LnNldERlc2MoXCJcdTY2MkZcdTU0MjZcdTU3MjhcdTdGMTZcdThGOTFcdTY1ODdcdTY4NjNcdTY1RjZcdTgxRUFcdTUyQThcdTY4M0NcdTVGMEZcdTUzMTZcdTY1ODdcdTY3MkNcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nKVxyXG5cdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkF1dG9Gb3JtYXR0aW5nID0gdmFsdWU7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJBdXRvRm9ybWF0dGluZzpcIix2YWx1ZSk7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkxpbmVNb2RlOiBPbmx5IGZvcm1hdHRpbmcgd2hlbiBsaW5lIGVuZC5cIilcclxuXHRcdC5zZXREZXNjKFwiXHU4ODRDXHU2QTIxXHU1RjBGXHVGRjFBXHU1M0VBXHU1NzI4XHU0RTAwXHU4ODRDXHU4RjkzXHU1MTY1XHU3RUQzXHU2NzVGXHVGRjBDXHU1NkRFXHU4RjY2XHU1MjFCXHU1RUZBXHU2NUIwXHU4ODRDXHU3Njg0XHU2NUY2XHU1MDE5XHVGRjBDXHU1QkY5XHU4QkU1XHU4ODRDXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XHUzMDAyXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5Gb3JtYXR0aW5nV2hlbkxpbmVFbmQpXHJcblx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuRm9ybWF0dGluZ1doZW5MaW5lRW5kID0gdmFsdWU7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJGb3JtYXR0aW5nV2hlbkxpbmVFbmQ6XCIsdmFsdWUpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnXHU4QkU2XHU3RUM2XHU4OUM0XHU1MjE5XHU1RjAwXHU1MTczIChTdWIgU3dpdGNoZXMpJ30pO1xyXG5cclxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJGdWxsLVdpZHRoIHN5bWJvbCBpbnB1dCBlbmhhbmNlbWVudFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTUxNjhcdTg5RDJcdTdCMjZcdTUzRjdcdThGOTNcdTUxNjVcdTU4OUVcdTVGM0FcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5GdWxsV2lkdGhDaGFyYWN0ZXJFbmhhbmNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gQ2hpbmVzZSBhbmQgRW5nbGlzaC9udW1iZXJcIilcclxuXHRcdC5zZXREZXNjKFwiXHU1NzI4XHU0RTJEXHU2NTg3XHU1NDhDXHU4MkYxXHU2NTg3L1x1NjU3MFx1NUI1N1x1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZUVuZ2xpc2hTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VFbmdsaXNoU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiRGVsZXRlIHRoZSBTcGFjZSBiZXR3ZWVuIENoaW5lc2UgY2hhcmFjdGVyc1wiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTRFMkRcdTY1ODdcdTVCNTdcdTdCMjZcdTk1RjRcdTUzQkJcdTk2NjRcdTdBN0FcdTY4M0NcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkNoaW5lc2VOb1NwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2hpbmVzZU5vU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU21hcnRseSBpbnNlcnQgc3BhY2UgYmV0d2VlbiB0ZXh0IGFuZCBwdW5jdHVhdGlvblwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTY1ODdcdTY3MkNcdTU0OENcdTY4MDdcdTcwQjlcdTk1RjRcdTY2N0FcdTgwRkRcdTdBN0FcdTY4M0NcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlB1bmN0dWF0aW9uU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5QdW5jdHVhdGlvblNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIkNhcGl0YWxpemUgdGhlIGZpcnN0IGxldHRlciBvZiBldmVyeSBzZW50ZW5jZVwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTgyRjFcdTY1ODdcdTZCQ0ZcdTRFMkFcdTUzRTVcdTk5OTZcdTVCNTdcdTZCQ0RcdTU5MjdcdTUxOTlcIilcclxuXHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSk9PntcclxuXHRcdFx0dG9nZ2xlLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkNhcGl0YWxpemF0aW9uKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuQ2FwaXRhbGl6YXRpb24gPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgY29kZSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjggYFx1ODg0Q1x1NTE4NVx1NEVFM1x1NzgwMWAgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBpbmxpbmUgZm9ybXVsYSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjggJFx1ODg0Q1x1NTE4NVx1NTE2Q1x1NUYwRiQgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5JbmxpbmVGb3JtdWxhU3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiU3BhY2UgYmV0d2VlbiBsaW5rIGFuZCB0ZXh0XCIpXHJcblx0XHQuc2V0RGVzYyhcIlx1NTcyOCBbW3dpa2lsaW5rXV0gbWRsaW5rIFx1NTQ4Q1x1NjU4N1x1NjcyQ1x1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlKS5vbkNoYW5nZShhc3luYyAodmFsdWUpPT57XHJcblx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuTGlua1NwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0LnNldE5hbWUoXCJTbWFydCBTcGFjZSBiZXR3ZWVuIGxpbmsgYW5kIHRleHRcIilcclxuXHRcdC5zZXREZXNjKFwiXHU1NzI4IFtbd2lraWxpbmtdXSBtZGxpbmsgXHU1NDhDXHU2NTg3XHU2NzJDXHU5NUY0XHU2NjdBXHU4MEZEXHU3QTdBXHU2ODNDXCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5MaW5rU21hcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkxpbmtTbWFydFNwYWNlID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdcdTgxRUFcdTVCOUFcdTRFNDlcdTZCNjNcdTUyMTkgKEN1c3RvbSByZWd1bGFyIGV4cHJlc3Npb25zKSd9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiVXNlciBEZWZpbmVkIFJlZ0V4cCBTd2l0Y2hcIilcclxuXHRcdC5zZXREZXNjKFwiXHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU1RjAwXHU1MTczXHVGRjBDXHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTBEXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XCIpXHJcblx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpPT57XHJcblx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ1N3aXRjaCkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnU3dpdGNoID0gdmFsdWU7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcblx0XHQuc2V0TmFtZShcIlNwYWNlIGJldHdlZW4gVXNlciBEZWZpbmVkIFBhcnQoc2VsZWN0ZWQgYnkgUmVnRXhwKSBhbmQgdGV4dFwiKVxyXG5cdFx0LnNldERlc2MoXCJcdTU3MjhcdTc1MjhcdTYyMzdcdTgxRUFcdTVCOUFcdTRFNDlcdTUzM0FcdTU3NTcoXHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHU5MDA5XHU2MkU5KVx1NTQ4Q1x1NjU4N1x1NjcyQ1x1NEU0Qlx1OTVGNFx1N0E3QVx1NjgzQ1wiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlclBhcnRTcGFjZSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKT0+e1xyXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJQYXJ0U3BhY2UgPSB2YWx1ZTtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0Y29uc3QgcmVnQ29udGVudEFyZWFTZXR0aW5nID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpO1xyXG5cdFx0cmVnQ29udGVudEFyZWFTZXR0aW5nLnNldHRpbmdFbC5zZXRBdHRyaWJ1dGUoXHJcblx0XHRcInN0eWxlXCIsXHJcblx0XHRcImRpc3BsYXk6IGdyaWQ7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyO1wiXHJcblx0XHQpO1xyXG5cdFx0cmVnQ29udGVudEFyZWFTZXR0aW5nXHJcblx0XHQuc2V0TmFtZShcIlVzZXItZGVmaW5lZCBSZWdFeHAgdG8gaWdub3JlLCBvbmUgZXhwcmVzc2lvbiBwZXIgbGluZVwiKVxyXG5cdFx0LnNldERlc2MoXHJcblx0XHRcdFwiXHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTBEXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XHVGRjBDXHU2QkNGXHU4ODRDXHU0RTAwXHU0RTJBXHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU4ODRDXHU1QzNFXHU0RTBEXHU4OTgxXHU5NjhGXHU2MTBGXHU1MkEwXHU3QTdBXHU2ODNDXCJcclxuXHRcdCk7XHJcblx0XHRjb25zdCByZWdDb250ZW50QXJlYSA9IG5ldyBUZXh0QXJlYUNvbXBvbmVudChcclxuXHRcdHJlZ0NvbnRlbnRBcmVhU2V0dGluZy5jb250cm9sRWxcclxuXHRcdCk7XHJcblx0XHRzZXRBdHRyaWJ1dGVzKHJlZ0NvbnRlbnRBcmVhLmlucHV0RWwsIHtcclxuXHRcdHN0eWxlOiBcIm1hcmdpbi10b3A6IDEycHg7IHdpZHRoOiAxMDAlOyAgaGVpZ2h0OiAzMHZoO1wiLFxyXG5cdFx0Ly8gY2xhc3M6IFwibXMtY3NzLWVkaXRvclwiLFxyXG5cdFx0fSk7XHJcblx0XHRyZWdDb250ZW50QXJlYVxyXG5cdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwKVxyXG5cdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ0V4cCA9IHZhbHVlO1xyXG5cdFx0XHR0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdH0pO1xyXG5cclxuICAgICAgICAvLyBjb25zdCByZWdDb250ZW50QXJlYSA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG5cdFx0Ly8gLnNldE5hbWUoXCJVc2VyIGRlZmluZWQgUmVnRXhwIHRvIGlnbm9yZSwgb25lIGV4cHJlc3Npb24gcGVyIGxpbmVcIilcclxuXHRcdC8vIC5zZXREZXNjKFwiXHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU2QjYzXHU1MjE5XHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU1MzM5XHU5MTREXHU1MjMwXHU3Njg0XHU1MTg1XHU1QkI5XHU0RTBEXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XHVGRjBDXHU2QkNGXHU4ODRDXHU0RTAwXHU0RTJBXHU4ODY4XHU4RkJFXHU1RjBGXHVGRjBDXHU4ODRDXHU1QzNFXHU0RTBEXHU4OTgxXHU5NjhGXHU2MTBGXHU1MkEwXHU3QTdBXHU2ODNDXCIpXHJcblx0XHQvLyAuYWRkVGV4dEFyZWEoKHRleHQpID0+XHJcblx0XHQvLyBcdHRleHRcclxuXHRcdC8vIFx0LnNldFBsYWNlaG9sZGVyKCc6XFxcXHcqOlxcbnt7Lio/fX0nKVxyXG5cdFx0Ly8gXHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVXNlckRlZmluZWRSZWdFeHApXHJcblx0XHQvLyBcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuXHRcdC8vIFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5Vc2VyRGVmaW5lZFJlZ0V4cCA9IHZhbHVlO1xyXG4gICAgICAgIC8vICAgICAgICAgaWYodGhpcy5wbHVnaW4uc2V0dGluZ3MuRGVidWcpIGNvbnNvbGUubG9nKFwicmVnRXhwIGNoYW5nZWQ6XCIsIHZhbHVlKTtcclxuXHRcdC8vIFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdC8vIFx0fSlcclxuXHRcdC8vICk7XHJcblxyXG5cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnYScsIHt0ZXh0OiAnUmVnRXhwOiBcdTZCNjNcdTUyMTlcdTg4NjhcdThGQkVcdTVGMEYnLCBocmVmOidodHRwczovL2phdmFzY3JpcHQucnVhbnlpZmVuZy5jb20vc3RkbGliL3JlZ2V4cC5odG1sIyd9KTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdEZWJ1Zyd9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuXHRcdC5zZXROYW1lKFwiUHJpbnQgZGVidWcgaW5mbyBpbiBjb25zb2xlXCIpXHJcblx0XHQuc2V0RGVzYyhcIlx1NTcyOFx1NjNBN1x1NTIzNlx1NTNGMFx1OEY5M1x1NTFGQVx1OEMwM1x1OEJENVx1NEZFMVx1NjA2RlwiKVxyXG5cdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKT0+e1xyXG5cdFx0XHR0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuRGVidWcpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSk9PntcclxuXHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5EZWJ1ZyA9IHZhbHVlO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHR9XHJcbn1cclxuIiwgImltcG9ydCB7IEVkaXRvclBvc2l0aW9uLCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuXHJcbmV4cG9ydCBlbnVtIElubGluZVR5cGUge3RleHQ9J3RleHQnLCBjb2RlPSdjb2RlJywgZm9ybXVsYT0nZm9ybXVsYScsIGxpbms9J2xpbmsnLCB1c2VyPSd1c2VyLWRlZmluZWQnLCBub25lPSdub25lJ31cclxuZXhwb3J0IGVudW0gTGluZVR5cGUge3RleHQ9J3RleHQnLCBjb2RlPSdjb2RlJywgZm9ybXVsYT0nZm9ybXVsYScsIGZyb250bWF0dGVyPSdmcm9udG1hdHRlcicsIG5vbmU9J25vbmUnfVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBcnRpY2xlUGFydFxyXG57XHJcbiAgICB0eXBlOiBMaW5lVHlwZTtcclxuICAgIGJlZ2luOiBudW1iZXI7XHJcbiAgICBlbmQ6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElubGluZVBhcnRcclxue1xyXG4gICAgY29udGVudDogc3RyaW5nLFxyXG4gICAgdHlwZTogSW5saW5lVHlwZSxcclxuICAgIGJlZ2luOiBudW1iZXIsXHJcbiAgICBlbmQ6IG51bWJlclxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElubGluZUNoYW5nZVxyXG57XHJcbiAgICB0ZXh0OiBzdHJpbmcsXHJcbiAgICBiZWdpbjogbnVtYmVyLFxyXG4gICAgZW5kOiBudW1iZXIsXHJcbiAgICBvcmlnaW46c3RyaW5nXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRm9ybWF0U2V0dGluZ3Ncclxue1xyXG4gICAgQXV0b0Zvcm1hdHRpbmc6IGJvb2xlYW47XHJcbiAgICBGb3JtYXR0aW5nV2hlbkxpbmVFbmQ6IGJvb2xlYW47XHJcblx0Q2hpbmVzZUVuZ2xpc2hTcGFjZTogYm9vbGVhbjtcclxuXHRDaGluZXNlTm9TcGFjZTogYm9vbGVhbjtcclxuICAgIENhcGl0YWxpemF0aW9uOiBib29sZWFuO1xyXG5cclxuXHRFbmdsaXNoU3BhY2U6IGJvb2xlYW47XHJcblx0QnJhY2VTcGFjZTogYm9vbGVhbjtcclxuXHROdW1iZXJTcGFjZTogYm9vbGVhbjtcclxuXHJcbiAgICBQdW5jdHVhdGlvblNwYWNlOiBib29sZWFuO1xyXG4gICAgSW5saW5lQ29kZVNwYWNlOiBib29sZWFuO1xyXG5cdElubGluZUZvcm11bGFTcGFjZTogYm9vbGVhbjtcclxuICAgIExpbmtTcGFjZTogYm9vbGVhbjtcclxuICAgIExpbmtTbWFydFNwYWNlOiBib29sZWFuO1xyXG5cclxuICAgIEZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2U6Ym9vbGVhbjtcclxuXHJcbiAgICBVc2VyRGVmaW5lZFJlZ0V4cDpzdHJpbmc7XHJcbiAgICBVc2VyRGVmaW5lZFJlZ1N3aXRjaDogYm9vbGVhbjtcclxuICAgIFVzZXJQYXJ0U3BhY2U6IGJvb2xlYW47XHJcblxyXG4gICAgRGVidWc6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBGb3JtYXRTZXR0aW5ncyA9IHtcclxuICAgIEF1dG9Gb3JtYXR0aW5nOiB0cnVlLFxyXG4gICAgRm9ybWF0dGluZ1doZW5MaW5lRW5kOiBmYWxzZSxcclxuXHRDaGluZXNlRW5nbGlzaFNwYWNlOiB0cnVlLFxyXG5cdENoaW5lc2VOb1NwYWNlOiB0cnVlLFxyXG4gICAgQ2FwaXRhbGl6YXRpb246IHRydWUsXHJcblxyXG4gICAgUHVuY3R1YXRpb25TcGFjZTogdHJ1ZSxcclxuXHRFbmdsaXNoU3BhY2U6IHRydWUsXHJcblx0QnJhY2VTcGFjZTogdHJ1ZSxcclxuXHROdW1iZXJTcGFjZTogdHJ1ZSxcclxuXHJcbiAgICBJbmxpbmVDb2RlU3BhY2U6IHRydWUsXHJcblx0SW5saW5lRm9ybXVsYVNwYWNlOiB0cnVlLFxyXG5cdExpbmtTcGFjZTogdHJ1ZSxcclxuICAgIExpbmtTbWFydFNwYWNlOiB0cnVlLFxyXG5cclxuICAgIEZ1bGxXaWR0aENoYXJhY3RlckVuaGFuY2U6IHRydWUsXHJcbiAgICBVc2VyRGVmaW5lZFJlZ0V4cDonOlxcXFx3KjpcXG57ey4qP319XFxuPC4qPz5cXG5cXFxcW1xcXFwhLio/XFxcXF1bKy1dezAsMX0nLFxyXG4gICAgVXNlckRlZmluZWRSZWdTd2l0Y2g6IHRydWUsXHJcbiAgICBVc2VyUGFydFNwYWNlOnRydWUsXHJcbiAgICBEZWJ1ZzpmYWxzZVxyXG59XHJcblxyXG4vLyBcdTVCRjlcdTU5MUFcdTg4NENcdTY1ODdcdTY3MkNcdThGREJcdTg4NENcdTg5RTNcdTY3OTBcdTVGOTdcdTUyMzBcdTZCQ0ZcdTg4NENcdTc2ODRcdTdDN0JcdTU3OEJcclxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0QXJ0aWNsZShhcnRpY2xlOnN0cmluZywgY2hlY2tGcm9udE1hdHRlcjpib29sZWFuPXRydWUsIGJlZ2luSW5kZXg6bnVtYmVyPTApOiBBcnRpY2xlUGFydFtdXHJcbntcclxuICAgIGxldCByZXRBcnJheTogQXJ0aWNsZVBhcnRbXSA9IFtdO1xyXG4gICAgbGV0IGxpbmVzID0gYXJ0aWNsZS5zcGxpdCgnXFxuJyk7XHJcbiAgICBjb25zb2xlLmxvZygnbGluZSBudW1iZXInLCBsaW5lcy5sZW5ndGgpO1xyXG4gICAgbGV0IHJlZ051bGxMaW5lID0gL15cXHMqJC87XHJcbiAgICBsZXQgcmVnRm9ybXVsYUJlZ2luID0gL15cXHMqKFxcLSAoXFxbW3ggXVxcXSApPyk/XFwkXFwkLztcclxuICAgIGxldCByZWdGb3JtdWxhRW5kID0gL1xcJFxcJCQvO1xyXG4gICAgbGV0IHJlZ0NvZGVCZWdpbiA9IC9eXFxzKmBgYC87XHJcbiAgICBsZXQgcmVnQ29kZUVuZCA9IC9eXFxzKmBgYCQvO1xyXG4gICAgbGV0IGluZGV4ID0gYmVnaW5JbmRleDtcclxuICAgIGxldCByZWdBZG1vbml0aW9uQmxvY2tCZWdpbiA9IC9eXFxzKmBgYGFkLVxcdysvZztcclxuXHJcbiAgICAvLyAxLiBcdTUyMjRcdTY1QUQgZnJvbnRtYXR0ZXJcdTUzM0FcdTU3REZcclxuICAgIGlmKGNoZWNrRnJvbnRNYXR0ZXIpXHJcbiAgICB7XHJcbiAgICAgICAgbGV0IGZyb250TWF0dGVyUGFydDogQXJ0aWNsZVBhcnQ7XHJcbiAgICAgICAgZm9yKGxldCBpPTA7aTxsaW5lcy5sZW5ndGg7aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYocmVnTnVsbExpbmUudGVzdChsaW5lc1tpXSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYobGluZXNbaV09PT0nLS0tJylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBqPWkrMTsgajxsaW5lcy5sZW5ndGg7aisrKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGxpbmVzW2pdPT09Jy0tLScpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihpIT0wKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOjAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOmlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb250TWF0dGVyUGFydCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZyb250bWF0dGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGorMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKGZyb250TWF0dGVyUGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaisxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIGNvbnNvbGUubG9nKCdpbmRleCcsIGluZGV4KTtcclxuXHJcbiAgICAvLyAyLiBcdTkwNERcdTUzODZcdTg4NENcdTVGOTdcdTUyMzAgTGluZVR5cGUgXHU1MjA2XHU1MzNBXHJcbiAgICB3aGlsZShpbmRleDxsaW5lcy5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYocmVnQ29kZUJlZ2luLnRlc3QobGluZXNbaW5kZXhdKSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCBqID0gaW5kZXgrMTtcclxuICAgICAgICAgICAgd2hpbGUoajxsaW5lcy5sZW5ndGgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlZ0NvZGVFbmQudGVzdChsaW5lc1tqXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoaj09PWxpbmVzLmxlbmd0aCB8fCAhcmVnQWRtb25pdGlvbkJsb2NrQmVnaW4udGVzdChsaW5lc1tpbmRleF0pKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBqID0gaj09PWxpbmVzLmxlbmd0aD9qLTE6ajtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46aW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOmorMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gXHU1QkY5QWRtaW5pdGlvbkJvbGNrXHU1MDVBXHU3Mjc5XHU2QjhBXHU1OTA0XHU3NDA2XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjppbmRleCxcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6aW5kZXgrMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXRBcnJheS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBMaW5lVHlwZS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGJlZ2luOmluZGV4KzEsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOmpcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjpqLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDpqKzFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluZGV4ID0gaisxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHJlZ0Zvcm11bGFCZWdpbi50ZXN0KGxpbmVzW2luZGV4XSkpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgcmVnRm9ybXVsYU9uZUxpbmUgPSAvKD88IVxcXFwpXFwkXFwkKD8hIClbXl0qPyg/PCEgKSg/PCFcXFxcKVxcJFxcJC9nO1xyXG4gICAgICAgICAgICBpZihyZWdGb3JtdWxhT25lTGluZS50ZXN0KGxpbmVzW2luZGV4XSkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZvcm11bGEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IGluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogaW5kZXgrMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XHJcbiAgICAgICAgICAgICAgICB3aGlsZShqPGxpbmVzLmxlbmd0aClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihyZWdGb3JtdWxhRW5kLnRlc3QobGluZXNbal0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBqKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBqID0gaj09PWxpbmVzLmxlbmd0aD9qLTE6ajtcclxuICAgICAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IExpbmVUeXBlLmZvcm11bGEsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46aW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgZW5kOmorMVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGorMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgaiA9IGluZGV4KzE7XHJcbiAgICAgICAgICAgIGZvcig7ajxsaW5lcy5sZW5ndGg7aisrKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBpZihyZWdDb2RlQmVnaW4udGVzdChsaW5lc1tqXSkgfHwgcmVnRm9ybXVsYUJlZ2luLnRlc3QobGluZXNbal0pKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldEFycmF5LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogTGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgIGJlZ2luOiBpbmRleCxcclxuICAgICAgICAgICAgICAgIGVuZDpqXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpbmRleCA9IGo7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXRBcnJheTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHJlcGFyc2VBcnRpY2xlUGFydHMoYXJ0aWNsZTogc3RyaW5nLCBwcmV2QXJ0aWNsZVBhcnQ6QXJ0aWNsZVBhcnRbXXxudWxsLCB1cGRhdGVMaW5lU3RhcnQ6IG51bWJlciwgcHJpbnQ6Ym9vbGVhbj1mYWxzZSk6IEFydGljbGVQYXJ0W11cclxue1xyXG4gICAgaWYocHJldkFydGljbGVQYXJ0ID09PSBudWxsIHx8IHVwZGF0ZUxpbmVTdGFydD09PTApXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHNwbGl0QXJ0aWNsZShhcnRpY2xlKTtcclxuICAgIH1cclxuICAgIGxldCBsaW5lcyA9IGFydGljbGUuc3BsaXQoJ1xcbicpO1xyXG4gICAgbGV0IHJlczogQXJ0aWNsZVBhcnRbXSA9IFtdO1xyXG4gICAgbGV0IG5ld0JlZ2luSW5kZXggPSAwO1xyXG4gICAgbGV0IGNoYW5nZUFydGljbGVQYXJ0SW5kZXggPSAwO1xyXG4gICAgZm9yKGxldCBpPTA7aTxwcmV2QXJ0aWNsZVBhcnQubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZih1cGRhdGVMaW5lU3RhcnQ+PXByZXZBcnRpY2xlUGFydFtpXS5iZWdpbiAmJiB1cGRhdGVMaW5lU3RhcnQ8cHJldkFydGljbGVQYXJ0W2ldLmVuZClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5ld0JlZ2luSW5kZXggPSBwcmV2QXJ0aWNsZVBhcnRbaV0uYmVnaW47XHJcbiAgICAgICAgICAgIGNoYW5nZUFydGljbGVQYXJ0SW5kZXggPSBpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgcmVzLnB1c2gocHJldkFydGljbGVQYXJ0W2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gXHU1MjI0XHU2NUFEXHU2NjJGXHU1NDI2XHU2NjJGQWRtb25pdGlvblx1NzY4NFx1N0YxNlx1OEY5MVx1NTc1N1xyXG4gICAgbGV0IHJlZ0FkbW9uaXRpb25CbG9ja0JlZ2luID0gL2BgYGFkLVxcdysvZztcclxuICAgIGlmKCBwcmV2QXJ0aWNsZVBhcnRbY2hhbmdlQXJ0aWNsZVBhcnRJbmRleF0udHlwZSA9PT0gTGluZVR5cGUudGV4dCAmJiBuZXdCZWdpbkluZGV4IT0wICYmIHJlZ0FkbW9uaXRpb25CbG9ja0JlZ2luLnRlc3QobGluZXNbbmV3QmVnaW5JbmRleC0xXSkpXHJcbiAgICB7XHJcbiAgICAgICAgY2hhbmdlQXJ0aWNsZVBhcnRJbmRleCAtPSAxO1xyXG4gICAgICAgIHJlcy5wb3AoKTtcclxuICAgIH1cclxuICAgIC8vIFx1NTIyNFx1NjVBRFx1NjYyRkFkbW9uaXRpb25cdTc2ODRcdTRFMEJcdTY1QjlgYGBcdTU3NTdcdTkwRThcdTUyMDZcclxuICAgIGVsc2UgaWYocHJldkFydGljbGVQYXJ0W2NoYW5nZUFydGljbGVQYXJ0SW5kZXhdLmJlZ2luID09PSBwcmV2QXJ0aWNsZVBhcnRbY2hhbmdlQXJ0aWNsZVBhcnRJbmRleF0uZW5kLTEgJiYgXHJcbiAgICAgICAgY2hhbmdlQXJ0aWNsZVBhcnRJbmRleD49MiAmJiByZWdBZG1vbml0aW9uQmxvY2tCZWdpbi50ZXN0KGxpbmVzW3ByZXZBcnRpY2xlUGFydFtjaGFuZ2VBcnRpY2xlUGFydEluZGV4LTJdLmVuZC0xXSkpXHJcbiAgICB7XHJcbiAgICAgICAgY2hhbmdlQXJ0aWNsZVBhcnRJbmRleCAtPSAyO1xyXG4gICAgICAgIHJlcy5wb3AoKTtcclxuICAgICAgICByZXMucG9wKCk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYoY2hhbmdlQXJ0aWNsZVBhcnRJbmRleD09PTApXHJcbiAgICB7XHJcbiAgICAgICAgcmV0dXJuIHNwbGl0QXJ0aWNsZShhcnRpY2xlKTtcclxuICAgIH1cclxuXHJcbiAgICBuZXdCZWdpbkluZGV4ID0gcHJldkFydGljbGVQYXJ0W2NoYW5nZUFydGljbGVQYXJ0SW5kZXhdLmJlZ2luO1xyXG4gICAgbGV0IG5ld1BhcnRzID0gc3BsaXRBcnRpY2xlKGFydGljbGUsIGZhbHNlLCBuZXdCZWdpbkluZGV4KTtcclxuICAgIGZvcihsZXQgaj0wO2o8bmV3UGFydHMubGVuZ3RoO2orKylcclxuICAgIHtcclxuICAgICAgICByZXMucHVzaChuZXdQYXJ0c1tqXSk7XHJcbiAgICB9XHJcbiAgICBpZihwcmludCkgbmV3IE5vdGljZShcIlJlcGFyc2UgQXJ0aWNsZTogYmVnaW4gbGluZSBpbmRleCBcIituZXdCZWdpbkluZGV4LnRvU3RyaW5nKCkpO1xyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGdldExpbmVUeXBlRnJvbUFydGljbGVQYXJ0cyhsaW5lOiBudW1iZXIsIHR5cGVBcnJheTogQXJ0aWNsZVBhcnRbXSk6TGluZVR5cGVcclxue1xyXG4gICAgZm9yKGxldCBpPTA7aTx0eXBlQXJyYXkubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihsaW5lID49IHR5cGVBcnJheVtpXS5iZWdpbiAmJiBsaW5lPHR5cGVBcnJheVtpXS5lbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZUFycmF5W2ldLnR5cGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5nRGVsZXRlQXQoc3RyOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOnN0cmluZ1xyXG57XHJcbiAgICByZXR1cm4gc3RyLnN1YnN0cmluZygwLCBpbmRleCkrc3RyLnN1YnN0cmluZyhpbmRleCsxKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHN0cmluZ0luc2VydEF0KHN0cjpzdHJpbmcsIGluZGV4OiBudW1iZXIsIHM6IHN0cmluZyk6c3RyaW5nXHJcbntcclxuICAgIHJldHVybiBzdHIuc3Vic3RyaW5nKDAsIGluZGV4KStzK3N0ci5zdWJzdHJpbmcoaW5kZXgpO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFx1NTIwNlx1NTI3Mlx1NEUwMFx1ODg0Q1x1NjU4N1x1NjcyQ1x1RkYwQ1x1NUY5N1x1NTIzMFx1NEUwRFx1NTQwQ1x1NTMzQVx1NTdERlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNwbGl0TGluZShsaW5lOiBzdHJpbmcsIHJlZ0V4cHM/OnN0cmluZyk6IElubGluZVBhcnRbXVxyXG57XHJcbiAgICBsZXQgcmVnSW5saW5lTWFyayA9IC8oPzwhXFxcXClcXCR8KD88IVxcXFwpXFxgL2c7XHJcbiAgICBsZXQgcmVnRm9ybXVsYUlubGluZSA9IC8oPzwhXFxcXClcXCQoPyEgKVteXSs/KD88ISApKD88IVxcXFwpXFwkL2c7XHJcbiAgICBsZXQgcmVnRm9ybXVsYUJsb2NrID0gLyg/PCFcXFxcKVxcJFxcJCg/ISApW15dKj8oPzwhICkoPzwhXFxcXClcXCRcXCQvZztcclxuICAgIGxldCByZWdDb2RlID0gLyg/PCFcXFxcKWBbXl0qPyg/PCFcXFxcKWAvZztcclxuICAgIGxldCBtYXJrUXVldWU6UmVnRXhwRXhlY0FycmF5W10gPSBbXTtcclxuICAgIGxldCBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhOiBJbmxpbmVQYXJ0W10gPSBbXTtcclxuXHJcbiAgICB3aGlsZSh0cnVlKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBtYXRjaCA9IHJlZ0lubGluZU1hcmsuZXhlYyhsaW5lKTtcclxuICAgICAgICBpZighbWF0Y2gpIGJyZWFrO1xyXG4gICAgICAgIG1hcmtRdWV1ZS5wdXNoKG1hdGNoKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGV4dEJlZ2luSW5kZXggPSAwO1xyXG4gICAgd2hpbGUobWFya1F1ZXVlLmxlbmd0aCE9MClcclxuICAgIHtcclxuICAgICAgICBsZXQgbWFyayA9IG1hcmtRdWV1ZS5zaGlmdCgpO1xyXG4gICAgICAgIGlmKG1hcmsuaW5kZXg8dGV4dEJlZ2luSW5kZXgpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBpZihtYXJrWzBdPT09JyQnKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoRm9ybXVsYUJlZ2luSW5kZXg6bnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hGb3JtdWxhTGFzdEluZGV4Om51bWJlcjtcclxuICAgICAgICAgICAgcmVnRm9ybXVsYUJsb2NrLmxhc3RJbmRleCA9IG1hcmsuaW5kZXg7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaEJsb2NrRm9ybXVsYSA9IHJlZ0Zvcm11bGFCbG9jay5leGVjKGxpbmUpO1xyXG4gICAgICAgICAgICBpZihtYXRjaEJsb2NrRm9ybXVsYSAmJiBtYXRjaEJsb2NrRm9ybXVsYS5pbmRleD09PW1hcmsuaW5kZXgpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1hdGNoRm9ybXVsYUJlZ2luSW5kZXggPSBtYXRjaEJsb2NrRm9ybXVsYS5pbmRleDtcclxuICAgICAgICAgICAgICAgIG1hdGNoRm9ybXVsYUxhc3RJbmRleCA9IHJlZ0Zvcm11bGFCbG9jay5sYXN0SW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICByZWdGb3JtdWxhSW5saW5lLmxhc3RJbmRleCA9IG1hcmsuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hJbmxpbmVGb3JtdWxhID0gcmVnRm9ybXVsYUlubGluZS5leGVjKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgaWYobWF0Y2hJbmxpbmVGb3JtdWxhICYmIG1hdGNoSW5saW5lRm9ybXVsYS5pbmRleD09PW1hcmsuaW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hGb3JtdWxhQmVnaW5JbmRleCA9IG1hdGNoSW5saW5lRm9ybXVsYS5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBtYXRjaEZvcm11bGFMYXN0SW5kZXggPSByZWdGb3JtdWxhSW5saW5lLmxhc3RJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NTMzOVx1OTE0RFx1NTIzMFx1RkYwQ1x1NTIxOSBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihtYXJrLmluZGV4PnRleHRCZWdpbkluZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsaW5lLnN1YnN0cmluZyh0ZXh0QmVnaW5JbmRleCwgbWFyay5pbmRleCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IElubGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IHRleHRCZWdpbkluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IG1hcmsuaW5kZXhcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLnB1c2goXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogbGluZS5zdWJzdHJpbmcobWF0Y2hGb3JtdWxhQmVnaW5JbmRleCwgbWF0Y2hGb3JtdWxhTGFzdEluZGV4KSxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUuZm9ybXVsYSxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjptYXRjaEZvcm11bGFCZWdpbkluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDptYXRjaEZvcm11bGFMYXN0SW5kZXhcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgdGV4dEJlZ2luSW5kZXggPSBtYXRjaEZvcm11bGFMYXN0SW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKG1hcmtbMF09PT0nYCcpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsZXQgbWF0Y2hDb2RlQmVnaW5JbmRleDpudW1iZXI7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaENvZGVMYXN0SW5kZXg6bnVtYmVyO1xyXG4gICAgICAgICAgICByZWdDb2RlLmxhc3RJbmRleCA9IG1hcmsuaW5kZXg7XHJcbiAgICAgICAgICAgIGxldCBtYXRjaElubGluZUNvZGUgPSByZWdDb2RlLmV4ZWMobGluZSk7XHJcbiAgICAgICAgICAgIGlmKG1hdGNoSW5saW5lQ29kZSAmJiBtYXRjaElubGluZUNvZGUuaW5kZXg9PT1tYXJrLmluZGV4KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaENvZGVCZWdpbkluZGV4ID0gbWF0Y2hJbmxpbmVDb2RlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgbWF0Y2hDb2RlTGFzdEluZGV4ID0gcmVnQ29kZS5sYXN0SW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYobWFyay5pbmRleD50ZXh0QmVnaW5JbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGxpbmUuc3Vic3RyaW5nKHRleHRCZWdpbkluZGV4LCBtYXJrLmluZGV4KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6SW5saW5lVHlwZS50ZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IHRleHRCZWdpbkluZGV4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBtYXJrLmluZGV4XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgICAgICAgICBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhLnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBsaW5lLnN1YnN0cmluZyhtYXRjaENvZGVCZWdpbkluZGV4LCBtYXRjaENvZGVMYXN0SW5kZXgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUuY29kZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46bWF0Y2hDb2RlQmVnaW5JbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kOm1hdGNoQ29kZUxhc3RJbmRleFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QmVnaW5JbmRleCA9IG1hdGNoQ29kZUxhc3RJbmRleDtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZih0ZXh0QmVnaW5JbmRleCE9bGluZS5sZW5ndGgpXHJcbiAgICB7XHJcbiAgICAgICAgYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYS5wdXNoKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBsaW5lLnN1YnN0cmluZyh0ZXh0QmVnaW5JbmRleCksXHJcbiAgICAgICAgICAgICAgICB0eXBlOklubGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgIGJlZ2luOnRleHRCZWdpbkluZGV4LFxyXG4gICAgICAgICAgICAgICAgZW5kOmxpbmUubGVuZ3RoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICB9XHJcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgIGxldCByZXRBcnJheTogSW5saW5lUGFydFtdID0gW107XHJcbiAgICBmb3IobGV0IGk9MDtpPGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGEubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLnR5cGUhPUlubGluZVR5cGUudGV4dClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHJldEFycmF5LnB1c2goYXJyYXlPZklubGluZVRleHRDb2RlRm9ybXVsYVtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2VcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wQXJyYXk6SW5saW5lUGFydFtdO1xyXG4gICAgICAgICAgICBpZihyZWdFeHBzKVxyXG4gICAgICAgICAgICAgICAgdGVtcEFycmF5ID0gc3BsaXRUZXh0V2l0aExpbmtBbmRVc2VyRGVmaW5lZChhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmNvbnRlbnQsIHJlZ0V4cHMpO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0ZW1wQXJyYXkgPSBzcGxpdFRleHRXaXRoTGlua0FuZFVzZXJEZWZpbmVkKGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGFbaV0uY29udGVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0ZW1wQXJyYXkuZm9yRWFjaChpdGVtPT57XHJcbiAgICAgICAgICAgICAgICBpdGVtLmJlZ2luICs9IGFycmF5T2ZJbmxpbmVUZXh0Q29kZUZvcm11bGFbaV0uYmVnaW47XHJcbiAgICAgICAgICAgICAgICBpdGVtLmVuZCArPSBhcnJheU9mSW5saW5lVGV4dENvZGVGb3JtdWxhW2ldLmJlZ2luO1xyXG4gICAgICAgICAgICAgICAgcmV0QXJyYXkucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByZXRBcnJheTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWF0Y2hXaXRoUmVnKHRleHQ6c3RyaW5nLCByZWdFeHA6UmVnRXhwLCB0eXBlOiBJbmxpbmVUeXBlLCBpbmxpbmVUeXBlQXJyYXk6SW5saW5lUGFydFtdLCBjaGVja0FycmF5PWZhbHNlKTpJbmxpbmVQYXJ0W11cclxue1xyXG4gICAgbGV0IHJldEFycmF5ID0gaW5saW5lVHlwZUFycmF5O1xyXG4gICAgbGV0IG1hdGNoQXJyYXk6SW5saW5lUGFydFtdID0gW107XHJcbiAgICByZXRBcnJheSA9IHJldEFycmF5LnNvcnQoKGEsIGIpOm51bWJlcj0+YS5iZWdpbi1iLmJlZ2luKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdiZWZvcmUtLS0tLS0tLS0tLVxcbicscmV0QXJyYXkpXHJcbiAgICB3aGlsZSh0cnVlKVxyXG4gICAge1xyXG4gICAgICAgIGxldCBtYXRjaCA9IHJlZ0V4cC5leGVjKHRleHQpOyBcclxuICAgICAgICBpZighbWF0Y2gpIGJyZWFrO1xyXG4gICAgICAgIGxldCB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1MUIyXHU3QTgxXHJcbiAgICAgICAgaWYoY2hlY2tBcnJheSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaT0wO2k8cmV0QXJyYXkubGVuZ3RoO2krKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYobWF0Y2guaW5kZXg8PXJldEFycmF5W2ldLmJlZ2luKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlZ0V4cC5sYXN0SW5kZXggPD0gcmV0QXJyYXlbaV0uYmVnaW4pXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ0V4cC5sYXN0SW5kZXggPD0gcmV0QXJyYXlbaV0uZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocmVnRXhwLmxhc3RJbmRleCA+IHJldEFycmF5W2ldLmVuZClcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZW1vdmVDb3VudCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBqPWkrMTsgajxyZXRBcnJheS5sZW5ndGg7aisrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZWdFeHAubGFzdEluZGV4PD1yZXRBcnJheVtqXS5iZWdpbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVDb3VudCA9IGotaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ0V4cC5sYXN0SW5kZXg8cmV0QXJyYXlbal0uZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHZhbGlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXRBcnJheS5zcGxpY2UoaSwgcmVtb3ZlQ291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAtPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoLmluZGV4PnJldEFycmF5W2ldLmJlZ2luICYmIG1hdGNoLmluZGV4PHJldEFycmF5W2ldLmVuZClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCF2YWxpZCkgY29udGludWU7XHJcbiAgICAgICAgbWF0Y2hBcnJheS5wdXNoKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBtYXRjaFswXSxcclxuICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjogbWF0Y2guaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBlbmQ6IHJlZ0V4cC5sYXN0SW5kZXhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICByZXRBcnJheSA9IHJldEFycmF5LmNvbmNhdChtYXRjaEFycmF5KTtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdBZnRlcj09PT09PT09PT09XFxuJywgcmV0QXJyYXkpO1xyXG4gICAgcmV0dXJuIHJldEFycmF5O1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFx1NTIwNlx1NTI3Mlx1NEUwMFx1ODg0Q1x1NjU4N1x1NjcyQ1x1NEUyRFx1NzY4NFx1OTRGRVx1NjNBNVx1NTQ4Q1x1NzUyOFx1NjIzN1x1ODFFQVx1NUI5QVx1NEU0OVx1NzY4NFx1NkI2M1x1NTIxOVx1OTBFOFx1NTIwNlx1RkYwQ1x1NUY5N1x1NTIzMCBJbmxpbmVQYXJ0IFx1NzY4NFx1NEUwRFx1NTQwQ1x1NTMzQVx1NTdERlxyXG4gKi9cclxuZnVuY3Rpb24gc3BsaXRUZXh0V2l0aExpbmtBbmRVc2VyRGVmaW5lZCh0ZXh0OiBzdHJpbmcsIHJlZ0V4cHM/OnN0cmluZyk6SW5saW5lUGFydFtdXHJcbntcclxuICAgIGxldCByZXRBcnJheTogSW5saW5lUGFydFtdID0gW107XHJcbiAgICBsZXQgcmVnV2lraUxpbmsgPSAvXFwhP1xcW1xcW1teXFxbXFxdXSo/XFxdXFxdL2c7XHJcbiAgICBsZXQgcmVnTWRMaW5rID0gL1xcIT9cXFtbXlxcW1xcXV0qP1xcXVxcKFteXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10qXFwpL2c7XHJcbiAgICAvLyBsZXQgcmVnQmFyZUxpbmsgPSAvKGh0dHBzP3xvYnNpZGlhbnx6b3Rlcm8pOlxcL1xcL1teXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10rL2c7XHJcbiAgICBsZXQgcmVnQmFyZUxpbmsgPSAvKGh0dHBzPzpcXC9cXC98ZnRwOlxcL1xcL3xvYnNpZGlhbjpcXC9cXC98em90ZXJvOlxcL1xcL3x3d3cuKVteXFxzXHVGRjA4XHVGRjA5XHUzMDBBXHUzMDBCXHUzMDAyXHVGRjBDXHVGRjAxXHVGRjFGXHVGRjFCXHVGRjFBXHUyMDFDXHUyMDFEXHUyMDE4XHUyMDE5XFwpXFwoXFxbXFxdXFx7XFx9J10rL2c7XHJcblxyXG4gICAgLy8gMS4gXHU1MzM5XHU5MTREd2lraWxpbmtcclxuICAgIHJldEFycmF5ID0gbWF0Y2hXaXRoUmVnKHRleHQsIHJlZ1dpa2lMaW5rLCBJbmxpbmVUeXBlLmxpbmssIHJldEFycmF5KTtcclxuICAgIC8vIDIuIFx1NTMzOVx1OTE0RG1kbGlua1xyXG4gICAgcmV0QXJyYXkgPSBtYXRjaFdpdGhSZWcodGV4dCwgcmVnTWRMaW5rLCBJbmxpbmVUeXBlLmxpbmssIHJldEFycmF5KTtcclxuXHJcbiAgICAvLyAzLiBcdTUzMzlcdTkxNERcdTc1MjhcdTYyMzdcdTgxRUFcdTVCOUFcdTRFNDlcdTZCNjNcdTUyMTlcclxuICAgIGxldCByZWdFeHBMaXN0OiBSZWdFeHBbXSA9IFtdO1xyXG4gICAgaWYocmVnRXhwcylcclxuICAgIHtcclxuICAgICAgICBsZXQgcmVncyA9IHJlZ0V4cHMuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8cmVncy5sZW5ndGg7aSsrKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbGV0IHJlZ051bGwgPSAvXlxccyokL2c7XHJcbiAgICAgICAgICAgIGlmKHJlZ051bGwudGVzdChyZWdzW2ldKSkgY29udGludWU7XHJcbiAgICAgICAgICAgIGxldCBpc1ZhbGlkUmVnID0gdHJ1ZTtcclxuICAgICAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ1RlbXAgPSBuZXcgUmVnRXhwKHJlZ3NbaV0sICdnJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaChlcnJvcilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaXNWYWxpZFJlZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0JhZCBSZWc6JywgcmVnc1tpXSk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQmFkIFJlZ0V4cDpcIiArIHJlZ3NbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZihpc1ZhbGlkUmVnKSBcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgcmVnRXhwTGlzdC5wdXNoKG5ldyBSZWdFeHAocmVnc1tpXSwgJ2cnKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnR29vZCBSZWc6JywgcmVnc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJlZ0xlbiA9IHJlZ0V4cExpc3QubGVuZ3RoO1xyXG5cclxuICAgICAgICBmb3IobGV0IGk9MDtpPHJlZ0xlbjtpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICByZXRBcnJheSA9IG1hdGNoV2l0aFJlZyh0ZXh0LCByZWdFeHBMaXN0W2ldLCBJbmxpbmVUeXBlLnVzZXIsIHJldEFycmF5LCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIDQuIFx1NTMzOVx1OTE0RFx1N0VBRlx1OTRGRVx1NjNBNVxyXG4gICAgcmV0QXJyYXkgPSBtYXRjaFdpdGhSZWcodGV4dCwgcmVnQmFyZUxpbmssIElubGluZVR5cGUubGluaywgcmV0QXJyYXksIHRydWUpO1xyXG5cclxuICAgIC8vIDUuIFx1NUY5N1x1NTIzMFx1NTI2OVx1NEY1OVx1NzY4NFx1NjU4N1x1NjcyQ1x1OTBFOFx1NTIwNlxyXG4gICAgcmV0QXJyYXkgPSByZXRBcnJheS5zb3J0KChhLCBiKTpudW1iZXI9PmEuYmVnaW4tYi5iZWdpbik7XHJcblxyXG4gICAgbGV0IHRleHRBcnJheSA6IElubGluZVBhcnRbXSA9IFtdO1xyXG4gICAgbGV0IHRleHRCZWdpbiA9IDA7XHJcbiAgICBsZXQgdGV4dEVuZCA9IDA7XHJcbiAgICBmb3IobGV0IGk9MDtpPHJldEFycmF5Lmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYodGV4dEJlZ2luPHJldEFycmF5W2ldLmJlZ2luKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGV4dEVuZCA9IHJldEFycmF5W2ldLmJlZ2luO1xyXG4gICAgICAgICAgICB0ZXh0QXJyYXkucHVzaChcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiB0ZXh0LnN1YnN0cmluZyh0ZXh0QmVnaW4sIHRleHRFbmQpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IElubGluZVR5cGUudGV4dCxcclxuICAgICAgICAgICAgICAgICAgICBiZWdpbjogdGV4dEJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgIGVuZDogdGV4dEVuZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0ZXh0QmVnaW4gPSByZXRBcnJheVtpXS5lbmQ7XHJcbiAgICB9XHJcblxyXG4gICAgaWYodGV4dEJlZ2luIT10ZXh0Lmxlbmd0aClcclxuICAgIHtcclxuICAgICAgICB0ZXh0QXJyYXkucHVzaChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgY29udGVudDogdGV4dC5zdWJzdHJpbmcodGV4dEJlZ2luLCB0ZXh0Lmxlbmd0aCksXHJcbiAgICAgICAgICAgICAgICB0eXBlOiBJbmxpbmVUeXBlLnRleHQsXHJcbiAgICAgICAgICAgICAgICBiZWdpbjogdGV4dEJlZ2luLFxyXG4gICAgICAgICAgICAgICAgZW5kOiB0ZXh0Lmxlbmd0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyA2LiBcdTU0MDhcdTVFNzZcdTY1ODdcdTY3MkNcdTkwRThcdTUyMDZcdTU0OENcdTUxNzZcdTRFRDZcdTkwRThcdTUyMDZcclxuICAgIHJldEFycmF5ID0gcmV0QXJyYXkuY29uY2F0KHRleHRBcnJheSk7XHJcbiAgICByZXRBcnJheSA9IHJldEFycmF5LnNvcnQoKGEsIGIpOm51bWJlcj0+YS5iZWdpbi1iLmJlZ2luKTtcclxuICAgIHJldHVybiByZXRBcnJheVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdExpbmUobGluZTogc3RyaW5nLCBjdXJDdXJzb3I6IEVkaXRvclBvc2l0aW9uLCBzZXR0aW5nczogRm9ybWF0U2V0dGluZ3MsIHByZXZDdXJzb3I/OiBFZGl0b3JQb3NpdGlvbik6W3N0cmluZywgbnVtYmVyLCBJbmxpbmVDaGFuZ2VbXV18bnVsbFxyXG57XHJcbiAgICBsZXQgY2ggPSBjdXJDdXJzb3IuY2g7XHJcbiAgICBpZihsaW5lPT09JycpIHJldHVybiBbJycsIDAsIFtdXTtcclxuXHJcbiAgICAvLyAxLiBcdTUyMTJcdTUyMDZcdTRFMDBcdTg4NENcdTY1ODdcdTVCNTdcdTc2ODRcdTUxODVcdTkwRThcdTRFMERcdTU0MENcdTZBMjFcdTU3NTdcdTUzM0FcdTU3REZcclxuICAgIGxldCBsaW5lUGFydHM6SW5saW5lUGFydFtdO1xyXG4gICAgaWYoc2V0dGluZ3MuVXNlckRlZmluZWRSZWdTd2l0Y2gpXHJcbiAgICB7XHJcbiAgICAgICAgbGluZVBhcnRzID0gc3BsaXRMaW5lKGxpbmUsIHNldHRpbmdzLlVzZXJEZWZpbmVkUmVnRXhwKTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBsaW5lUGFydHMgPSBzcGxpdExpbmUobGluZSk7XHJcbiAgICB9XHJcbiAgICAvLyBjb25zb2xlLmxvZyhsaW5lUGFydHMpO1xyXG5cclxuICAgIC8vIFx1NTkwN1x1NEVGRFx1NTM5Rlx1Njc2NVx1NzY4NGxpbmVQYXJ0cywgXHU2REYxXHU2MkY3XHU4RDFEXHJcbiAgICBsZXQgbGluZVBhcnRzT3JpZ2luID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShsaW5lUGFydHMpKTtcclxuICAgIGxldCBpbmxpbmVDaGFuZ2VMaXN0OklubGluZUNoYW5nZVtdID0gW107XHJcbiAgICBcclxuICAgIGxldCBjdXJzb3JMaW5lUGFydEluZGV4ID0gLTE7XHJcbiAgICBsZXQgY3Vyc29yUmVsYXRpdmVJbmRleCA9IC0xO1xyXG4gICAgbGV0IHJlc3VsdEN1cnNvckNoID0gMDsgICAgIC8vIFx1OEY5M1x1NTFGQVx1NzY4NFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxyXG5cclxuICAgIC8vIDIuIFx1NjI3RVx1NTIzMFx1NTE0OVx1NjgwN1x1NjI0MFx1NTcyOFx1NzY4NFx1OTBFOFx1NTIwNlx1RkYwQ1x1NTk4Mlx1Njc5Q1x1NjYyRiBJbmxpbmVQYXJ0LnRleHRcdUZGMENcdTUyMTlcdTU3MjhcdTUxNDlcdTY4MDdcdTU5MDRcdTYzRDJcdTUxNjUnXFwwJ1x1Njc2NVx1NjgwN1x1OEJCMFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxyXG4gICAgZm9yKGxldCBpPTA7aTxsaW5lUGFydHMubGVuZ3RoO2krKylcclxuICAgIHtcclxuICAgICAgICBpZihjaD5saW5lUGFydHNbaV0uYmVnaW4gJiYgY2g8PWxpbmVQYXJ0c1tpXS5lbmQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBjdXJzb3JMaW5lUGFydEluZGV4ID0gaTtcclxuICAgICAgICAgICAgY3Vyc29yUmVsYXRpdmVJbmRleCA9IGNoLWxpbmVQYXJ0c1tpXS5iZWdpbjtcclxuICAgICAgICAgICAgaWYobGluZVBhcnRzW2ldLnR5cGU9PT1JbmxpbmVUeXBlLnRleHQpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gc3RyaW5nSW5zZXJ0QXQobGluZVBhcnRzW2ldLmNvbnRlbnQsIGN1cnNvclJlbGF0aXZlSW5kZXgsICdcXDAnKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHRMaW5lID0gJyc7XHJcbiAgICBsZXQgb2Zmc2V0ID0gMDtcclxuICAgIC8vIFx1NEZERFx1NUI1OFx1NTI0RFx1NEUwMFx1OTBFOFx1NTIwNlx1NzY4NFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1RkYwQ0lubGluZVR5cGUubm9uZSBcdTRFRTNcdTg4NjhcdTRFMDBcdTg4NENcdTc2ODRcdTVGMDBcdTU5Q0JcclxuICAgIGxldCBwcmV2UGFydFR5cGU6c3RyaW5nID0gSW5saW5lVHlwZS5ub25lO1xyXG4gICAgbGV0IHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XHJcblxyXG4gICAgLy8gMy4gXHU5MDREXHU1Mzg2XHU2QkNGXHU0RTJBXHU4ODRDXHU5MEU4XHU1MjA2XHVGRjBDXHU4RkRCXHU4ODRDXHU2ODNDXHU1RjBGXHU1MzE2XHU1OTA0XHU3NDA2XHJcbiAgICBmb3IobGV0IGk9MDtpPGxpbmVQYXJ0cy5sZW5ndGg7aSsrKVxyXG4gICAge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGlubGluZUxpc3RbaV0pO1xyXG5cclxuICAgICAgICAvLyAzLjEgXHU1OTgyXHU2NzlDXHU4ODRDXHU1MTg1XHU3QjJDXHU0RTAwXHU5MEU4XHU1MjA2XHU0RTNBXHU2NTg3XHU2NzJDXHVGRjBDXHU1MjE5XHU1OTA0XHU3NDA2XHU1M0U1XHU5OTk2XHU1QjU3XHU2QkNEXHU1OTI3XHU1MTk5XHU3Njg0XHU5MEU4XHU1MjA2XHJcbiAgICAgICAgaWYoaT09PTAgJiYgbGluZVBhcnRzW2ldLnR5cGU9PT1JbmxpbmVUeXBlLnRleHQgJiYgc2V0dGluZ3MuQ2FwaXRhbGl6YXRpb24pXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyAzLjEuMSBcdTU5ODJcdTY3OUMgcHJldkN1cnNvciBcdTRFMTRcdTUxNDlcdTY4MDdcdTRFMERcdTU3MjhcdTZCNjRcdTkwRThcdTUyMDZcdUZGMENcdTUyMTlcdThERjNcdThGQzdcclxuICAgICAgICAgICAgaWYocHJldkN1cnNvciAmJiBjdXJzb3JMaW5lUGFydEluZGV4IT0wKXt9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ0ZpcnN0U2VudGVuY2UgPSAvXlxccyooXFwtIChcXFtbeCBdXFxdICk/KT9bYS16XS9nO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ0hlYWRlclNlbnRlbmNlID0gL14oIysgfD4rID8pW2Etel0vZztcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0Y29weSA9IGxpbmVQYXJ0c1swXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gcmVnRmlyc3RTZW50ZW5jZS5leGVjKHRleHRjb3B5KTtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRjaEhlYWRlciA9IHJlZ0hlYWRlclNlbnRlbmNlLmV4ZWModGV4dGNvcHkpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGRzdENoYXJJbmRleCA9IC0xO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKG1hdGNoKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRzdENoYXJJbmRleCA9IHJlZ0ZpcnN0U2VudGVuY2UubGFzdEluZGV4LTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKG1hdGNoSGVhZGVyKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRzdENoYXJJbmRleCA9IHJlZ0hlYWRlclNlbnRlbmNlLmxhc3RJbmRleC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFwcmV2Q3Vyc29yKXt9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZDdXJzb3IubGluZT09PWN1ckN1cnNvci5saW5lICYmIGRzdENoYXJJbmRleD49cHJldkN1cnNvci5jaCAmJiBkc3RDaGFySW5kZXg8Y3VyQ3Vyc29yLmNoKXt9XHJcbiAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGRzdENoYXJJbmRleCA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKGRzdENoYXJJbmRleCAhPSAtMSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbMF0uY29udGVudCA9IHRleHRjb3B5LnN1YnN0cmluZygwLCBkc3RDaGFySW5kZXgpK3RleHRjb3B5LmNoYXJBdChkc3RDaGFySW5kZXgpLnRvVXBwZXJDYXNlKCkrdGV4dGNvcHkuc3Vic3RyaW5nKGRzdENoYXJJbmRleCsxKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIDMuMiBcdTUyMDZcdTUyMkJcdTU5MDRcdTc0MDZcdTZCQ0ZcdTc5Q0RcdTUzM0FcdTU3NTdcdTYwQzVcdTUxQjVcclxuICAgICAgICBzd2l0Y2gobGluZVBhcnRzW2ldLnR5cGUpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAvLyAzLjIuMSBcdTU5MDRcdTc0MDZcdTY1ODdcdTY3MkNcdTUzM0FcdTU3NTdcclxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnRleHQ6XHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0JlZm9yZScsIGksIGxpbmVQYXJ0c1tpXS5jb250ZW50KVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuNCBcdTU5MDRcdTc0MDZcdTUzRTVcdTk5OTZcdTVCNTdcdTZCQ0RcdTU5MjdcdTUxOTlcclxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkNhcGl0YWxpemF0aW9uKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdHZhciByZWcgPSAvW1xcLlxcP1xcIVx1MzAwMlx1RkYwMVx1RkYxRl0oW1xcc10qKVthLXpdL2c7XHJcblx0XHRcdFx0XHR3aGlsZSh0cnVlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1hdGNoID0gcmVnLmV4ZWMoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFtYXRjaCkgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wSW5kZXggPSByZWcubGFzdEluZGV4LTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHByZXZDdXJzb3IsIGN1ckN1cnNvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXBJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKCFwcmV2Q3Vyc29yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHRlbXBJbmRleCkgKyBjb250ZW50LmNoYXJBdCh0ZW1wSW5kZXgpLnRvVXBwZXJDYXNlKCkgKyBjb250ZW50LnN1YnN0cmluZyhyZWcubGFzdEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHByZXZDdXJzb3IgJiYgY3Vyc29yTGluZVBhcnRJbmRleD09PWkgJiYgcHJldkN1cnNvci5saW5lPT09Y3VyQ3Vyc29yLmxpbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRlbXBJbmRleD49cHJldkN1cnNvci5jaC1vZmZzZXQgJiYgdGVtcEluZGV4PGN1ckN1cnNvci5jaC1vZmZzZXQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnN1YnN0cmluZygwLCB0ZW1wSW5kZXgpICsgY29udGVudC5jaGFyQXQodGVtcEluZGV4KS50b1VwcGVyQ2FzZSgpICsgY29udGVudC5zdWJzdHJpbmcocmVnLmxhc3RJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuMSBcdTU5MDRcdTc0MDZcdTRFMkRcdTgyRjFcdTY1ODdcdTRFNEJcdTk1RjRcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkNoaW5lc2VFbmdsaXNoU3BhY2Upe1xyXG5cdFx0XHRcdFx0bGV0IHJlZzE9LyhbQS1aYS16MC05LFxcLjtcXD86IV0pKFtcXHU0ZTAwLVxcdTlmYTVdKykvZ2k7XHJcblx0XHRcdFx0XHRsZXQgcmVnMj0vKFtcXHU0ZTAwLVxcdTlmYTVdKykoW0EtWmEtejAtOV0pL2dpO1xyXG5cdFx0XHRcdFx0bGluZVBhcnRzW2ldLmNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UocmVnMSwgXCIkMSAkMlwiKS5yZXBsYWNlKHJlZzIsIFwiJDEgJDJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG5cdFx0XHRcdH1cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuMiBcdTU5MDRcdTc0MDZcdTRFMkRcdTY1ODdcdTk1RjRcdTY1RTBcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkNoaW5lc2VOb1NwYWNlKVxyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGxldCByZWc9LyhbXFx1NGUwMC1cXHU5ZmE1XHVGRjBDXHUzMDAyXHUzMDAxXHVGRjFCXHUyMDE4XHUyMDE5XHUzMDBBXHUzMDBCXSspKFxccyspKFtcXHU0ZTAwLVxcdTlmYTVcdUZGMENcdTMwMDJcdTMwMDFcdUZGMUJcdTIwMThcdTIwMTlcdTMwMEFcdTMwMEJdKykvZztcclxuXHRcdFx0XHRcdHdoaWxlKHJlZy5leGVjKGNvbnRlbnQpKVxyXG5cdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcsIFwiJDEkM1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5QdW5jdHVhdGlvblNwYWNlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRleHQuMyBcdTU5MDRcdTc0MDZcdTgyRjFcdTY1ODdcdTVCNTdcdTZCQ0RcdTRFMEVcdTY4MDdcdTcwQjlcdTk1RjRcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZihzZXR0aW5ncy5FbmdsaXNoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnID0gLyhbLFxcLjtcXD9cXCFdKShbQS1aYS16XSkvZ2k7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlKHRydWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXRjaCA9IHJlZy5leGVjKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoIW1hdGNoKSBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wSW5kZXggPSByZWcubGFzdEluZGV4LTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighcHJldkN1cnNvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5zdWJzdHJpbmcoMCwgdGVtcEluZGV4KSArIFwiIFwiICsgY29udGVudC5zdWJzdHJpbmcodGVtcEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYocHJldkN1cnNvciAmJiBjdXJzb3JMaW5lUGFydEluZGV4PT09aSAmJiBwcmV2Q3Vyc29yLmxpbmU9PT1jdXJDdXJzb3IubGluZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0ZW1wSW5kZXg+PXByZXZDdXJzb3IuY2gtb2Zmc2V0ICYmIHRlbXBJbmRleDxjdXJDdXJzb3IuY2gtb2Zmc2V0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc3Vic3RyaW5nKDAsIHRlbXBJbmRleCkgKyBcIiBcIiArIGNvbnRlbnQuc3Vic3RyaW5nKHRlbXBJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUzNTVcdTcyRUNcdTU5MDRcdTc0MDZcdTUxOTJcdTUzRjdcdTU0MEVcdTY1ODdcdTY3MkNcdTc2ODRcdTgxRUFcdTUyQThcdTdBN0FcdTY4M0NcdUZGMENcdTRFM0FcdTRFODZcdTUxN0NcdTVCQjkgOmVtb2ppOiBcdTY4M0NcdTVGMEZcdTc2ODRcdThGOTNcdTUxNjVcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlZzIgPSAvKDopKFtBLVphLXowLTlfXStbICxcXC5cXD9cXFxcXFwvOydcIlx1RkYwQ1x1MzAwMlx1RkYxRlx1RkYxQlx1MjAxOFx1MjAxQ1x1MjAxRFx1MjAxOVx1MzAwMVxcW1xcXVxcLVxce1xcfV0pL2dpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcyLCBcIiQxICQyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhsaW5lUGFydHNbaV0uY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRleHQuNSBcdTU5MDRcdTc0MDZcdTgyRjFcdTY1ODdcdTYyRUNcdTUzRjdcdTRFMEVcdTU5MTZcdTkwRThcdTY1ODdcdTY3MkNcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgICAgICAvLyBpZihzZXR0aW5ncy5CcmFjZVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZzEgPSAvKFxcKSkoW0EtWmEtejAtOVxcdTRlMDAtXFx1OWZhNV0rKS9naTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZzIgPSAvKFtBLVphLXowLTlcXHU0ZTAwLVxcdTlmYTU6LFxcLlxcP1xcISdcIl0rKShcXCgpL2dpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcxLCBcIiQxICQyXCIpLnJlcGxhY2UocmVnMiwgXCIkMSAkMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGV4dC42IFx1NTkwNFx1NzQwNlx1NjU3MFx1NUI1N1x1NEUwRVx1NjgwN1x1NzBCOVx1NzY4NFx1N0E3QVx1NjgzQ1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmKHNldHRpbmdzLk51bWJlclNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZzEgPSAvKFssO1xcP1xcIVxcXVxcfV0pKFswLTldKS9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnMiA9IC8oWzAtOV0pKFtcXFtcXHtdKS9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9IGNvbnRlbnQucmVwbGFjZShyZWcxLCBcIiQxICQyXCIpLnJlcGxhY2UocmVnMiwgXCIkMSAkMlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuNyBcdTVGOTdcdTUyMzBcdTY1ODdcdTY3MkNcdTkwRThcdTUyMDZcdTY2MkZcdTU0MjZcdTRFRTVcdTdBN0FcdTc2N0RcdTdCMjZcdTVGMDBcdTU5Q0JcdTYyMTZcdTdFRDNcdTY3NUZcdUZGMENcdTc1MjhcdTY3NjVcdTUyMjRcdTY1QURcdTU0MEVcdTdFRURcdTY1ODdcdTY3MkNcdTUyNERcdTU0MEVcdTY2MkZcdTU0MjZcdTk3MDBcdTg5ODFcdTZERkJcdTUyQTBcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgIGxldCByZWdTdGFydFdpdGhTcGFjZSA9IC9eXFwwP1tcXHMsXFwuO1xcP1xcIVx1RkYwQ1x1MzAwMlx1RkYxQlx1RkYxRlx1RkYwMVx1MzAwMVx1RkYwOFx1RkYwOVxcXVxcKVxcfV0vO1xyXG4gICAgICAgICAgICAgICAgbGV0IHJlZ0VuZFdpdGhTcGFjZSA9IC9bXFxzXHVGRjBDXHUzMDAyXHUzMDAxXHVGRjFBXHVGRjFCXHVGRjFGXHVGRjAxXHVGRjA4XHVGRjA5XFxbXFwoXFx7XVxcMD8kLztcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0U3RhcnRXaXRoU3BhY2UgPSByZWdTdGFydFdpdGhTcGFjZS50ZXN0KGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHRFbmRXaXRoU3BhY2UgPSByZWdFbmRXaXRoU3BhY2UudGVzdChjb250ZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpLCBsaW5lUGFydHNbaV0uY29udGVudCwgJzsgIXN0YXJ0d2l0aHNwYWNlOicsIXRleHRTdGFydFdpdGhTcGFjZSlcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBUZXh0LjggXHU2ODM5XHU2MzZFXHU1MjREXHU0RTAwXHU5MEU4XHU1MjA2XHU3Njg0XHU1MzNBXHU1NzU3XHU3QzdCXHU1NzhCXHU1OTA0XHU3NDA2XHU3QTdBXHU2ODNDXHU2REZCXHU1MkEwXHU3Njg0XHU5NUVFXHU5ODk4XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlICYmICF0ZXh0U3RhcnRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpXS5jb250ZW50ID0gJyAnK2NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSAmJiAhdGV4dFN0YXJ0V2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihsaW5lUGFydHNbaV0uY29udGVudC5jaGFyQXQoMCk9PT0nICcpIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnQmFyZUxpbmsgPSAvXihodHRwcz86XFwvXFwvfGZ0cDpcXC9cXC98b2JzaWRpYW46XFwvXFwvfHpvdGVybzpcXC9cXC98d3d3LilbXlxcc1x1RkYwOFx1RkYwOVx1MzAwQVx1MzAwQlx1MzAwMiw7Olx1RkYwQ1x1RkYwMVx1RkYxRlx1RkYxQlx1RkYxQVx1MjAxQ1x1MjAxRFx1MjAxOFx1MjAxOVxcKVxcKFxcW1xcXVxce1xcfSddKy9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNCYXJlTGluayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0JhcmVMaW5rID0gcmVnQmFyZUxpbmsudGVzdChsaW5lUGFydHNbaS0xXS5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2JhcmVsaW5rJywgaXNCYXJlTGluaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNCYXJlTGluaylcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU21hcnRTcGFjZSAmJiAhdGV4dFN0YXJ0V2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnVGVzdFdpa2lMaW5rID0gL1xcIT9cXFtcXFtbXlxcW1xcXV0qP1xcXVxcXS87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnTWRMaW5rID0gL1xcIT9cXFtbXlxcW1xcXV0qP1xcXVxcKFteXFxzXFwpXFwoXFxbXFxdXFx7XFx9J10qXFwpL2c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVnTm9OZWVkU3BhY2UgPSAvW1xcdTRlMDAtXFx1OWZhNV1bXFx1NGUwMC1cXHU5ZmE1XS9nOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0d29OZWlnaGJvckNoYXJzID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0VGV4dEJlZ2luID0gbGluZVBhcnRzW2ldLmNvbnRlbnQuY2hhckF0KDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdExpbmtFbmQ6c3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBsaW5rV2l0aE5vVGV4dCA9IGZhbHNlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlZ1Rlc3RXaWtpTGluay50ZXN0KGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJBdExpbmtFbmQgPSBsaW5lUGFydHNbaS0xXS5jb250ZW50LmNoYXJBdChsaW5lUGFydHNbaS0xXS5jb250ZW50Lmxlbmd0aC0zKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGFyQXRMaW5rRW5kPT09J1snKSBsaW5rV2l0aE5vVGV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHJlZ01kTGluay50ZXN0KGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCByZWdNZExpbmtFbmQgPSAvXFxdLztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0TGlua0VuZEluZGV4PWxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQuc2VhcmNoKHJlZ01kTGlua0VuZCktMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFyQXRMaW5rRW5kID0gbGluZVBhcnRzW2ktMV0uY29udGVudC5jaGFyQXQoY2hhckF0TGlua0VuZEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGFyQXRMaW5rRW5kPT09J1snKSBsaW5rV2l0aE5vVGV4dCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHdvTmVpZ2hib3JDaGFycyA9IGNoYXJBdExpbmtFbmQrY2hhckF0VGV4dEJlZ2luO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoICFsaW5rV2l0aE5vVGV4dCAmJiAhcmVnTm9OZWVkU3BhY2UudGVzdCh0d29OZWlnaGJvckNoYXJzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKCFzZXR0aW5ncy5MaW5rU21hcnRTcGFjZSAmJiBzZXR0aW5ncy5MaW5rU3BhY2UgJiYgIXRleHRTdGFydFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSAnICcrY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSAmJiAhdGV4dFN0YXJ0V2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaV0uY29udGVudCA9ICcgJytjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudCA9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFRleHQuOSBcdTU5ODJcdTY3OUNcdTUxNDlcdTY4MDdcdTU3MjhcdThCRTVcdTUzM0FcdTU3NTdcdUZGMENcdTUyMTlcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTUxNDlcdTY4MDdcdTc2ODRcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlZyA9ICdcXDAnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuID0gY29udGVudC5zZWFyY2gocmVnKVxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEN1cnNvckNoID0gb2Zmc2V0ICsgbjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTUyMjBcdTk2NjQgXFwwXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZVBhcnRzW2ldLmNvbnRlbnQgPSBzdHJpbmdEZWxldGVBdChjb250ZW50LCBuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBZnRlcicsIGksIGxpbmVQYXJ0c1tpXS5jb250ZW50KVxyXG4gICAgICAgICAgICAgICAgLy8gVGV4dC4xMCBcdTUzRDhcdTkxQ0ZcdTY2RjRcdTY1QjBcclxuICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS50ZXh0O1xyXG4gICAgICAgICAgICAgICAgcHJldlRleHRFbmRXaXRoU3BhY2UgPSB0ZXh0RW5kV2l0aFNwYWNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyAzLjIuMiBcdTU5MDRcdTc0MDZcdTg4NENcdTUxODVcdTRFRTNcdTc4MDFcdTU3NTdcdTkwRThcdTUyMDZcclxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XHJcbiAgICAgICAgICAgICAgICAvLyBDb2RlLjEgXHU2ODM5XHU2MzZFXHU1MjREXHU0RTAwXHU1MzNBXHU1NzU3XHU3QzdCXHU1NzhCXHU1NDhDc2V0dGluZ3NcdTZERkJcdTUyQTBcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UgJiYgIXByZXZUZXh0RW5kV2l0aFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaS0xXS5jb250ZW50ICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmNvZGU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUNvZGVTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlIHx8IHNldHRpbmdzLklubGluZUNvZGVTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlIHx8IHNldHRpbmdzLklubGluZUNvZGVTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSB8fCBzZXR0aW5ncy5JbmxpbmVDb2RlU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ29kZS4yIFx1NTk4Mlx1Njc5Q1x1NTE0OVx1NjgwN1x1NTcyOFx1OEJFNVx1NTMzQVx1NTc1N1x1RkYwQ1x1NTIxOVx1OEJBMVx1N0I5N1x1NjcwMFx1N0VDOFx1NTE0OVx1NjgwN1x1NzY4NFx1NEY0RFx1N0Y2RVxyXG4gICAgICAgICAgICAgICAgaWYoaSA9PT0gY3Vyc29yTGluZVBhcnRJbmRleClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRDdXJzb3JDaCA9IG9mZnNldCArIGN1cnNvclJlbGF0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBDb2RlLjMgXHU1M0Q4XHU5MUNGXHU2NkY0XHU2NUIwXHJcbiAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGxpbmVQYXJ0c1tpXS5jb250ZW50Lmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIHByZXZQYXJ0VHlwZSA9IElubGluZVR5cGUuY29kZTtcclxuICAgICAgICAgICAgICAgIHByZXZUZXh0RW5kV2l0aFNwYWNlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgIC8vIDMuMi4zIFx1NTkwNFx1NzQwNlx1ODg0Q1x1NTE4NVx1NTE2Q1x1NUYwRlx1NzY4NFx1OTBFOFx1NTIwNlxyXG4gICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgIC8vIEZvcm11bGEuMSBcdTY4MzlcdTYzNkVcdTUyNERcdTRFMDBcdTUzM0FcdTU3NTdcdTdDN0JcdTU3OEJcdTU0OENzZXR0aW5nc1x1NkRGQlx1NTJBMFx1N0E3QVx1NjgzQ1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoKHByZXZQYXJ0VHlwZSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubm9uZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLnRleHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlIHx8IHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU3BhY2UgfHwgc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlIHx8IHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvcm11bGEuMiBcdTU5ODJcdTY3OUNcdTUxNDlcdTY4MDdcdTU3MjhcdThCRTVcdTUzM0FcdTU3NTdcdUZGMENcdTUyMTlcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTUxNDlcdTY4MDdcdTc2ODRcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBjdXJzb3JSZWxhdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gRm9ybXVsYS4zIFx1NTNEOFx1OTFDRlx1NjZGNFx1NjVCMFxyXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBwcmV2UGFydFR5cGUgPSBJbmxpbmVUeXBlLmZvcm11bGE7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAvLyAzLjIuNCBcdTU5MDRcdTc0MDZcdTg4NENcdTUxODVcdTk0RkVcdTYzQTVcdTc2ODRcdTkwRThcdTUyMDZcclxuICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmxpbms6XHJcbiAgICAgICAgICAgICAgICAvLyBMaW5rLjEgXHU2ODM5XHU2MzZFXHU1MjREXHU0RTAwXHU1MzNBXHU1NzU3XHU3QzdCXHU1NzhCXHU1NDhDc2V0dGluZ3NcdTZERkJcdTUyQTBcdTdBN0FcdTY4M0NcclxuICAgICAgICAgICAgICAgIHN3aXRjaChwcmV2UGFydFR5cGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLm5vbmU6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS50ZXh0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhckF0VGV4dEVuZCA9IGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQuY2hhckF0KGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQubGVuZ3RoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjaGFyQXRUZXh0RW5kPT09JyAnKSBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLkxpbmtTbWFydFNwYWNlICYmICFwcmV2VGV4dEVuZFdpdGhTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ1Rlc3RXaWtpTGluayA9IC9cXCE/XFxbXFxbW15cXFtcXF1dKj9cXF1cXF0vO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ01kTGluayA9IC9cXCE/XFxbW15cXFtcXF1dKj9cXF1cXChbXlxcc1xcKVxcKFxcW1xcXVxce1xcfSddKlxcKS9nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ05vTmVlZFNwYWNlID0gL1tcXHU0ZTAwLVxcdTlmYTVdW1xcdTRlMDAtXFx1OWZhNV0vZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpc0JhcmVMaW5rID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdHdvTmVpZ2hib3JDaGFycyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdExpbmtCZWdpbiA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmtXaXRoTm9UZXh0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihyZWdUZXN0V2lraUxpbmsudGVzdChsaW5lUGFydHNbaV0uY29udGVudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGJlZ2luSW5kZXggPSAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdCgwKT09PSchJykgYmVnaW5JbmRleD0zO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJBdExpbmtCZWdpbiA9IGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdChiZWdpbkluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjaGFyQXRMaW5rQmVnaW49PT0nXScpIGxpbmtXaXRoTm9UZXh0ID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihyZWdNZExpbmsudGVzdChsaW5lUGFydHNbaV0uY29udGVudCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJlZ01kTGlua0JlZ2luID0gL1xcWy87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYXJBdExpbmtCZWdpbkluZGV4ID0gbGluZVBhcnRzW2ldLmNvbnRlbnQuc2VhcmNoKHJlZ01kTGlua0JlZ2luKSsxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJBdExpbmtCZWdpbiA9IGxpbmVQYXJ0c1tpXS5jb250ZW50LmNoYXJBdChjaGFyQXRMaW5rQmVnaW5JbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY2hhckF0TGlua0JlZ2luPT09J10nKSBsaW5rV2l0aE5vVGV4dCA9IHRydWU7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQmFyZUxpbmsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR3b05laWdoYm9yQ2hhcnMgPSBjaGFyQXRUZXh0RW5kK2NoYXJBdExpbmtCZWdpbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggIWxpbmtXaXRoTm9UZXh0ICYmIChpc0JhcmVMaW5rIHx8ICFyZWdOb05lZWRTcGFjZS50ZXN0KHR3b05laWdoYm9yQ2hhcnMpKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lUGFydHNbaS0xXS5jb250ZW50ICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKHNldHRpbmdzLkxpbmtTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlIHx8IHNldHRpbmdzLkxpbmtTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuZm9ybXVsYTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lRm9ybXVsYVNwYWNlIHx8IHNldHRpbmdzLkxpbmtTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUubGluazpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuTGlua1NwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5Vc2VyUGFydFNwYWNlIHx8IHNldHRpbmdzLkxpbmtTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBMaW5rLjIgXHU1OTgyXHU2NzlDXHU4QkU1XHU1MzNBXHU1NzU3XHU2NzA5XHU1MTQ5XHU2ODA3XHVGRjBDXHU1MjE5XHU4QkExXHU3Qjk3XHU2NzAwXHU3RUM4XHU1MTQ5XHU2ODA3XHU0RjREXHU3RjZFXHJcbiAgICAgICAgICAgICAgICBpZihpID09PSBjdXJzb3JMaW5lUGFydEluZGV4KVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEN1cnNvckNoID0gb2Zmc2V0ICsgY3Vyc29yUmVsYXRpdmVJbmRleDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIExpbmsuMyBcdTY2RjRcdTY1QjBcdTUzRDhcdTkxQ0ZcclxuICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gbGluZVBhcnRzW2ldLmNvbnRlbnQubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgcHJldlBhcnRUeXBlID0gSW5saW5lVHlwZS5saW5rO1xyXG4gICAgICAgICAgICAgICAgcHJldlRleHRFbmRXaXRoU3BhY2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gMy4yLjUgXHU1OTA0XHU3NDA2XHU3NTI4XHU2MjM3XHU4MUVBXHU1QjlBXHU0RTQ5XHU1MzNBXHU1NzU3XHU3Njg0XHU5MEU4XHU1MjA2XHJcbiAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS51c2VyOlxyXG4gICAgICAgICAgICAgICAgLy8gVXNlci4xIFx1NjgzOVx1NjM2RVx1NTI0RFx1NEUwMFx1NTMzQVx1NTc1N1x1N0M3Qlx1NTc4Qlx1NTQ4Q3NldHRpbmdzXHU2REZCXHU1MkEwXHU3QTdBXHU2ODNDXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2gocHJldlBhcnRUeXBlKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5ub25lOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudGV4dDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSAmJiAhcHJldlRleHRFbmRXaXRoU3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVQYXJ0c1tpLTFdLmNvbnRlbnQgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUuY29kZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuSW5saW5lQ29kZVNwYWNlIHx8IHNldHRpbmdzLlVzZXJQYXJ0U3BhY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZUNoYW5nZUxpc3QucHVzaChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6JyAnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbjogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luOicnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdExpbmUgKz0gJyAnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBJbmxpbmVUeXBlLmZvcm11bGE6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNldHRpbmdzLklubGluZUZvcm11bGFTcGFjZSB8fCBzZXR0aW5ncy5Vc2VyUGFydFNwYWNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OicgJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c1tpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yaWdpbjonJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRMaW5lICs9ICcgJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgSW5saW5lVHlwZS5saW5rOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzZXR0aW5ncy5MaW5rU3BhY2UgfHwgc2V0dGluZ3MuVXNlclBhcnRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIElubGluZVR5cGUudXNlcjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2V0dGluZ3MuVXNlclBhcnRTcGFjZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lQ2hhbmdlTGlzdC5wdXNoKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDonICcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlZ2luOiBsaW5lUGFydHNbaV0uYmVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZDogbGluZVBhcnRzW2ldLmJlZ2luLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmlnaW46JydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSAnICc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFVzZXIuMiBcdTU5ODJcdTY3OUNcdThCRTVcdTUzM0FcdTU3NTdcdTY3MDlcdTUxNDlcdTY4MDdcdUZGMENcdTUyMTlcdThCQTFcdTdCOTdcdTY3MDBcdTdFQzhcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcclxuICAgICAgICAgICAgICAgIGlmKGkgPT09IGN1cnNvckxpbmVQYXJ0SW5kZXgpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q3Vyc29yQ2ggPSBvZmZzZXQgKyBjdXJzb3JSZWxhdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gTGluay4zIFx1NjZGNFx1NjVCMFx1NTNEOFx1OTFDRlxyXG4gICAgICAgICAgICAgICAgcmVzdWx0TGluZSArPSBsaW5lUGFydHNbaV0uY29udGVudDtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSBsaW5lUGFydHNbaV0uY29udGVudC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBwcmV2UGFydFR5cGUgPSBJbmxpbmVUeXBlLnVzZXI7XHJcbiAgICAgICAgICAgICAgICBwcmV2VGV4dEVuZFdpdGhTcGFjZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZvcihsZXQgaT0wO2k8bGluZVBhcnRzLmxlbmd0aDtpKyspXHJcbiAgICB7XHJcbiAgICAgICAgaWYobGluZVBhcnRzW2ldLnR5cGUgPT09IElubGluZVR5cGUudGV4dCAmJiBsaW5lUGFydHNbaV0uY29udGVudCE9bGluZVBhcnRzT3JpZ2luW2ldLmNvbnRlbnQpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbmxpbmVDaGFuZ2VMaXN0LnB1c2goXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogbGluZVBhcnRzW2ldLmNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgYmVnaW46IGxpbmVQYXJ0c09yaWdpbltpXS5iZWdpbixcclxuICAgICAgICAgICAgICAgICAgICBlbmQ6IGxpbmVQYXJ0c09yaWdpbltpXS5lbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luOiBsaW5lUGFydHNPcmlnaW5baV0uY29udGVudFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlubGluZUNoYW5nZUxpc3QgPSBpbmxpbmVDaGFuZ2VMaXN0LnNvcnQoKGEsIGIpOm51bWJlcj0+YS5iZWdpbi1iLmJlZ2luKTtcclxuICAgIHJldHVybiBbcmVzdWx0TGluZSwgcmVzdWx0Q3Vyc29yQ2gsIGlubGluZUNoYW5nZUxpc3RdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaXNQb3NpdGlvbkJlZm9yZShwb3MxOiBFZGl0b3JQb3NpdGlvbiwgcG9zMjogRWRpdG9yUG9zaXRpb24pOiBib29sZWFuXHJcbntcclxuICAgIGlmKHBvczEubGluZSA8IHBvczIubGluZSkgcmV0dXJuIHRydWU7XHJcbiAgICBlbHNlIGlmIChwb3MxLmxpbmUgPiBwb3MyLmxpbmUpIHJldHVybiBmYWxzZTtcclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICBpZihwb3MxLmNoIDwgcG9zMi5jaCkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBLHVCQUF5STs7O0FDQXpJLHNCQUF1QztBQUVoQyxJQUFLO0FBQUwsVUFBSyxhQUFMO0FBQWlCLHdCQUFLO0FBQVEsd0JBQUs7QUFBUSwyQkFBUTtBQUFXLHdCQUFLO0FBQVEsd0JBQUs7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
