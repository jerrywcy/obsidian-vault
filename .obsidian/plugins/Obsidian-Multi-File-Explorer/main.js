"use strict";const L=require("obsidian");function H(){}function Oe(e,t){for(const n in t)e[n]=t[n];return e}function Wt(e){return e()}function rt(){return Object.create(null)}function ue(e){e.forEach(Wt)}function Jt(e){return typeof e=="function"}function X(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ae;function ct(e,t){return Ae||(Ae=document.createElement("a")),Ae.href=t,e===Ae.href}function Kt(e){return Object.keys(e).length===0}function st(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function ft(e){return e==null?"":e}function g(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function M(e){e.parentNode.removeChild(e)}function _e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function Te(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function de(e){return document.createTextNode(e)}function W(){return de(" ")}function ce(){return de("")}function K(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function Bt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function m(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function Yt(e){return Array.from(e.childNodes)}function Fe(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}let ye;function we(e){ye=e}function Qt(){if(!ye)throw new Error("Function called outside component initialization");return ye}function Ue(e){Qt().$$.on_mount.push(e)}const ke=[],D=[],Pe=[],ze=[],Xt=Promise.resolve();let qe=!1;function xt(){qe||(qe=!0,Xt.then(Ot))}function Ze(e){Pe.push(e)}function oe(e){ze.push(e)}const De=new Set;let Me=0;function Ot(){const e=ye;do{for(;Me<ke.length;){const t=ke[Me];Me++,we(t),$t(t.$$)}for(we(null),ke.length=0,Me=0;D.length;)D.pop()();for(let t=0;t<Pe.length;t+=1){const n=Pe[t];De.has(n)||(De.add(n),n())}Pe.length=0}while(ke.length);for(;ze.length;)ze.pop()();qe=!1,De.clear(),we(e)}function $t(e){if(e.fragment!==null){e.update(),ue(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ze)}}const Le=new Set;let ge;function Z(){ge={r:0,c:[],p:ge}}function G(){ge.r||ue(ge.c),ge=ge.p}function _(e,t){e&&e.i&&(Le.delete(e),e.i(t))}function C(e,t,n,l){if(e&&e.o){if(Le.has(e))return;Le.add(e),ge.c.push(()=>{Le.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function Rt(e,t){const n={},l={},i={$$scope:1};let s=e.length;for(;s--;){const o=e[s],c=t[s];if(c){for(const r in o)r in c||(l[r]=1);for(const r in c)i[r]||(n[r]=c[r],i[r]=1);e[s]=c}else for(const r in o)i[r]=1}for(const o in l)o in n||(n[o]=void 0);return n}function jt(e){return typeof e=="object"&&e!==null?e:{}}function re(e,t,n){const l=e.$$.props[t];l!==void 0&&(e.$$.bound[l]=n,n(e.$$.ctx[l]))}function Y(e){e&&e.c()}function z(e,t,n,l){const{fragment:i,on_mount:s,on_destroy:o,after_update:c}=e.$$;i&&i.m(t,n),l||Ze(()=>{const r=s.map(Wt).filter(Jt);o?o.push(...r):ue(r),e.$$.on_mount=[]}),c.forEach(Ze)}function q(e,t){const n=e.$$;n.fragment!==null&&(ue(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function en(e,t){e.$$.dirty[0]===-1&&(ke.push(e),xt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function x(e,t,n,l,i,s,o,c=[-1]){const r=ye;we(e);const f=e.$$={fragment:null,ctx:null,props:s,update:H,not_equal:i,bound:rt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(r?r.$$.context:[])),callbacks:rt(),dirty:c,skip_bound:!1,root:t.target||r.$$.root};o&&o(f.root);let d=!1;if(f.ctx=n?n(e,t.props||{},(a,h,...u)=>{const p=u.length?u[0]:h;return f.ctx&&i(f.ctx[a],f.ctx[a]=p)&&(!f.skip_bound&&f.bound[a]&&f.bound[a](p),d&&en(e,a)),h}):[],f.update(),d=!0,ue(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const a=Yt(t.target);f.fragment&&f.fragment.l(a),a.forEach(M)}else f.fragment&&f.fragment.c();t.intro&&_(e.$$.fragment),z(e,t.target,t.anchor,t.customElement),Ot()}we(r)}class ${$destroy(){q(this,1),this.$destroy=H}$on(t,n){const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(t){this.$$set&&!Kt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function We(e,t,n,l){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function c(d){try{f(l.next(d))}catch(a){o(a)}}function r(d){try{f(l.throw(d))}catch(a){o(a)}}function f(d){d.done?s(d.value):i(d.value).then(c,r)}f((l=l.apply(e,t||[])).next())})}function tn(e){var s;let t,n=((s=e[3])==null?void 0:s.svg)+"",l,i;return{c(){var o,c;t=Te("svg"),m(t,"class",l=e[4].class),m(t,"focusable",e[2]),m(t,"width",e[0]),m(t,"height",e[1]),m(t,"viewBox",i="0 0 "+((o=e[3])==null?void 0:o.box)+" "+((c=e[3])==null?void 0:c.box))},m(o,c){P(o,t,c),t.innerHTML=n},p(o,[c]){var r,f,d;c&8&&n!==(n=((r=o[3])==null?void 0:r.svg)+"")&&(t.innerHTML=n),c&16&&l!==(l=o[4].class)&&m(t,"class",l),c&4&&m(t,"focusable",o[2]),c&1&&m(t,"width",o[0]),c&2&&m(t,"height",o[1]),c&8&&i!==(i="0 0 "+((f=o[3])==null?void 0:f.box)+" "+((d=o[3])==null?void 0:d.box))&&m(t,"viewBox",i)},i:H,o:H,d(o){o&&M(t)}}}function nn(e,t,n){let{name:l}=t,{width:i="1rem"}=t,{height:s="1rem"}=t,{focusable:o="false"}=t,c=[{box:24,name:"Last 7 Days",svg:`<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
  <line x1="16" y1="2" x2="16" y2="6"></line>
  <line x1="8" y1="2" x2="8" y2="6"></line>
  <line x1="3" y1="10" x2="21" y2="10"></line>
  <path d="M8 14h.01"></path>
  <path d="M12 14h.01"></path>
  <path d="M16 14h.01"></path>
  <path d="M8 18h.01"></path>
  <path d="M12 18h.01"></path>
  <path d="M16 18h.01"></path>
<g>`},{box:24,name:"All",svg:`<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path>
  <polyline points="14 2 14 8 20 8"></polyline>
  <line x1="16" y1="13" x2="8" y2="13"></line>
  <line x1="16" y1="17" x2="8" y2="17"></line>
  <line x1="10" y1="9" x2="8" y2="9"></line>
</g>`},{box:24,name:"Trash",svg:`<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M3 6h18"></path>
  <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path>
  <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
  <line x1="10" y1="11" x2="10" y2="17"></line>
  <line x1="14" y1="11" x2="14" y2="17"></line>
</g>`},{box:24,name:"Favorites",svg:'<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></g>'},{box:24,name:"Today",svg:'<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line><path d="M8 14h.01"></path><path d="M12 14h.01"></path><path d="M16 14h.01"></path><path d="M8 18h.01"></path><path d="M12 18h.01"></path><path d="M16 18h.01"></path></g>'},{box:24,name:"Yesterday",svg:'<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line><path d="M8 14h.01"></path><path d="M12 14h.01"></path><path d="M16 14h.01"></path><path d="M8 18h.01"></path><path d="M12 18h.01"></path><path d="M16 18h.01"></path></g>'},{box:24,name:"folder-close",svg:`<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z"></path>
  <path d="M2 10h20"></path></g>`},{box:24,name:"folder-open",svg:`<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
  <path d="m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2"></path>
</g>`}],r=c.find(f=>f.name===l);return r||(r=c.find(f=>f.name==="All")),e.$$set=f=>{n(4,t=Oe(Oe({},t),st(f))),"name"in f&&n(5,l=f.name),"width"in f&&n(0,i=f.width),"height"in f&&n(1,s=f.height),"focusable"in f&&n(2,o=f.focusable)},t=st(t),[i,s,o,r,t,l]}class ln extends ${constructor(t){super(),x(this,t,nn,tn,X,{name:5,width:0,height:1,focusable:2})}}function at(e,t,n){const l=e.slice();return l[4]=t[n],l}function ut(e){let t,n,l,i,s=e[4].name+"",o,c,r,f,d;n=new ln({props:{name:e[4].name}});function a(){return e[3](e[4])}return{c(){t=y("div"),Y(n.$$.fragment),l=W(),i=y("div"),o=de(s),c=W(),m(i,"class","List-Item-Text mfe-ml-1"),m(t,"class","List-Item mfe-flex mfe-items-center mfe-text-sm mfe-top-2 mfe-mb-1")},m(h,u){P(h,t,u),z(n,t,null),g(t,l),g(t,i),g(i,o),g(t,c),r=!0,f||(d=K(t,"click",a),f=!0)},p(h,u){e=h;const p={};u&1&&(p.name=e[4].name),n.$set(p),(!r||u&1)&&s!==(s=e[4].name+"")&&Fe(o,s)},i(h){r||(_(n.$$.fragment,h),r=!0)},o(h){C(n.$$.fragment,h),r=!1},d(h){h&&M(t),q(n),f=!1,d()}}}function on(e){let t,n,l=e[0],i=[];for(let o=0;o<l.length;o+=1)i[o]=ut(at(e,l,o));const s=o=>C(i[o],1,1,()=>{i[o]=null});return{c(){t=y("div");for(let o=0;o<i.length;o+=1)i[o].c();m(t,"class","List-Items-Group mfe-flex mfe-flex-col mfe-ml-4")},m(o,c){P(o,t,c);for(let r=0;r<i.length;r+=1)i[r].m(t,null);n=!0},p(o,[c]){if(c&3){l=o[0];let r;for(r=0;r<l.length;r+=1){const f=at(o,l,r);i[r]?(i[r].p(f,c),_(i[r],1)):(i[r]=ut(f),i[r].c(),_(i[r],1),i[r].m(t,null))}for(Z(),r=l.length;r<i.length;r+=1)s(r);G()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)_(i[c]);n=!0}},o(o){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)C(i[c]);n=!1},d(o){o&&M(t),_e(i,o)}}}function rn(e,t,n){let{items:l=[]}=t,{clickItem:i}=t;function s(c){n(2,i=c)}const o=c=>s(c);return e.$$set=c=>{"items"in c&&n(0,l=c.items),"clickItem"in c&&n(2,i=c.clickItem)},[l,s,i,o]}class dt extends ${constructor(t){super(),x(this,t,rn,on,X,{items:0,clickItem:2})}}var Re;(e=>{function t(i){const s={};for(const o of i)try{const c=localStorage.getItem(o);if(c!==null){const r=JSON.parse(c);s[o]=r}}catch(c){console.error("Get storage failed in ",o,c)}return s}e.get=t;function n(i){for(const s in i)try{const o=JSON.stringify(i[s]);localStorage.setItem(s,o)}catch(o){console.error("Save storage failed in ",s,o)}}e.set=n;function l(i){for(const s of i)try{localStorage.removeItem(s)}catch(o){console.error("Remove storage failed in ",s,o)}}e.remove=l})(Re||(Re={}));const Ge=(e,t)=>{const n=[],l=t;i(e,app);function i(s,o){const c=o.vault.getAbstractFileByPath(s);if(c instanceof L.TFolder&&c.children)for(const r of c.children)r instanceof L.TFile&&n.push(r),r instanceof L.TFolder&&l&&i(r.path,o)}return n.sort(un(Dt())),n},be=(e,t)=>{const n={id:e.path,name:e.name,checked:!1,children:[],selected:t?t.path:""};function l(i,s){if(!!(i&&i.children)){for(const o of i.children)if(o instanceof L.TFolder){const c=o,r={id:c.path,name:c.name,checked:!1,children:[],selected:t?t.path:""};s.children.push(r),c.children&&l(c,r)}}}return l(e,n),n},He=(e,t)=>{const n={folder:e,children:[],selected:t};function l(i,s){if(!!(i&&i.children)){for(const o of i.children)if(o instanceof L.TFolder){const c=o,r={folder:c,children:[],selected:t};s.children.push(r),c.children&&l(c,r)}}}return l(e,n),n},cn=(e,t)=>{const n=e.target;!e.ctrlKey&&!e.metaKey||app.workspace.trigger("hover-link",{event:e,source:"multi-file-explorer-view",hoverParent:n.parentElement,targetEl:n,linktext:t.name,sourcePath:t.path})},sn=(e,t)=>{},Vt=(e,t)=>{let n;e instanceof L.TFile?(n=new L.Menu().addSections(["title","open","action","view","info","","danger"]),n.addItem(l=>l.setTitle("Delete").setIcon("trash").onClick(()=>{app.fileManager.promptForFileDeletion(e)}))):e instanceof L.TFolder&&(n=new L.Menu().addSections(["action","view","info","","danger"]),n.addItem(l=>{l.setSection("action").setTitle("Create New Note").setIcon("create-new").onClick(()=>{var i;(i=ht())==null||i.createAbstractFile("file",e,!1)})}).addItem(l=>{l.setSection("action").setTitle("Create New Folder").setIcon("folder").onClick(()=>{var i;(i=ht())==null||i.createAbstractFile("folder",e,!1)})}).addItem(l=>{l.setSection("action").setTitle("Rename Folder").setIcon("pencil").onClick(()=>{app.fileManager.promptForFileRename(e)})}).addItem(l=>{l.setSection("action").setTitle("Set Attachment Folder").setIcon("image-file").onClick(()=>{app.setAttachmentFolder(e)})}).addSeparator().addItem(l=>{l.setSection("danger").setTitle("Delete Folder").setIcon("trash").onClick(()=>{app.fileManager.promptForFolderDeletion(e)})})),app.workspace.trigger("file-menu",n,e,"multi-file-explorer-context-menu",null),n==null||n.showAtMouseEvent(t)},Dt=()=>{var e;return(e=Re.get(["sortAction"]).sortAction)!=null?e:"alphabetical"},fn=e=>{Re.set({sortAction:e})},ht=()=>{if(app.internalPlugins.plugins["file-explorer"].enabled)return app.workspace.getLeavesOfType("file-explorer")[0].view},an=new Intl.Collator(void 0,{usage:"sort",sensitivity:"base",numeric:!0}).compare,Ce={alphabetical:function(e,t){return an(e.basename,t.basename)},alphabeticalReverse:function(e,t){return-Ce.alphabetical(e,t)},byModifiedTime:function(e,t){return t.stat.mtime-e.stat.mtime},byModifiedTimeReverse:function(e,t){return-Ce.byModifiedTime(e,t)},byCreatedTime:function(e,t){return t.stat.ctime-e.stat.ctime},byCreatedTimeReverse:function(e,t){return-Ce.byCreatedTime(e,t)}},un=e=>(Ce.hasOwnProperty(e)||(e="alphabetical"),Ce[e]);function mt(e,t,n){const l=e.slice();return l[18]=t[n],l[19]=t,l[20]=n,l}function pt(e){var k;let t,n,l,i,s,o=((k=e[0])==null?void 0:k.name)+"",c,r,f,d,a,h,u,p=e[0].children.length>0&&gt(e),v=e[4]&&_t(e),F=e[9]&&Ft(e);return{c(){t=y("div"),n=y("div"),p&&p.c(),l=W(),v&&v.c(),i=W(),s=y("div"),c=de(o),f=W(),F&&F.c(),m(s,"class","mfe-line-clamp-1"),m(n,"class",r="TreeNode "+(e[0].children.length===0?"No-Children":"Has-Children")+" svelte-x246im"),m(t,"class",d="Folder "+(e[8]!==null&&e[8]!==void 0?"Has-Parent":"No-Parent")+" "+(e[0].id===e[1]?"Selected mfe-rounded-lg":"")+" mfe-text-sm svelte-x246im")},m(w,E){P(w,t,E),g(t,n),p&&p.m(n,null),g(n,l),v&&v.m(n,null),g(n,i),g(n,s),g(s,c),g(t,f),F&&F.m(t,null),a=!0,h||(u=[K(s,"click",e[11]),K(n,"contextmenu",Bt(e[13]))],h=!0)},p(w,E){var O;w[0].children.length>0?p?p.p(w,E):(p=gt(w),p.c(),p.m(n,l)):p&&(p.d(1),p=null),w[4]?v?v.p(w,E):(v=_t(w),v.c(),v.m(n,i)):v&&(v.d(1),v=null),(!a||E&1)&&o!==(o=((O=w[0])==null?void 0:O.name)+"")&&Fe(c,o),(!a||E&1&&r!==(r="TreeNode "+(w[0].children.length===0?"No-Children":"Has-Children")+" svelte-x246im"))&&m(n,"class",r),w[9]?F?(F.p(w,E),E&512&&_(F,1)):(F=Ft(w),F.c(),_(F,1),F.m(t,null)):F&&(Z(),C(F,1,1,()=>{F=null}),G()),(!a||E&259&&d!==(d="Folder "+(w[8]!==null&&w[8]!==void 0?"Has-Parent":"No-Parent")+" "+(w[0].id===w[1]?"Selected mfe-rounded-lg":"")+" mfe-text-sm svelte-x246im"))&&m(t,"class",d)},i(w){a||(_(F),a=!0)},o(w){C(F),a=!1},d(w){w&&M(t),p&&p.d(),v&&v.d(),F&&F.d(),h=!1,ue(u)}}}function gt(e){let t;function n(s,o){return s[9]?hn:dn}let l=n(e),i=l(e);return{c(){i.c(),t=ce()},m(s,o){i.m(s,o),P(s,t,o)},p(s,o){l===(l=n(s))&&i?i.p(s,o):(i.d(1),i=l(s),i&&(i.c(),i.m(t.parentNode,t)))},d(s){i.d(s),s&&M(t)}}}function dn(e){let t,n,l,i;return{c(){t=Te("svg"),n=Te("path"),m(n,"fill-rule","evenodd"),m(n,"d","M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"),m(n,"clip-rule","evenodd"),m(t,"data-testid","caret-up-node"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"class","collapsed-icon cursor-pointer svelte-x246im"),m(t,"viewBox","0 0 20 20"),m(t,"fill","currentColor")},m(s,o){P(s,t,o),g(t,n),l||(i=K(t,"click",e[10]),l=!0)},p:H,d(s){s&&M(t),l=!1,i()}}}function hn(e){let t,n,l,i;return{c(){t=Te("svg"),n=Te("path"),m(n,"fill-rule","evenodd"),m(n,"d","M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"),m(n,"clip-rule","evenodd"),m(t,"data-testid","caret-down-node"),m(t,"xmlns","http://www.w3.org/2000/svg"),m(t,"class","collapsed-icon cursor-pointer svelte-x246im"),m(t,"viewBox","0 0 20 20"),m(t,"fill","currentColor")},m(s,o){P(s,t,o),g(t,n),l||(i=K(t,"click",e[10]),l=!0)},p:H,d(s){s&&M(t),l=!1,i()}}}function _t(e){let t,n;return{c(){t=y("input"),m(t,"class","tree-checkbox"),m(t,"type","checkbox"),m(t,"data-testid","node-checkbox"),t.checked=n=e[0].checked},m(l,i){P(l,t,i)},p(l,i){i&1&&n!==(n=l[0].checked)&&(t.checked=n)},d(l){l&&M(t)}}}function Ft(e){let t,n,l,i=e[0].children,s=[];for(let c=0;c<i.length;c+=1)s[c]=vt(mt(e,i,c));const o=c=>C(s[c],1,1,()=>{s[c]=null});return{c(){t=y("div");for(let c=0;c<s.length;c+=1)s[c].c();m(t,"class",n=ft(e[0].children.length===0?"Open-Children-Node":"")+" svelte-x246im")},m(c,r){P(c,t,r);for(let f=0;f<s.length;f+=1)s[f].m(t,null);l=!0},p(c,r){if(r&255){i=c[0].children;let f;for(f=0;f<i.length;f+=1){const d=mt(c,i,f);s[f]?(s[f].p(d,r),_(s[f],1)):(s[f]=vt(d),s[f].c(),_(s[f],1),s[f].m(t,null))}for(Z(),f=i.length;f<s.length;f+=1)o(f);G()}(!l||r&1&&n!==(n=ft(c[0].children.length===0?"Open-Children-Node":"")+" svelte-x246im"))&&m(t,"class",n)},i(c){if(!l){for(let r=0;r<i.length;r+=1)_(s[r]);l=!0}},o(c){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)C(s[r]);l=!1},d(c){c&&M(t),_e(s,c)}}}function vt(e){let t,n,l,i,s;function o(d){e[14](d,e[18],e[19],e[20])}function c(d){e[15](d)}function r(d){e[16](d)}let f={collapse:e[2],onClick:e[3],checkbox:e[4],selectAll:e[5],connectedWithParent:e[6],connectedWithChildren:e[7]};return e[18]!==void 0&&(f.node=e[18]),e[0]!==void 0&&(f.parent=e[0]),e[1]!==void 0&&(f.selectedFolder=e[1]),t=new qt({props:f}),D.push(()=>re(t,"node",o)),D.push(()=>re(t,"parent",c)),D.push(()=>re(t,"selectedFolder",r)),{c(){Y(t.$$.fragment)},m(d,a){z(t,d,a),s=!0},p(d,a){e=d;const h={};a&4&&(h.collapse=e[2]),a&8&&(h.onClick=e[3]),a&16&&(h.checkbox=e[4]),a&32&&(h.selectAll=e[5]),a&64&&(h.connectedWithParent=e[6]),a&128&&(h.connectedWithChildren=e[7]),!n&&a&1&&(n=!0,h.node=e[18],oe(()=>n=!1)),!l&&a&1&&(l=!0,h.parent=e[0],oe(()=>l=!1)),!i&&a&2&&(i=!0,h.selectedFolder=e[1],oe(()=>i=!1)),t.$set(h)},i(d){s||(_(t.$$.fragment,d),s=!0)},o(d){C(t.$$.fragment,d),s=!1},d(d){q(t,d)}}}function mn(e){let t,n,l=e[0]&&pt(e);return{c(){l&&l.c(),t=ce()},m(i,s){l&&l.m(i,s),P(i,t,s),n=!0},p(i,[s]){i[0]?l?(l.p(i,s),s&1&&_(l,1)):(l=pt(i),l.c(),_(l,1),l.m(t.parentNode,t)):l&&(Z(),C(l,1,1,()=>{l=null}),G())},i(i){n||(_(l),n=!0)},o(i){C(l),n=!1},d(i){l&&l.d(i),i&&M(t)}}}function Ht(e){if(e.children.length>0){const t=e.children;for(let n=0,l=t.length;n<l;n++){const i=t[n];i.checked=e.checked,i.children.length>0&&Ht(i)}}}function zt(e){e.parent&&(e.parent.checked=e.checked,zt(e.parent))}function pn(e,t,n){let{node:l,collapse:i=!1,onClick:s=()=>{},checkbox:o=!0,selectAll:c=!1,selectedFolder:r,connectedWithParent:f=!1,connectedWithChildren:d=!1}=t,{parent:a}=t,h=i;function u(){n(9,h=!h)}function p(){u()}function v(){n(0,l.checked=!l.checked,l),d&&Ht(l),a&&f&&zt(l),s&&s(l)}const F=(S,V)=>{if((V==null?void 0:V.id)!==void 0){const U=app.vault.getAbstractFileByPath(V.id);if(!(U instanceof L.TAbstractFile))return;Vt(U,S)}};Ue(()=>{l&&n(0,l.parent=a,l),c&&n(0,l.checked=!0,l)});const k=S=>F(S,l);function w(S,V,U,I){U[I]=S,n(0,l)}function E(S){l=S,n(0,l)}function O(S){r=S,n(1,r)}return e.$$set=S=>{"node"in S&&n(0,l=S.node),"collapse"in S&&n(2,i=S.collapse),"onClick"in S&&n(3,s=S.onClick),"checkbox"in S&&n(4,o=S.checkbox),"selectAll"in S&&n(5,c=S.selectAll),"selectedFolder"in S&&n(1,r=S.selectedFolder),"connectedWithParent"in S&&n(6,f=S.connectedWithParent),"connectedWithChildren"in S&&n(7,d=S.connectedWithChildren),"parent"in S&&n(8,a=S.parent)},[l,r,i,s,o,c,f,d,a,h,p,v,F,k,w,E,O]}class qt extends ${constructor(t){super(),x(this,t,pn,mn,X,{node:0,collapse:2,onClick:3,checkbox:4,selectAll:5,selectedFolder:1,connectedWithParent:6,connectedWithChildren:7,parent:8})}}function bt(e,t,n){const l=e.slice();return l[10]=t[n],l[11]=t,l[12]=n,l}function gn(e){let t;return{c(){t=y("p"),t.textContent="An error occured during rendering!"},m(n,l){P(n,t,l)},p:H,i:H,o:H,d(n){n&&M(t)}}}function _n(e){let t,n,l=e[0],i=[];for(let o=0;o<l.length;o+=1)i[o]=kt(bt(e,l,o));const s=o=>C(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=ce()},m(o,c){for(let r=0;r<i.length;r+=1)i[r].m(o,c);P(o,t,c),n=!0},p(o,c){if(c&255){l=o[0];let r;for(r=0;r<l.length;r+=1){const f=bt(o,l,r);i[r]?(i[r].p(f,c),_(i[r],1)):(i[r]=kt(f),i[r].c(),_(i[r],1),i[r].m(t.parentNode,t))}for(Z(),r=l.length;r<i.length;r+=1)s(r);G()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)_(i[c]);n=!0}},o(o){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)C(i[c]);n=!1},d(o){_e(i,o),o&&M(t)}}}function kt(e){let t,n,l,i;function s(r){e[8](r,e[10],e[11],e[12])}function o(r){e[9](r)}let c={parent:e[10].parent,collapse:e[2],onClick:e[3],checkbox:e[4],selectAll:e[5],connectedWithParent:e[6],connectedWithChildren:e[7]};return e[10]!==void 0&&(c.node=e[10]),e[1]!==void 0&&(c.selectedFolder=e[1]),t=new qt({props:c}),D.push(()=>re(t,"node",s)),D.push(()=>re(t,"selectedFolder",o)),{c(){Y(t.$$.fragment)},m(r,f){z(t,r,f),i=!0},p(r,f){e=r;const d={};f&1&&(d.parent=e[10].parent),f&4&&(d.collapse=e[2]),f&8&&(d.onClick=e[3]),f&16&&(d.checkbox=e[4]),f&32&&(d.selectAll=e[5]),f&64&&(d.connectedWithParent=e[6]),f&128&&(d.connectedWithChildren=e[7]),!n&&f&1&&(n=!0,d.node=e[10],oe(()=>n=!1)),!l&&f&2&&(l=!0,d.selectedFolder=e[1],oe(()=>l=!1)),t.$set(d)},i(r){i||(_(t.$$.fragment,r),i=!0)},o(r){C(t.$$.fragment,r),i=!1},d(r){q(t,r)}}}function Fn(e){let t,n,l,i;const s=[_n,gn],o=[];function c(r,f){return r[0]&&r[0].length>0?0:1}return t=c(e),n=o[t]=s[t](e),{c(){n.c(),l=ce()},m(r,f){o[t].m(r,f),P(r,l,f),i=!0},p(r,[f]){let d=t;t=c(r),t===d?o[t].p(r,f):(Z(),C(o[d],1,1,()=>{o[d]=null}),G(),n=o[t],n?n.p(r,f):(n=o[t]=s[t](r),n.c()),_(n,1),n.m(l.parentNode,l))},i(r){i||(_(n),i=!0)},o(r){C(n),i=!1},d(r){o[t].d(r),r&&M(l)}}}function vn(e,t,n){let{data:l=[],collapse:i=!1,onClick:s=()=>{},checkbox:o=!0,selectAll:c=!1,connectedWithParent:r=!1,connectedWithChildren:f=!1,selectedFolder:d=""}=t;function a(u,p,v,F){v[F]=u,n(0,l)}function h(u){d=u,n(1,d)}return e.$$set=u=>{"data"in u&&n(0,l=u.data),"collapse"in u&&n(2,i=u.collapse),"onClick"in u&&n(3,s=u.onClick),"checkbox"in u&&n(4,o=u.checkbox),"selectAll"in u&&n(5,c=u.selectAll),"connectedWithParent"in u&&n(6,r=u.connectedWithParent),"connectedWithChildren"in u&&n(7,f=u.connectedWithChildren),"selectedFolder"in u&&n(1,d=u.selectedFolder)},[l,d,i,s,o,c,r,f,a,h]}class bn extends ${constructor(t){super(),x(this,t,vn,Fn,X,{data:0,collapse:2,onClick:3,checkbox:4,selectAll:5,connectedWithParent:6,connectedWithChildren:7,selectedFolder:1})}}function kn(e){let t;return{c(){t=y("p"),t.textContent="An error occured during rendering!"},m(n,l){P(n,t,l)},p:H,i:H,o:H,d(n){n&&M(t)}}}function wn(e){let t,n;return t=new bn({props:{data:e[4],collapse:e[1],onClick:e[5],checkbox:e[0],selectAll:e[6],selectedFolder:e[7],connectedWithParent:e[3],connectedWithChildren:e[2]}}),{c(){Y(t.$$.fragment)},m(l,i){z(t,l,i),n=!0},p(l,i){const s={};i&16&&(s.data=l[4]),i&2&&(s.collapse=l[1]),i&32&&(s.onClick=l[5]),i&1&&(s.checkbox=l[0]),i&64&&(s.selectAll=l[6]),i&128&&(s.selectedFolder=l[7]),i&8&&(s.connectedWithParent=l[3]),i&4&&(s.connectedWithChildren=l[2]),t.$set(s)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){q(t,l)}}}function Cn(e){let t,n,l,i;const s=[wn,kn],o=[];function c(r,f){return r[4]&&r[4].length>0?0:1}return t=c(e),n=o[t]=s[t](e),{c(){n.c(),l=ce()},m(r,f){o[t].m(r,f),P(r,l,f),i=!0},p(r,[f]){let d=t;t=c(r),t===d?o[t].p(r,f):(Z(),C(o[d],1,1,()=>{o[d]=null}),G(),n=o[t],n?n.p(r,f):(n=o[t]=s[t](r),n.c()),_(n,1),n.m(l.parentNode,l))},i(r){i||(_(n),i=!0)},o(r){C(n),i=!1},d(r){o[t].d(r),r&&M(l)}}}function Tn(e,t,n){let{checkbox:l=!0,collapse:i=!1,connectedWithChildren:s=!1,connectedWithParent:o=!1,data:c=[],onClick:r,selectAll:f=!1,selectedFolder:d=""}=t;return e.$$set=a=>{"checkbox"in a&&n(0,l=a.checkbox),"collapse"in a&&n(1,i=a.collapse),"connectedWithChildren"in a&&n(2,s=a.connectedWithChildren),"connectedWithParent"in a&&n(3,o=a.connectedWithParent),"data"in a&&n(4,c=a.data),"onClick"in a&&n(5,r=a.onClick),"selectAll"in a&&n(6,f=a.selectAll),"selectedFolder"in a&&n(7,d=a.selectedFolder)},[l,i,s,o,c,r,f,d]}class yn extends ${constructor(t){super(),x(this,t,Tn,Cn,X,{checkbox:0,collapse:1,connectedWithChildren:2,connectedWithParent:3,data:4,onClick:5,selectAll:6,selectedFolder:7})}}function Sn(e){let t;return{c(){t=y("div"),m(t,"class",e[0])},m(n,l){P(n,t,l),e[4](t)},p(n,[l]){l&1&&m(t,"class",n[0])},i:H,o:H,d(n){n&&M(t),e[4](null)}}}function In(e,t,n){let{renderFile:l}=t,{className:i}=t,s="",o="",c;function r(){var a,h,u;return We(this,void 0,void 0,function*(){const p=app.metadataCache.getFileCache(l);if(((a=p==null?void 0:p.frontmatter)===null||a===void 0?void 0:a["excalidraw-plugin"])!==void 0){n(3,s="Nothing To Render");return}const v=(h=app.metadataCache.getFileCache(l))===null||h===void 0?void 0:h.sections;if(o=yield app.vault.cachedRead(l),(v==null?void 0:v.length)===0){n(3,s=o.slice(0,40)+"...");return}const F=v==null?void 0:v.find(w=>w.type==="paragraph"||w.type==="list");if(F===void 0){n(3,s="Nothing to render");return}const k=o.split(`
`);switch(F.type){case"list":k[F.position.start.line].length<40&&k[F.position.start.line].length>10?n(3,s=k[F.position.start.line]):k[F.position.start.line].length>40?n(3,s=k[F.position.start.line].slice(0,40)+"..."):n(3,s=k[F.position.start.line]+`
`+k[F.position.start.line+1]);break;case"paragraph":n(3,s=((u=k[F.position.start.line])===null||u===void 0?void 0:u.slice(0,40))+"...");break}})}function f(){return We(this,void 0,void 0,function*(){if(c!==void 0){for(;c!=null&&c.firstChild;)c.removeChild(c.firstChild);yield L.MarkdownRenderer.renderMarkdown(s,c,l.path,c)}})}Ue(()=>We(void 0,void 0,void 0,function*(){yield r()}));function d(a){D[a?"unshift":"push"](()=>{c=a,n(1,c)})}return e.$$set=a=>{"renderFile"in a&&n(2,l=a.renderFile),"className"in a&&n(0,i=a.className)},e.$$.update=()=>{e.$$.dirty&4&&l&&r(),e.$$.dirty&8&&s&&f()},[i,c,l,s,d]}class En extends ${constructor(t){super(),x(this,t,In,Sn,X,{renderFile:2,className:0})}}function Nn(e){let t,n,l,i,s;return{c(){t=y("div"),n=y("img"),m(n,"class","mfe-object-contain"),ct(n.src,l=e[1].path)||m(n,"src",l),m(n,"alt",i=e[1].altText),m(n,"decoding","async"),m(n,"loading","lazy"),m(t,"class",s=e[0]+" File-Image-Container")},m(o,c){P(o,t,c),g(t,n)},p(o,[c]){c&2&&!ct(n.src,l=o[1].path)&&m(n,"src",l),c&2&&i!==(i=o[1].altText)&&m(n,"alt",i),c&1&&s!==(s=o[0]+" File-Image-Container")&&m(t,"class",s)},i:H,o:H,d(o){o&&M(t)}}}function An(e,t,n){let{renderFile:l}=t,{className:i}=t,s;const o=c=>app.vault.getResourcePath(c);return s={linkText:l.name,altText:l.basename,path:o(l),filepath:l.path},e.$$set=c=>{"renderFile"in c&&n(2,l=c.renderFile),"className"in c&&n(0,i=c.className)},[i,s,l]}class Mn extends ${constructor(t){super(),x(this,t,An,Nn,X,{renderFile:2,className:0})}}function wt(e,t,n){const l=e.slice();return l[9]=t[n],l}function Pn(e){let t,n;return t=new Mn({props:{className:(e[1]==="TOP"?"Top-Folder-File-Content Top-Folder-Image mfe-pt-4":"Sub-File-Content Sub-Folder-Image mfe-pt-4")+" mfe-overflow-hidden mfe-h-16",renderFile:e[9]}}),{c(){Y(t.$$.fragment)},m(l,i){z(t,l,i),n=!0},p(l,i){const s={};i&2&&(s.className=(l[1]==="TOP"?"Top-Folder-File-Content Top-Folder-Image mfe-pt-4":"Sub-File-Content Sub-Folder-Image mfe-pt-4")+" mfe-overflow-hidden mfe-h-16"),i&1&&(s.renderFile=l[9]),t.$set(s)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){q(t,l)}}}function Ln(e){let t,n;return t=new En({props:{className:(e[1]==="TOP"?"Top-Folder-File-Content mfe-pt-4":"Sub-File-Content mfe-pt-4")+" mfe-line-clamp-3 mfe-text-ellipsis mfe-overflow-hidden mfe-whitespace-normal",renderFile:e[9]}}),{c(){Y(t.$$.fragment)},m(l,i){z(t,l,i),n=!0},p(l,i){const s={};i&2&&(s.className=(l[1]==="TOP"?"Top-Folder-File-Content mfe-pt-4":"Sub-File-Content mfe-pt-4")+" mfe-line-clamp-3 mfe-text-ellipsis mfe-overflow-hidden mfe-whitespace-normal"),i&1&&(s.renderFile=l[9]),t.$set(s)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){q(t,l)}}}function Ct(e){let t,n,l,i=e[9].basename+"",s,o,c,r,f,d,a,h,u,p,v,F;const k=[Ln,Pn],w=[];function E(I,b){return I[9].extension==="md"?0:1}r=E(e),f=w[r]=k[r](e);function O(){return e[5](e[9])}function S(...I){return e[6](e[9],...I)}function V(...I){return e[7](e[9],...I)}function U(...I){return e[8](e[9],...I)}return{c(){var I;t=y("div"),n=y("div"),l=y("div"),s=de(i),c=W(),f.c(),a=W(),m(l,"class",o=(e[1]==="TOP"?"Top-Folder-File-Name":"Sub-File-Name")+" mfe-font-bold mfe-text-sm"),m(n,"class",d="File-Item "+(((I=e[2])==null?void 0:I.path)===e[9].path?"Item-Highlight mfe-rounded-lg mfe-ml-2 mfe-mr-1 mfe-p-4":"mfe-ml-2 mfe-mr-1 mfe-p-4")+" mfe-max-h-36 mfe-overflow-hidden mfe-min-h-32 svelte-e3uau2"),m(t,"class",h=(e[1]==="TOP"?"Top-Folder-File-item-Container":"Sub-File-Item-Container")+" mfe-min-h-32"),m(t,"data-type",u=e[9].name)},m(I,b){P(I,t,b),g(t,n),g(n,l),g(l,s),g(n,c),w[r].m(n,null),g(t,a),p=!0,v||(F=[K(t,"click",O),K(t,"mouseover",S),K(t,"focus",V),K(t,"contextmenu",Bt(U))],v=!0)},p(I,b){var Q;e=I,(!p||b&1)&&i!==(i=e[9].basename+"")&&Fe(s,i),(!p||b&2&&o!==(o=(e[1]==="TOP"?"Top-Folder-File-Name":"Sub-File-Name")+" mfe-font-bold mfe-text-sm"))&&m(l,"class",o);let R=r;r=E(e),r===R?w[r].p(e,b):(Z(),C(w[R],1,1,()=>{w[R]=null}),G(),f=w[r],f?f.p(e,b):(f=w[r]=k[r](e),f.c()),_(f,1),f.m(n,null)),(!p||b&5&&d!==(d="File-Item "+(((Q=e[2])==null?void 0:Q.path)===e[9].path?"Item-Highlight mfe-rounded-lg mfe-ml-2 mfe-mr-1 mfe-p-4":"mfe-ml-2 mfe-mr-1 mfe-p-4")+" mfe-max-h-36 mfe-overflow-hidden mfe-min-h-32 svelte-e3uau2"))&&m(n,"class",d),(!p||b&2&&h!==(h=(e[1]==="TOP"?"Top-Folder-File-item-Container":"Sub-File-Item-Container")+" mfe-min-h-32"))&&m(t,"class",h),(!p||b&1&&u!==(u=e[9].name))&&m(t,"data-type",u)},i(I){p||(_(f),p=!0)},o(I){C(f),p=!1},d(I){I&&M(t),w[r].d(),v=!1,ue(F)}}}function Wn(e){let t,n,l=e[0],i=[];for(let o=0;o<l.length;o+=1)i[o]=Ct(wt(e,l,o));const s=o=>C(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=ce()},m(o,c){for(let r=0;r<i.length;r+=1)i[r].m(o,c);P(o,t,c),n=!0},p(o,[c]){if(c&31){l=o[0];let r;for(r=0;r<l.length;r+=1){const f=wt(o,l,r);i[r]?(i[r].p(f,c),_(i[r],1)):(i[r]=Ct(f),i[r].c(),_(i[r],1),i[r].m(t.parentNode,t))}for(Z(),r=l.length;r<i.length;r+=1)s(r);G()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)_(i[c]);n=!0}},o(o){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)C(i[c]);n=!1},d(o){_e(i,o),o&&M(t)}}}function Bn(e,t,n){let{fileList:l}=t,{className:i}=t,{current:s}=t;const o=h=>{app.workspace.openLinkText(h.path,h.path,!1)},c=(h,u)=>{Vt(u,h)},r=h=>o(h),f=(h,u)=>cn(u,h),d=(h,u)=>sn(),a=(h,u)=>c(u,h);return e.$$set=h=>{"fileList"in h&&n(0,l=h.fileList),"className"in h&&n(1,i=h.className),"current"in h&&n(2,s=h.current)},[l,i,s,o,c,r,f,d,a]}class Zt extends ${constructor(t){super(),x(this,t,Bn,Wn,X,{fileList:0,className:1,current:2})}}function On(e){let t,n;return t=new Zt({props:{fileList:e[1],className:"TOP",current:e[0]}}),{c(){Y(t.$$.fragment)},m(l,i){z(t,l,i),n=!0},p(l,[i]){const s={};i&2&&(s.fileList=l[1]),i&1&&(s.current=l[0]),t.$set(s)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){q(t,l)}}}function Rn(e,t,n){let{selectedNode:l}=t,{folderChangeStatus:i}=t,{currentFile:s}=t,o=[];return e.$$set=c=>{"selectedNode"in c&&n(2,l=c.selectedNode),"folderChangeStatus"in c&&n(3,i=c.folderChangeStatus),"currentFile"in c&&n(0,s=c.currentFile)},e.$$.update=()=>{e.$$.dirty&12&&(l||i)&&n(1,o=Ge(l))},[s,o,l,i]}class jn extends ${constructor(t){super(),x(this,t,Rn,On,X,{selectedNode:2,folderChangeStatus:3,currentFile:0})}}function Tt(e,t,n){const l=e.slice();return l[8]=t[n],l}function yt(e){let t,n;return t=new Zt({props:{fileList:e[4],className:"SUB",current:e[3]}}),{c(){Y(t.$$.fragment)},m(l,i){z(t,l,i),n=!0},p(l,i){const s={};i&16&&(s.fileList=l[4]),i&8&&(s.current=l[3]),t.$set(s)},i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){C(t.$$.fragment,l),n=!1},d(l){q(t,l)}}}function St(e){let t,n,l=e[1],i=[];for(let o=0;o<l.length;o+=1)i[o]=It(Tt(e,l,o));const s=o=>C(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=ce()},m(o,c){for(let r=0;r<i.length;r+=1)i[r].m(o,c);P(o,t,c),n=!0},p(o,c){if(c&6){l=o[1];let r;for(r=0;r<l.length;r+=1){const f=Tt(o,l,r);i[r]?(i[r].p(f,c),_(i[r],1)):(i[r]=It(f),i[r].c(),_(i[r],1),i[r].m(t.parentNode,t))}for(Z(),r=l.length;r<i.length;r+=1)s(r);G()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)_(i[c]);n=!0}},o(o){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)C(i[c]);n=!1},d(o){_e(i,o),o&&M(t)}}}function It(e){let t,n;const l=[e[8],{indent:e[2]+1}];let i={};for(let s=0;s<l.length;s+=1)i=Oe(i,l[s]);return t=new Gt({props:i}),{c(){Y(t.$$.fragment)},m(s,o){z(t,s,o),n=!0},p(s,o){const c=o&6?Rt(l,[o&2&&jt(s[8]),o&4&&{indent:s[2]+1}]):{};t.$set(c)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){C(t.$$.fragment,s),n=!1},d(s){q(t,s)}}}function Vn(e){let t,n,l=e[0].name+"",i,s,o,c,r,f,d,a,h=e[5]&&yt(e),u=e[5]&&St(e);return{c(){t=y("div"),n=y("div"),i=de(l),s=W(),h&&h.c(),c=W(),u&&u.c(),r=ce(),m(n,"class","Sub-Folder-Text mfe-text-xl svelte-kgvsxx"),m(t,"class",o="Sub-Folder-Level-"+e[2]+" mfe-flex mfe-flex-col svelte-kgvsxx")},m(p,v){P(p,t,v),g(t,n),g(n,i),g(t,s),h&&h.m(t,null),P(p,c,v),u&&u.m(p,v),P(p,r,v),f=!0,d||(a=K(n,"click",e[6]),d=!0)},p(p,[v]){(!f||v&1)&&l!==(l=p[0].name+"")&&Fe(i,l),p[5]?h?(h.p(p,v),v&32&&_(h,1)):(h=yt(p),h.c(),_(h,1),h.m(t,null)):h&&(Z(),C(h,1,1,()=>{h=null}),G()),(!f||v&4&&o!==(o="Sub-Folder-Level-"+p[2]+" mfe-flex mfe-flex-col svelte-kgvsxx"))&&m(t,"class",o),p[5]?u?(u.p(p,v),v&32&&_(u,1)):(u=St(p),u.c(),_(u,1),u.m(r.parentNode,r)):u&&(Z(),C(u,1,1,()=>{u=null}),G())},i(p){f||(_(h),_(u),f=!0)},o(p){C(h),C(u),f=!1},d(p){p&&M(t),h&&h.d(),p&&M(c),u&&u.d(p),p&&M(r),d=!1,a()}}}function Dn(e,t,n){let{folder:l}=t,{changeFolderPath:i=""}=t,{children:s=[]}=t,{indent:o=0}=t,c=[],{currentFile:r}=t,f=!0;const d=()=>{n(5,f=!f)};return e.$$set=a=>{"folder"in a&&n(0,l=a.folder),"changeFolderPath"in a&&n(7,i=a.changeFolderPath),"children"in a&&n(1,s=a.children),"indent"in a&&n(2,o=a.indent),"currentFile"in a&&n(3,r=a.currentFile)},e.$$.update=()=>{e.$$.dirty&129&&i&&n(4,c=Ge(l.path)),e.$$.dirty&1&&l&&n(4,c=Ge(l.path))},[l,s,o,r,c,f,d,i]}class Gt extends ${constructor(t){super(),x(this,t,Dn,Vn,X,{folder:0,changeFolderPath:7,children:1,indent:2,currentFile:3})}}const Hn={},zn={},qn={},Zn={},Ut={alphabetical:"File Name (A to Z)",alphabeticalReverse:"File Name (Z to A)",byModifiedTime:"Modified Time (New to Old)",byModifiedTimeReverse:"Modified Time (Old to New)",byCreatedTime:"Created Time (New to Old)",byCreatedTimeReverse:"Created Time (Old to New)"},Gn={},Un={},Jn={},Kn={},Yn={},Qn={},Xn={},xn={},$n={},el={},tl={},nl={},ll={},il={},ol={},rl={},cl={alphabetical:"\u6587\u4EF6\u540D\uFF08A-Z\uFF09",alphabeticalReverse:"\u6587\u4EF6\u540D\uFF08Z-A\uFF09",byModifiedTime:"\u7F16\u8F91\u65F6\u95F4\uFF08\u4ECE\u65B0\u5230\u65E7\uFF09",byModifiedTimeReverse:"\u7F16\u8F91\u65F6\u95F4\uFF08\u4ECE\u65E7\u5230\u65B0\uFF09",byCreatedTime:"\u521B\u5EFA\u65F6\u95F4\uFF08\u4ECE\u65B0\u5230\u65E7\uFF09",byCreatedTimeReverse:"\u521B\u5EFA\u65F6\u95F4\uFF08\u4ECE\u65E7\u5230\u65B0\uFF09"},sl={},fl={ar:Hn,cs:zn,da:qn,de:Zn,en:Ut,"en-gb":Gn,es:Un,fr:Jn,hi:Kn,id:Yn,it:Qn,ja:Xn,ko:xn,nl:$n,nn:el,pl:tl,pt:nl,"pt-br":ll,ro:il,ru:ol,tr:rl,"zh-cn":cl,"zh-tw":sl},Et=fl[L.moment.locale()];function al(e){return Et&&Et[e]||Ut[e]}function Nt(e,t,n){const l=e.slice();return l[38]=t[n],l}function At(e){var i,s;let t,n=(e[3].id==="/"?"All":e[3].id?(i=e[3].id)==null?void 0:i.split("/").slice(-1):(s=e[9])==null?void 0:s.parent.path.split("/").slice(-1))+"",l;return{c(){t=y("div"),l=de(n),m(t,"class","Selected-Folder-Title-OnBar mfe-col-start-2 mfe-col-span-3 mfe-truncate mfe-text-ellipsis mfe-overflow-hidden mfe-text-center")},m(o,c){P(o,t,c),g(t,l)},p(o,c){var r,f;c[0]&520&&n!==(n=(o[3].id==="/"?"All":o[3].id?(r=o[3].id)==null?void 0:r.split("/").slice(-1):(f=o[9])==null?void 0:f.parent.path.split("/").slice(-1))+"")&&Fe(l,n)},d(o){o&&M(t)}}}function Mt(e){var w,E,O,S,V,U,I;let t,n,l=(e[3].id==="/"?"All":e[3].id?(w=e[3].id)==null?void 0:w.split("/").slice(-1):(E=e[9])==null?void 0:E.parent.path.split("/").slice(-1))+"",i,s,o,c,r,f,d,a,h,u,p;function v(b){e[32](b)}let F={selectedNode:e[3].id?e[3].id:(O=e[9])==null?void 0:O.parent.path,folderChangeStatus:e[4]};e[2].selected!==void 0&&(F.currentFile=e[2].selected),r=new jn({props:F}),D.push(()=>re(r,"currentFile",v));let k=(((V=(S=e[3])==null?void 0:S.children)==null?void 0:V.length)>0||((I=(U=e[6])==null?void 0:U.children)==null?void 0:I.length)>0)&&Pt(e);return{c(){t=y("div"),n=y("div"),i=de(l),s=W(),o=y("div"),c=y("div"),Y(r.$$.fragment),d=W(),k&&k.c(),m(n,"class","Selected-Folder-Title mfe-pl-7 mfe-pt-2 mfe-font-bold mfe-text-xl  svelte-tv1rem"),m(c,"class","Second-Level-Folder mfe-flex mfe-flex-col"),m(o,"class","Selected-Folder-Files mfe-pl-1.5 mfe-pt-3"),m(t,"class",a=(e[14]?"Second-Level-Folder-Files-Collapsed":"Second-Level-Folder-Files")+" mfe-overflow-y-scroll mfe-overflow-x-hidden svelte-tv1rem")},m(b,R){P(b,t,R),g(t,n),g(n,i),e[31](n),g(t,s),g(t,o),g(o,c),z(r,c,null),g(o,d),k&&k.m(o,null),h=!0,u||(p=K(t,"scroll",e[21]),u=!0)},p(b,R){var se,J,ee,he,te,me,le;(!h||R[0]&520)&&l!==(l=(b[3].id==="/"?"All":b[3].id?(se=b[3].id)==null?void 0:se.split("/").slice(-1):(J=b[9])==null?void 0:J.parent.path.split("/").slice(-1))+"")&&Fe(i,l);const Q={};R[0]&520&&(Q.selectedNode=b[3].id?b[3].id:(ee=b[9])==null?void 0:ee.parent.path),R[0]&16&&(Q.folderChangeStatus=b[4]),!f&&R[0]&4&&(f=!0,Q.currentFile=b[2].selected,oe(()=>f=!1)),r.$set(Q),((te=(he=b[3])==null?void 0:he.children)==null?void 0:te.length)>0||((le=(me=b[6])==null?void 0:me.children)==null?void 0:le.length)>0?k?(k.p(b,R),R[0]&72&&_(k,1)):(k=Pt(b),k.c(),_(k,1),k.m(o,null)):k&&(Z(),C(k,1,1,()=>{k=null}),G()),(!h||R[0]&16384&&a!==(a=(b[14]?"Second-Level-Folder-Files-Collapsed":"Second-Level-Folder-Files")+" mfe-overflow-y-scroll mfe-overflow-x-hidden svelte-tv1rem"))&&m(t,"class",a)},i(b){h||(_(r.$$.fragment,b),_(k),h=!0)},o(b){C(r.$$.fragment,b),C(k),h=!1},d(b){b&&M(t),e[31](null),q(r),k&&k.d(),u=!1,p()}}}function Pt(e){let t,n,l=e[2].children,i=[];for(let o=0;o<l.length;o+=1)i[o]=Lt(Nt(e,l,o));const s=o=>C(i[o],1,1,()=>{i[o]=null});return{c(){for(let o=0;o<i.length;o+=1)i[o].c();t=ce()},m(o,c){for(let r=0;r<i.length;r+=1)i[r].m(o,c);P(o,t,c),n=!0},p(o,c){if(c[0]&36){l=o[2].children;let r;for(r=0;r<l.length;r+=1){const f=Nt(o,l,r);i[r]?(i[r].p(f,c),_(i[r],1)):(i[r]=Lt(f),i[r].c(),_(i[r],1),i[r].m(t.parentNode,t))}for(Z(),r=l.length;r<i.length;r+=1)s(r);G()}},i(o){if(!n){for(let c=0;c<l.length;c+=1)_(i[c]);n=!0}},o(o){i=i.filter(Boolean);for(let c=0;c<i.length;c+=1)C(i[c]);n=!1},d(o){_e(i,o),o&&M(t)}}}function Lt(e){let t,n,l;const i=[e[38],{changeFolderPath:e[5]}];function s(c){e[33](c)}let o={};for(let c=0;c<i.length;c+=1)o=Oe(o,i[c]);return e[2].selected!==void 0&&(o.currentFile=e[2].selected),t=new Gt({props:o}),D.push(()=>re(t,"currentFile",s)),{c(){Y(t.$$.fragment)},m(c,r){z(t,c,r),l=!0},p(c,r){const f=r[0]&36?Rt(i,[r[0]&4&&jt(c[38]),r[0]&32&&{changeFolderPath:c[5]}]):{};!n&&r[0]&4&&(n=!0,f.currentFile=c[2].selected,oe(()=>n=!1)),t.$set(f)},i(c){l||(_(t.$$.fragment,c),l=!0)},o(c){C(t.$$.fragment,c),l=!1},d(c){q(t,c)}}}function ul(e){var ie,ae,Ne,Je,Ke,Ye,Qe;let t,n,l,i,s,o,c,r,f,d,a,h,u,p,v,F,k,w,E,O,S,V,U,I,b,R,Q,se,J,ee,he,te,me,le,Se,Ie,pe,ve,Ee;function je(N){e[25](N)}let T={items:e[15]};e[0]!==void 0&&(T.clickItem=e[0]),c=new dt({props:T}),D.push(()=>re(c,"clickItem",je)),p=new yn({props:{selectedFolder:(ie=e[1])==null?void 0:ie.selected,data:e[1].children,collapse:!0,checkbox:!1,onClick:e[19]}});function j(N){e[26](N)}let fe={items:e[16]};e[0]!==void 0&&(fe.clickItem=e[0]),O=new dt({props:fe}),D.push(()=>re(O,"clickItem",j));let B=e[7]&&At(e),A=(((ae=e[3])==null?void 0:ae.id)!==void 0&&((Ne=e[3])==null?void 0:Ne.id.length)>0||((Ke=(Je=e[9])==null?void 0:Je.parent)==null?void 0:Ke.path)!==void 0&&((Qe=(Ye=e[9])==null?void 0:Ye.parent)==null?void 0:Qe.path.length)>0)&&Mt(e);return{c(){t=y("div"),n=y("div"),l=y("div"),i=y("div"),i.textContent="Library",s=W(),o=y("div"),Y(c.$$.fragment),f=W(),d=y("div"),a=y("div"),a.textContent="Top Folder",h=W(),u=y("div"),Y(p.$$.fragment),v=W(),F=y("div"),k=y("div"),k.textContent="External Folder",w=W(),E=y("div"),Y(O.$$.fragment),U=W(),I=y("div"),b=y("div"),R=y("div"),Q=W(),B&&B.c(),se=W(),J=y("div"),ee=y("div"),he=W(),te=y("div"),me=W(),le=y("div"),Se=W(),A&&A.c(),Ie=W(),m(i,"class","Library-Text mfe-font-bold mfe-text-xs"),m(o,"class","Library-Items mfe-mt-2"),m(l,"class","Library-View mfe-ml-2 mfe-mt-4"),m(a,"class","Top-Folder-Text mfe-font-bold mfe-text-xs"),m(u,"class","Top-Folder-Tree mfe-mt-2 svelte-tv1rem"),m(d,"class","Folder-View mfe-ml-2 mfe-mt-4"),m(k,"class","External-Folder-Text mfe-font-bold mfe-text-xs"),m(E,"class","External-Folder-Items mfe-mt-2"),m(F,"class","External-Folder-View mfe-ml-2 mfe-mt-4"),m(n,"class",V="Top-Level-Folder mfe-z-20  mfe-h-full"+(e[14]?" mfe-hidden":" mfe-min-w-52 mfe-w-52 mfe-pl-2 mfe-pr-4")+" svelte-tv1rem"),m(R,"class","AddNew-Buttion mfe-col-start-1 mfe-ml-2 mfe-mt-1"),m(ee,"class","AddNew-Buttion mfe-ml-2 mfe-mt-1"),m(te,"class","Sort-Buttion mfe-ml-2 mfe-mt-1"),m(le,"class","Filter-Buttion mfe-ml-2 mfe-mt-1"),m(J,"class","Action-Button-List mfe-col-start-5 mfe-flex mfe-flex-row mfe-justify-end mfe-pr-3"),m(b,"class","Second-Level-Folder-Files-Title-Bar mfe-w-full mfe-pt-1.5 mfe-pb-1.5 mfe-items-center  mfe-grid mfe-grid-cols-5 mfe-border-b-[1px] mfe-border-t-0 mfe-border-x-0 mfe-border-solid svelte-tv1rem"),m(I,"class","Second-Level-Folder-Files-Container mfe-z-20  mfe-flex mfe-flex-col mfe-w-full mfe-min-w-64 mfe-overflow-hidden svelte-tv1rem"),m(t,"class","Multi-File-Explorer-Column mfe-h-full mfe-w-full mfe-flex mfe-flex-row mfe-overflow-y-hidden svelte-tv1rem")},m(N,ne){P(N,t,ne),g(t,n),g(n,l),g(l,i),g(l,s),g(l,o),z(c,o,null),g(n,f),g(n,d),g(d,a),g(d,h),g(d,u),z(p,u,null),g(n,v),g(n,F),g(F,k),g(F,w),g(F,E),z(O,E,null),g(t,U),g(t,I),g(I,b),g(b,R),e[27](R),g(b,Q),B&&B.m(b,null),g(b,se),g(b,J),g(J,ee),e[28](ee),g(J,he),g(J,te),e[29](te),g(J,me),g(J,le),e[30](le),g(I,Se),A&&A.m(I,null),g(t,Ie),pe=!0,ve||(Ee=[K(R,"click",e[20]),K(ee,"click",e[18]),K(te,"click",e[17])],ve=!0)},p(N,ne){var $e,et,tt,nt,lt,it,ot;const Xe={};!r&&ne[0]&1&&(r=!0,Xe.clickItem=N[0],oe(()=>r=!1)),c.$set(Xe);const Ve={};ne[0]&2&&(Ve.selectedFolder=($e=N[1])==null?void 0:$e.selected),ne[0]&2&&(Ve.data=N[1].children),p.$set(Ve);const xe={};!S&&ne[0]&1&&(S=!0,xe.clickItem=N[0],oe(()=>S=!1)),O.$set(xe),(!pe||ne[0]&16384&&V!==(V="Top-Level-Folder mfe-z-20  mfe-h-full"+(N[14]?" mfe-hidden":" mfe-min-w-52 mfe-w-52 mfe-pl-2 mfe-pr-4")+" svelte-tv1rem"))&&m(n,"class",V),N[7]?B?B.p(N,ne):(B=At(N),B.c(),B.m(b,se)):B&&(B.d(1),B=null),((et=N[3])==null?void 0:et.id)!==void 0&&((tt=N[3])==null?void 0:tt.id.length)>0||((lt=(nt=N[9])==null?void 0:nt.parent)==null?void 0:lt.path)!==void 0&&((ot=(it=N[9])==null?void 0:it.parent)==null?void 0:ot.path.length)>0?A?(A.p(N,ne),ne[0]&520&&_(A,1)):(A=Mt(N),A.c(),_(A,1),A.m(I,null)):A&&(Z(),C(A,1,1,()=>{A=null}),G())},i(N){pe||(_(c.$$.fragment,N),_(p.$$.fragment,N),_(O.$$.fragment,N),_(A),pe=!0)},o(N){C(c.$$.fragment,N),C(p.$$.fragment,N),C(O.$$.fragment,N),C(A),pe=!1},d(N){N&&M(t),q(c),q(p),q(O),e[27](null),B&&B.d(),e[28](null),e[29](null),e[30](null),A&&A.d(),ve=!1,ue(Ee)}}}function dl(e,t,n){const l=app.vault.getAbstractFileByPath("/");let i=be(l),s,o=null,c,r=!0,f,d,a=!1,h,u,p,v,F,k,w=!1,E,O=[{checked:!1,children:[],id:"/",name:"./",selected:""}],S=[{name:"All"},{name:"Last 7 Days"},{name:"Favorites"},{name:"Trash"}],V=[{name:"External All"},{name:"Boninall"},{name:"Brain"},{name:"TestFiles"}];function U(){n(1,i=be(l))}function I(T){var j,fe,B;console.log("fileTick",T);let A=T;if(((j=A==null?void 0:A.parent)===null||j===void 0?void 0:j.path)===(o==null?void 0:o.id)||((fe=A==null?void 0:A.parent)===null||fe===void 0?void 0:fe.path)===((B=u==null?void 0:u.parent)===null||B===void 0?void 0:B.path)){n(4,r=!r);return}n(5,f=A.path)}function b(T){let j=T;j instanceof L.TFile&&u===j||j!==null&&(o===null&&n(3,o=""),n(9,u=j),(u==null?void 0:u.parent)instanceof L.TFolder&&(n(2,s=He(u.parent.path.contains((c==null?void 0:c.path)===void 0?"":c.path)?c:u.parent,j)),n(6,d=be(u.parent))))}function R(T){const j=[["alphabetical","alphabeticalReverse"],["byModifiedTime","byModifiedTimeReverse"],["byCreatedTime","byCreatedTimeReverse"]],fe=T.currentTarget,B=new L.Menu().setNoIcon();for(let A=Dt(),ie=0;ie<j.length;ie++){for(let ae=0;ae<j[ie].length;ae++)B.addItem(Ne=>{Ne.setTitle(al(j[ie][ae])).setChecked(j[ie][ae]===A).onClick(()=>{fn(j[ie][ae]),Q()})});B.addSeparator()}B.setParentElement(fe).showAtMouseEvent(T)}function Q(){n(4,r=!r),(u==null?void 0:u.parent)instanceof L.TFolder&&(n(2,s=He(u.parent,u)),n(1,i=be(l,u.parent)))}function se(){var T;return We(this,void 0,void 0,function*(){const j=yield app.fileManager.createNewMarkdownFile((T=c)!==null&&T!==void 0?T:u==null?void 0:u.parent);j&&(yield app.workspace.getLeaf().openFile(j))})}function J(T){n(3,o=T),c=app.vault.getAbstractFileByPath(T.id),c instanceof L.TFolder&&(n(2,s=He(c,u)),n(1,i=be(l,c)))}function ee(){n(14,w=!w)}function he(){if(!(!h||!(h instanceof HTMLElement))){if(h.getBoundingClientRect().top>0&&a===!0){n(7,a=!1);return}n(7,a=!0)}}Ue(()=>{L.setIcon(p,"sidebar-left"),L.setIcon(v,"file-plus"),L.setIcon(F,"filter"),L.setIcon(k,"sort-desc")});function te(T){E=T,n(0,E)}function me(T){E=T,n(0,E)}function le(T){D[T?"unshift":"push"](()=>{p=T,n(10,p)})}function Se(T){D[T?"unshift":"push"](()=>{v=T,n(11,v)})}function Ie(T){D[T?"unshift":"push"](()=>{k=T,n(13,k)})}function pe(T){D[T?"unshift":"push"](()=>{F=T,n(12,F)})}function ve(T){D[T?"unshift":"push"](()=>{h=T,n(8,h)})}function Ee(T){e.$$.not_equal(s.selected,T)&&(s.selected=T,n(2,s))}function je(T){e.$$.not_equal(s.selected,T)&&(s.selected=T,n(2,s))}return e.$$.update=()=>{if(e.$$.dirty[0]&1&&E)switch(E.name){case"All":console.log(O[0]),J(O[0]);break}},[E,i,s,o,r,f,d,a,h,u,p,v,F,k,w,S,V,R,se,J,ee,he,U,I,b,te,me,le,Se,Ie,pe,ve,Ee,je]}class hl extends ${constructor(t){super(),x(this,t,dl,ul,X,{tick:22,fileTick:23,openedFile:24},null,[-1,-1])}get tick(){return this.$$.ctx[22]}get fileTick(){return this.$$.ctx[23]}get openedFile(){return this.$$.ctx[24]}}const Be="multi-file-explorer-view",ml={mySetting:"default"};class pl extends L.ItemView{constructor(t){super(t)}getViewType(){return Be}getDisplayText(){return"Multi File Explorer"}getIcon(){return"folders"}handleFileCreated(t){this.multiFileExplorer&&(this.multiFileExplorer.tick(),this.multiFileExplorer.fileTick(t))}handleFileDeleted(t){this.multiFileExplorer&&(this.multiFileExplorer.tick(),this.multiFileExplorer.fileTick(t))}handleLeafChanged(t){var n;!this.multiFileExplorer||((n=t==null?void 0:t.view)==null?void 0:n.file)instanceof L.TFile&&(this.multiFileExplorer.tick(),this.multiFileExplorer.openedFile(t.view.file))}tickMultiFileExplorer(){this.multiFileExplorer.tick(),this.multiFileExplorer.openedFile(this.app.workspace.getActiveFile())}async onOpen(){this.registerEvent(this.app.vault.on("create",this.handleFileCreated.bind(this))),this.registerEvent(this.app.vault.on("delete",this.handleFileDeleted.bind(this))),this.registerEvent(app.workspace.on("active-leaf-change",this.handleLeafChanged.bind(this))),this.multiFileExplorer=new hl({target:this.contentEl,props:{}}),this.tickMultiFileExplorer()}async onClose(){return this.multiFileExplorer&&this.multiFileExplorer.$destroy(),Promise.resolve()}}class gl extends L.Plugin{async onload(){await this.loadSettings(),this.registerView(Be,t=>this.view=new pl(t)),this.app.workspace.onLayoutReady(this.onLayoutReady.bind(this)),this.addSettingTab(new _l(this.app,this))}onLayoutReady(){this.app.workspace.getLeavesOfType(Be).length||this.app.workspace.getLeftLeaf(!1).setViewState({type:Be})}onunload(){}async loadSettings(){this.settings=Object.assign({},ml,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}}class _l extends L.PluginSettingTab{constructor(t,n){super(t,n),this.plugin=n}display(){const{containerEl:t}=this;t.empty(),t.createEl("h2",{text:"Settings for my awesome plugin."}),new L.Setting(t).setName("Setting #1").setDesc("It's a secret").addText(n=>n.setPlaceholder("Enter your secret").setValue(this.plugin.settings.mySetting).onChange(async l=>{this.plugin.settings.mySetting=l,await this.plugin.saveSettings()}))}}module.exports=gl;
